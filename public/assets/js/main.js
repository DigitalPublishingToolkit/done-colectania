/* interact.js v1.3.0 | https://raw.github.com/taye/interact.js/master/LICENSE */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.interact=t()}}(function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return i(n||t)},p,p.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";"undefined"==typeof window?e.exports=function(e){return t("./src/utils/window").init(e),t("./src/index")}:e.exports=t("./src/index")},{"./src/index":19,"./src/utils/window":51}],2:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r;r=e[n];var i=r;if(t.immediatePropagationStopped)break;i(t)}}var o=t("./utils/extend.js"),s=function(){function t(e){r(this,t),this.options=o({},e||{})}return t.prototype.fire=function(t){var e=void 0,n="on"+t.type,r=this.global;(e=this[t.type])&&i(t,e),this[n]&&this[n](t),!t.propagationStopped&&r&&(e=r[t.type])&&i(t,e)},t.prototype.on=function(t,e){this[t]?this[t].push(e):this[t]=[e]},t.prototype.off=function(t,e){var n=this[t],r=n?n.indexOf(e):-1;-1!==r&&n.splice(r,1),(n&&0===n.length||!e)&&(this[t]=void 0)},t}();e.exports=s},{"./utils/extend.js":40}],3:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=t("./utils/extend"),o=t("./utils/getOriginXY"),s=t("./defaultOptions"),a=t("./utils/Signals").new(),c=function(){function t(e,n,c,l,p,u){var d=arguments.length>6&&void 0!==arguments[6]&&arguments[6];r(this,t);var f=e.target,v=(f&&f.options||s).deltaSource,g=o(f,p,c),h="start"===l,m="end"===l,y=h?e.startCoords:e.curCoords,x=e.prevEvent;p=p||e.element;var b=i({},y.page),w=i({},y.client);b.x-=g.x,b.y-=g.y,w.x-=g.x,w.y-=g.y,this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.button=n.button,this.buttons=n.buttons,this.target=p,this.currentTarget=p,this.relatedTarget=u||null,this.preEnd=d,this.type=c+(l||""),this.interaction=e,this.interactable=f,this.t0=h?e.downTimes[e.downTimes.length-1]:x.t0;var E={interaction:e,event:n,action:c,phase:l,element:p,related:u,page:b,client:w,coords:y,starting:h,ending:m,deltaSource:v,iEvent:this};a.fire("set-xy",E),m?(this.pageX=x.pageX,this.pageY=x.pageY,this.clientX=x.clientX,this.clientY=x.clientY):(this.pageX=b.x,this.pageY=b.y,this.clientX=w.x,this.clientY=w.y),this.x0=e.startCoords.page.x-g.x,this.y0=e.startCoords.page.y-g.y,this.clientX0=e.startCoords.client.x-g.x,this.clientY0=e.startCoords.client.y-g.y,a.fire("set-delta",E),this.timeStamp=y.timeStamp,this.dt=e.pointerDelta.timeStamp,this.duration=this.timeStamp-this.t0,this.speed=e.pointerDelta[v].speed,this.velocityX=e.pointerDelta[v].vx,this.velocityY=e.pointerDelta[v].vy,this.swipe=m||"inertiastart"===l?this.getSwipe():null,a.fire("new",E)}return t.prototype.getSwipe=function(){var t=this.interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150)return null;var e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);var n=112.5<=e&&e<247.5,r=202.5<=e&&e<337.5,i=!n&&(292.5<=e||e<67.5);return{up:r,down:!r&&22.5<=e&&e<157.5,left:n,right:i,angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}},t.prototype.preventDefault=function(){},t.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();a.on("set-delta",function(t){var e=t.iEvent,n=t.interaction,r=t.starting,i=t.deltaSource,o=r?e:n.prevEvent;"client"===i?(e.dx=e.clientX-o.clientX,e.dy=e.clientY-o.clientY):(e.dx=e.pageX-o.pageX,e.dy=e.pageY-o.pageY)}),c.signals=a,e.exports=c},{"./defaultOptions":18,"./utils/Signals":34,"./utils/extend":40,"./utils/getOriginXY":41}],4:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=t("./utils/is"),o=t("./utils/events"),s=t("./utils/extend"),a=t("./actions/base"),c=t("./scope"),l=t("./Eventable"),p=t("./defaultOptions"),u=t("./utils/Signals").new(),d=t("./utils/domUtils"),f=d.getElementRect,v=d.nodeContains,g=d.trySelector,h=d.matchesSelector,m=t("./utils/window"),y=m.getWindow,x=t("./utils/arr"),b=x.contains,w=t("./utils/browser"),E=w.wheelEvent;c.interactables=[];var T=function(){function t(e,n){r(this,t),n=n||{},this.target=e,this.events=new l,this._context=n.context||c.document,this._win=y(g(e)?this._context:e),this._doc=this._win.document,u.fire("new",{target:e,options:n,interactable:this,win:this._win}),c.addDocument(this._doc,this._win),c.interactables.push(this),this.set(n)}return t.prototype.setOnEvents=function(t,e){var n="on"+t;return i.function(e.onstart)&&(this.events[n+"start"]=e.onstart),i.function(e.onmove)&&(this.events[n+"move"]=e.onmove),i.function(e.onend)&&(this.events[n+"end"]=e.onend),i.function(e.oninertiastart)&&(this.events[n+"inertiastart"]=e.oninertiastart),this},t.prototype.setPerAction=function(t,e){for(var n in e)n in p[t]&&(i.object(e[n])?(this.options[t][n]=s(this.options[t][n]||{},e[n]),i.object(p.perAction[n])&&"enabled"in p.perAction[n]&&(this.options[t][n].enabled=!1!==e[n].enabled)):i.bool(e[n])&&i.object(p.perAction[n])?this.options[t][n].enabled=e[n]:void 0!==e[n]&&(this.options[t][n]=e[n]))},t.prototype.getRect=function(t){return t=t||this.target,i.string(this.target)&&!i.element(t)&&(t=this._context.querySelector(this.target)),f(t)},t.prototype.rectChecker=function(t){return i.function(t)?(this.getRect=t,this):null===t?(delete this.options.getRect,this):this.getRect},t.prototype._backCompatOption=function(t,e){if(g(e)||i.object(e)){this.options[t]=e;for(var n=0;n<a.names.length;n++){var r;r=a.names[n];var o=r;this.options[o][t]=e}return this}return this.options[t]},t.prototype.origin=function(t){return this._backCompatOption("origin",t)},t.prototype.deltaSource=function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource},t.prototype.context=function(){return this._context},t.prototype.inContext=function(t){return this._context===t.ownerDocument||v(this._context,t)},t.prototype.fire=function(t){return this.events.fire(t),this},t.prototype._onOffMultiple=function(t,e,n,r){if(i.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),i.array(e)){for(var o=0;o<e.length;o++){var s;s=e[o];var a=s;this[t](a,n,r)}return!0}if(i.object(e)){for(var c in e)this[t](c,e[c],n);return!0}},t.prototype.on=function(e,n,r){return this._onOffMultiple("on",e,n,r)?this:("wheel"===e&&(e=E),b(t.eventTypes,e)?this.events.on(e,n):i.string(this.target)?o.addDelegate(this.target,this._context,e,n,r):o.add(this.target,e,n,r),this)},t.prototype.off=function(e,n,r){return this._onOffMultiple("off",e,n,r)?this:("wheel"===e&&(e=E),b(t.eventTypes,e)?this.events.off(e,n):i.string(this.target)?o.removeDelegate(this.target,this._context,e,n,r):o.remove(this.target,e,n,r),this)},t.prototype.set=function(e){i.object(e)||(e={}),this.options=s({},p.base);var n=s({},p.perAction);for(var r in a.methodDict){var o=a.methodDict[r];this.options[r]=s({},p[r]),this.setPerAction(r,n),this[o](e[r])}for(var c=0;c<t.settingsMethods.length;c++){var l;l=t.settingsMethods[c];var d=l;this.options[d]=p.base[d],d in e&&this[d](e[d])}return u.fire("set",{options:e,interactable:this}),this},t.prototype.unset=function(){if(o.remove(this.target,"all"),i.string(this.target))for(var t in o.delegatedEvents){var e=o.delegatedEvents[t];e.selectors[0]===this.target&&e.contexts[0]===this._context&&(e.selectors.splice(0,1),e.contexts.splice(0,1),e.listeners.splice(0,1),e.selectors.length||(e[t]=null)),o.remove(this._context,t,o.delegateListener),o.remove(this._context,t,o.delegateUseCapture,!0)}else o.remove(this,"all");u.fire("unset",{interactable:this}),c.interactables.splice(c.interactables.indexOf(this),1);for(var n=0;n<(c.interactions||[]).length;n++){var r;r=(c.interactions||[])[n];var s=r;s.target===this&&s.interacting()&&s.stop()}return c.interact},t}();c.interactables.indexOfElement=function(t,e){e=e||c.document;for(var n=0;n<this.length;n++){var r=this[n];if(r.target===t&&r._context===e)return n}return-1},c.interactables.get=function(t,e,n){var r=this[this.indexOfElement(t,e&&e.context)];return r&&(i.string(t)||n||r.inContext(t))?r:null},c.interactables.forEachMatch=function(t,e){for(var n=0;n<this.length;n++){var r;r=this[n];var o=r,s=void 0;if((i.string(o.target)?i.element(t)&&h(t,o.target):t===o.target)&&o.inContext(t)&&(s=e(o)),void 0!==s)return s}},T.eventTypes=c.eventTypes=[],T.signals=u,T.settingsMethods=["deltaSource","origin","preventDefault","rectChecker"],e.exports=T},{"./Eventable":2,"./actions/base":6,"./defaultOptions":18,"./scope":33,"./utils/Signals":34,"./utils/arr":35,"./utils/browser":36,"./utils/domUtils":38,"./utils/events":39,"./utils/extend":40,"./utils/is":45,"./utils/window":51}],5:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return function(e){var n=c.getPointerType(e),r=c.getEventTargets(e),i=r[0],o=r[1],s=[];if(p.supportsTouch&&/touch/.test(e.type)){h=(new Date).getTime();for(var l=0;l<e.changedTouches.length;l++){var u;u=e.changedTouches[l];var f=u,v=f,g=d.search(v,e.type,i);s.push([v,g||new m({pointerType:n})])}}else{var y=!1;if(!p.supportsPointerEvent&&/mouse/.test(e.type)){for(var x=0;x<a.interactions.length&&!y;x++)y="mouse"!==a.interactions[x].pointerType&&a.interactions[x].pointerIsDown;y=y||(new Date).getTime()-h<500||0===e.timeStamp}if(!y){var b=d.search(e,e.type,i);b||(b=new m({pointerType:n})),s.push([e,b])}}for(var w=0;w<s.length;w++){var E=s[w],T=E[0],S=E[1];S._updateEventTargets(i,o),S[t](T,e,i,o)}}}function o(t){for(var e=0;e<a.interactions.length;e++){var n;n=a.interactions[e];var r=n;r.end(t),f.fire("endall",{event:t,interaction:r})}}function s(t,e){var n=t.doc,r=0===e.indexOf("add")?l.add:l.remove;for(var i in a.delegatedEvents)r(n,i,l.delegateListener),r(n,i,l.delegateUseCapture,!0);for(var o in b)r(n,o,b[o])}var a=t("./scope"),c=t("./utils"),l=t("./utils/events"),p=t("./utils/browser"),u=t("./utils/domObjects"),d=t("./utils/interactionFinder"),f=t("./utils/Signals").new(),v={},g=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer"],h=0;a.interactions=[];for(var m=function(){function t(e){var n=e.pointerType;r(this,t),this.target=null,this.element=null,this.prepared={name:null,axis:null,edges:null},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this.pointerType=n,f.fire("new",this),a.interactions.push(this)}return t.prototype.pointerDown=function(t,e,n){var r=this.updatePointer(t,e,!0);f.fire("down",{pointer:t,event:e,eventTarget:n,pointerIndex:r,interaction:this})},t.prototype.start=function(t,e,n){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===t.name?2:1)||(-1===a.interactions.indexOf(this)&&a.interactions.push(this),c.copyAction(this.prepared,t),this.target=e,this.element=n,f.fire("action-start",{interaction:this,event:this.downEvent}))},t.prototype.pointerMove=function(e,n,r){this.simulation||(this.updatePointer(e),c.setCoords(this.curCoords,this.pointers));var i=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,o=void 0,s=void 0;this.pointerIsDown&&!this.pointerWasMoved&&(o=this.curCoords.client.x-this.startCoords.client.x,s=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=c.hypot(o,s)>t.pointerMoveTolerance);var a={pointer:e,pointerIndex:this.getPointerIndex(e),event:n,eventTarget:r,dx:o,dy:s,duplicate:i,interaction:this,interactingBeforeMove:this.interacting()};i||c.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords),f.fire("move",a),i||(this.interacting()&&this.doMove(a),this.pointerWasMoved&&c.copyCoords(this.prevCoords,this.curCoords))},t.prototype.doMove=function(t){t=c.extend({pointer:this.pointers[0],event:this.prevEvent,eventTarget:this._eventTarget,interaction:this},t||{}),f.fire("before-action-move",t),this._dontFireMove||f.fire("action-move",t),this._dontFireMove=!1},t.prototype.pointerUp=function(t,e,n,r){var i=this.getPointerIndex(t);f.fire(/cancel$/i.test(e.type)?"cancel":"up",{pointer:t,pointerIndex:i,event:e,eventTarget:n,curEventTarget:r,interaction:this}),this.simulation||this.end(e),this.pointerIsDown=!1,this.removePointer(t,e)},t.prototype.end=function(t){t=t||this.prevEvent,this.interacting()&&f.fire("action-end",{event:t,interaction:this}),this.stop()},t.prototype.currentAction=function(){return this._interacting?this.prepared.name:null},t.prototype.interacting=function(){return this._interacting},t.prototype.stop=function(){f.fire("stop",{interaction:this}),this._interacting&&(f.fire("stop-active",{interaction:this}),f.fire("stop-"+this.prepared.name,{interaction:this})),this.target=this.element=null,this._interacting=!1,this.prepared.name=this.prevEvent=null},t.prototype.getPointerIndex=function(t){return"mouse"===this.pointerType||"pen"===this.pointerType?0:this.pointerIds.indexOf(c.getPointerId(t))},t.prototype.updatePointer=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e&&/(down|start)$/i.test(e.type),r=c.getPointerId(t),i=this.getPointerIndex(t);return-1===i&&(i=this.pointerIds.length,this.pointerIds[i]=r),n&&f.fire("update-pointer-down",{pointer:t,event:e,down:n,pointerId:r,pointerIndex:i,interaction:this}),this.pointers[i]=t,i},t.prototype.removePointer=function(t,e){var n=this.getPointerIndex(t);-1!==n&&(f.fire("remove-pointer",{pointer:t,event:e,pointerIndex:n,interaction:this}),this.pointers.splice(n,1),this.pointerIds.splice(n,1),this.downTargets.splice(n,1),this.downTimes.splice(n,1))},t.prototype._updateEventTargets=function(t,e){this._eventTarget=t,this._curEventTarget=e},t}(),y=0;y<g.length;y++){var x=g[y];v[x]=i(x)}var b={},w=p.pEventTypes;u.PointerEvent?(b[w.down]=v.pointerDown,b[w.move]=v.pointerMove,b[w.up]=v.pointerUp,b[w.cancel]=v.pointerUp):(b.mousedown=v.pointerDown,b.mousemove=v.pointerMove,b.mouseup=v.pointerUp,b.touchstart=v.pointerDown,b.touchmove=v.pointerMove,b.touchend=v.pointerUp,b.touchcancel=v.pointerUp),b.blur=o,f.on("update-pointer-down",function(t){var e=t.interaction,n=t.pointer,r=t.pointerId,i=t.pointerIndex,o=t.event,s=t.eventTarget,a=t.down;e.pointerIds[i]=r,e.pointers[i]=n,a&&(e.pointerIsDown=!0),e.interacting()||(c.setCoords(e.startCoords,e.pointers),c.copyCoords(e.curCoords,e.startCoords),c.copyCoords(e.prevCoords,e.startCoords),e.downEvent=o,e.downTimes[i]=e.curCoords.timeStamp,e.downTargets[i]=s||o&&c.getEventTargets(o)[0],e.pointerWasMoved=!1,c.pointerExtend(e.downPointer,n))}),a.signals.on("add-document",s),a.signals.on("remove-document",s),m.pointerMoveTolerance=1,m.doOnInteractions=i,m.endAll=o,m.signals=f,m.docEvents=b,a.endAllInteractions=o,e.exports=m},{"./scope":33,"./utils":43,"./utils/Signals":34,"./utils/browser":36,"./utils/domObjects":37,"./utils/events":39,"./utils/interactionFinder":44}],6:[function(t,e,n){"use strict";function r(t,e,n,r){var i=t.prepared.name,s=new o(t,e,i,n,t.element,null,r);t.target.fire(s),t.prevEvent=s}var i=t("../Interaction"),o=t("../InteractEvent"),s={firePrepared:r,names:[],methodDict:{}};i.signals.on("action-start",function(t){var e=t.interaction,n=t.event;e._interacting=!0,r(e,n,"start")}),i.signals.on("action-move",function(t){var e=t.interaction;if(r(e,t.event,"move",t.preEnd),!e.interacting())return!1}),i.signals.on("action-end",function(t){r(t.interaction,t.event,"end")}),e.exports=s},{"../InteractEvent":3,"../Interaction":5}],7:[function(t,e,n){"use strict";var r=t("./base"),i=t("../utils"),o=t("../InteractEvent"),s=t("../Interactable"),a=t("../Interaction"),c=t("../defaultOptions"),l={defaults:{enabled:!1,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,startAxis:"xy",lockAxis:"xy"},checker:function(t,e,n){var r=n.options.drag;return r.enabled?{name:"drag",axis:"start"===r.lockAxis?r.startAxis:r.lockAxis}:null},getCursor:function(){return"move"}};a.signals.on("before-action-move",function(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.prepared.axis;"x"===n?(e.curCoords.page.y=e.startCoords.page.y,e.curCoords.client.y=e.startCoords.client.y,e.pointerDelta.page.speed=Math.abs(e.pointerDelta.page.vx),e.pointerDelta.client.speed=Math.abs(e.pointerDelta.client.vx),e.pointerDelta.client.vy=0,e.pointerDelta.page.vy=0):"y"===n&&(e.curCoords.page.x=e.startCoords.page.x,e.curCoords.client.x=e.startCoords.client.x,e.pointerDelta.page.speed=Math.abs(e.pointerDelta.page.vy),e.pointerDelta.client.speed=Math.abs(e.pointerDelta.client.vy),e.pointerDelta.client.vx=0,e.pointerDelta.page.vx=0)}}),o.signals.on("new",function(t){var e=t.iEvent,n=t.interaction;if("dragmove"===e.type){var r=n.prepared.axis;"x"===r?(e.pageY=n.startCoords.page.y,e.clientY=n.startCoords.client.y,e.dy=0):"y"===r&&(e.pageX=n.startCoords.page.x,e.clientX=n.startCoords.client.x,e.dx=0)}}),s.prototype.draggable=function(t){return i.is.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):i.is.bool(t)?(this.options.drag.enabled=t,t||(this.ondragstart=this.ondragstart=this.ondragend=null),this):this.options.drag},r.drag=l,r.names.push("drag"),i.merge(s.eventTypes,["dragstart","dragmove","draginertiastart","draginertiaresume","dragend"]),r.methodDict.drag="draggable",c.drag=l.defaults,e.exports=l},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":43,"./base":6}],8:[function(t,e,n){"use strict";function r(t,e){var n=[],r=[];e=e||t.element;for(var i=0;i<u.interactables.length;i++){var o;o=u.interactables[i];var s=o;if(s.options.drop.enabled){var a=s.options.drop.accept;if(!(p.is.element(a)&&a!==e||p.is.string(a)&&!p.matchesSelector(e,a)))for(var c=p.is.string(s.target)?s._context.querySelectorAll(s.target):[s.target],l=0;l<c.length;l++){var d;d=c[l];var f=d;f!==e&&(n.push(s),r.push(f))}}}return{elements:r,dropzones:n}}function i(t,e){for(var n=void 0,r=0;r<t.activeDrops.dropzones.length;r++){var i=t.activeDrops.dropzones[r],o=t.activeDrops.elements[r];o!==n&&(e.target=o,i.fire(e)),n=o}}function o(t,e){var n=r(t,e,!0);t.activeDrops.dropzones=n.dropzones,t.activeDrops.elements=n.elements,t.activeDrops.rects=[];for(var i=0;i<t.activeDrops.dropzones.length;i++)t.activeDrops.rects[i]=t.activeDrops.dropzones[i].getRect(t.activeDrops.elements[i])}function s(t,e,n){var r=t.interaction,i=[];y&&o(r,n);for(var s=0;s<r.activeDrops.dropzones.length;s++){var a=r.activeDrops.dropzones[s],c=r.activeDrops.elements[s],l=r.activeDrops.rects[s];i.push(a.dropCheck(t,e,r.target,n,c,l)?c:null)}var u=p.indexOfDeepestElement(i);return{dropzone:r.activeDrops.dropzones[u]||null,element:r.activeDrops.elements[u]||null}}function a(t,e,n){var r={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null},i={dragEvent:n,interaction:t,target:t.dropElement,dropzone:t.dropTarget,relatedTarget:n.target,draggable:n.interactable,timeStamp:n.timeStamp};return t.dropElement!==t.prevDropElement&&(t.prevDropTarget&&(r.leave=p.extend({type:"dragleave"},i),n.dragLeave=r.leave.target=t.prevDropElement,n.prevDropzone=r.leave.dropzone=t.prevDropTarget),t.dropTarget&&(r.enter={dragEvent:n,interaction:t,target:t.dropElement,dropzone:t.dropTarget,relatedTarget:n.target,draggable:n.interactable,timeStamp:n.timeStamp,type:"dragenter"},n.dragEnter=t.dropElement,n.dropzone=t.dropTarget)),"dragend"===n.type&&t.dropTarget&&(r.drop=p.extend({type:"drop"},i),n.dropzone=t.dropTarget,n.relatedTarget=t.dropElement),"dragstart"===n.type&&(r.activate=p.extend({type:"dropactivate"},i),r.activate.target=null,r.activate.dropzone=null),"dragend"===n.type&&(r.deactivate=p.extend({type:"dropdeactivate"},i),r.deactivate.target=null,r.deactivate.dropzone=null),"dragmove"===n.type&&t.dropTarget&&(r.move=p.extend({dragmove:n,type:"dropmove"},i),n.dropzone=t.dropTarget),r}function c(t,e){e.leave&&t.prevDropTarget.fire(e.leave),e.move&&t.dropTarget.fire(e.move),e.enter&&t.dropTarget.fire(e.enter),e.drop&&t.dropTarget.fire(e.drop),e.deactivate&&i(t,e.deactivate),t.prevDropTarget=t.dropTarget,t.prevDropElement=t.dropElement}var l=t("./base"),p=t("../utils"),u=t("../scope"),d=t("../interact"),f=t("../InteractEvent"),v=t("../Interactable"),g=t("../Interaction"),h=t("../defaultOptions"),m={defaults:{enabled:!1,accept:null,overlap:"pointer"}},y=!1;g.signals.on("action-start",function(t){var e=t.interaction,n=t.event;if("drag"===e.prepared.name){e.activeDrops.dropzones=[],e.activeDrops.elements=[],e.activeDrops.rects=[],e.dropEvents=null,e.dynamicDrop||o(e,e.element);var r=e.prevEvent,s=a(e,n,r);s.activate&&i(e,s.activate)}}),f.signals.on("new",function(t){var e=t.interaction,n=t.iEvent,r=t.event;if("dragmove"===n.type||"dragend"===n.type){var i=e.element,o=n,c=s(o,r,i);e.dropTarget=c.dropzone,e.dropElement=c.element,e.dropEvents=a(e,r,o)}}),g.signals.on("action-move",function(t){var e=t.interaction;"drag"===e.prepared.name&&c(e,e.dropEvents)}),g.signals.on("action-end",function(t){var e=t.interaction;"drag"===e.prepared.name&&c(e,e.dropEvents)}),g.signals.on("stop-drag",function(t){var e=t.interaction;e.activeDrops.dropzones=e.activeDrops.elements=e.activeDrops.rects=e.dropEvents=null}),v.prototype.dropzone=function(t){return p.is.object(t)?(this.options.drop.enabled=!1!==t.enabled,p.is.function(t.ondrop)&&(this.events.ondrop=t.ondrop),p.is.function(t.ondropactivate)&&(this.events.ondropactivate=t.ondropactivate),p.is.function(t.ondropdeactivate)&&(this.events.ondropdeactivate=t.ondropdeactivate),p.is.function(t.ondragenter)&&(this.events.ondragenter=t.ondragenter),p.is.function(t.ondragleave)&&(this.events.ondragleave=t.ondragleave),p.is.function(t.ondropmove)&&(this.events.ondropmove=t.ondropmove),/^(pointer|center)$/.test(t.overlap)?this.options.drop.overlap=t.overlap:p.is.number(t.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(this.options.drop.accept=t.accept),"checker"in t&&(this.options.drop.checker=t.checker),this):p.is.bool(t)?(this.options.drop.enabled=t,t||(this.ondragenter=this.ondragleave=this.ondrop=this.ondropactivate=this.ondropdeactivate=null),this):this.options.drop},v.prototype.dropCheck=function(t,e,n,r,i,o){var s=!1;if(!(o=o||this.getRect(i)))return!!this.options.drop.checker&&this.options.drop.checker(t,e,s,this,i,n,r);var a=this.options.drop.overlap;if("pointer"===a){var c=p.getOriginXY(n,r,"drag"),l=p.getPageXY(t);l.x+=c.x,l.y+=c.y;var u=l.x>o.left&&l.x<o.right,d=l.y>o.top&&l.y<o.bottom;s=u&&d}var f=n.getRect(r);if(f&&"center"===a){var v=f.left+f.width/2,g=f.top+f.height/2;s=v>=o.left&&v<=o.right&&g>=o.top&&g<=o.bottom}if(f&&p.is.number(a)){s=Math.max(0,Math.min(o.right,f.right)-Math.max(o.left,f.left))*Math.max(0,Math.min(o.bottom,f.bottom)-Math.max(o.top,f.top))/(f.width*f.height)>=a}return this.options.drop.checker&&(s=this.options.drop.checker(t,e,s,this,i,n,r)),s},v.signals.on("unset",function(t){t.interactable.dropzone(!1)}),v.settingsMethods.push("dropChecker"),g.signals.on("new",function(t){t.dropTarget=null,t.dropElement=null,t.prevDropTarget=null,t.prevDropElement=null,t.dropEvents=null,t.activeDrops={dropzones:[],elements:[],rects:[]}}),g.signals.on("stop",function(t){var e=t.interaction;e.dropTarget=e.dropElement=e.prevDropTarget=e.prevDropElement=null}),d.dynamicDrop=function(t){return p.is.bool(t)?(y=t,d):y},p.merge(v.eventTypes,["dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop"]),l.methodDict.drop="dropzone",h.drop=m.defaults,e.exports=m},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":43,"./base":6}],9:[function(t,e,n){"use strict";var r=t("./base"),i=t("../utils"),o=t("../InteractEvent"),s=t("../Interactable"),a=t("../Interaction"),c=t("../defaultOptions"),l={defaults:{enabled:!1,origin:null,restrict:null},checker:function(t,e,n,r,i){return i.pointerIds.length>=2?{name:"gesture"}:null},getCursor:function(){return""}};o.signals.on("new",function(t){var e=t.iEvent,n=t.interaction;"gesturestart"===e.type&&(e.ds=0,n.gesture.startDistance=n.gesture.prevDistance=e.distance,n.gesture.startAngle=n.gesture.prevAngle=e.angle,n.gesture.scale=1)}),o.signals.on("new",function(t){var e=t.iEvent,n=t.interaction;"gesturemove"===e.type&&(e.ds=e.scale-n.gesture.scale,n.target.fire(e),n.gesture.prevAngle=e.angle,n.gesture.prevDistance=e.distance,e.scale===1/0||null===e.scale||void 0===e.scale||isNaN(e.scale)||(n.gesture.scale=e.scale))}),s.prototype.gesturable=function(t){return i.is.object(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):i.is.bool(t)?(this.options.gesture.enabled=t,t||(this.ongesturestart=this.ongesturestart=this.ongestureend=null),this):this.options.gesture},o.signals.on("set-delta",function(t){var e=t.interaction,n=t.iEvent,r=t.action,s=t.event,a=t.starting,c=t.ending,l=t.deltaSource;if("gesture"===r){var p=e.pointers;n.touches=[p[0],p[1]],a?(n.distance=i.touchDistance(p,l),n.box=i.touchBBox(p),n.scale=1,n.ds=0,n.angle=i.touchAngle(p,void 0,l),n.da=0):c||s instanceof o?(n.distance=e.prevEvent.distance,n.box=e.prevEvent.box,n.scale=e.prevEvent.scale,n.ds=n.scale-1,n.angle=e.prevEvent.angle,n.da=n.angle-e.gesture.startAngle):(n.distance=i.touchDistance(p,l),n.box=i.touchBBox(p),n.scale=n.distance/e.gesture.startDistance,n.angle=i.touchAngle(p,e.gesture.prevAngle,l),n.ds=n.scale-e.gesture.prevScale,n.da=n.angle-e.gesture.prevAngle)}}),a.signals.on("new",function(t){t.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0}}),r.gesture=l,r.names.push("gesture"),i.merge(s.eventTypes,["gesturestart","gesturemove","gestureend"]),r.methodDict.gesture="gesturable",c.gesture=l.defaults,e.exports=l},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":43,"./base":6}],10:[function(t,e,n){"use strict";function r(t,e,n,r,i,s,a){if(!e)return!1;if(!0===e){var c=o.is.number(s.width)?s.width:s.right-s.left,l=o.is.number(s.height)?s.height:s.bottom-s.top;if(c<0&&("left"===t?t="right":"right"===t&&(t="left")),l<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t)return n.x<(c>=0?s.left:s.right)+a;if("top"===t)return n.y<(l>=0?s.top:s.bottom)+a;if("right"===t)return n.x>(c>=0?s.right:s.left)-a;if("bottom"===t)return n.y>(l>=0?s.bottom:s.top)-a}return!!o.is.element(r)&&(o.is.element(e)?e===r:o.matchesUpTo(r,e,i))}var i=t("./base"),o=t("../utils"),s=t("../utils/browser"),a=t("../InteractEvent"),c=t("../Interactable"),l=t("../Interaction"),p=t("../defaultOptions"),u=s.supportsTouch||s.supportsPointerEvent?20:10,d={defaults:{enabled:!1,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},checker:function(t,e,n,i,s,a){if(!a)return null;var c=o.extend({},s.curCoords.page),l=n.options;if(l.resize.enabled){var p=l.resize,d={left:!1,right:!1,top:!1,bottom:!1};if(o.is.object(p.edges)){for(var f in d)d[f]=r(f,p.edges[f],c,s._eventTarget,i,a,p.margin||u);if(d.left=d.left&&!d.right,d.top=d.top&&!d.bottom,d.left||d.right||d.top||d.bottom)return{name:"resize",edges:d}}else{var v="y"!==l.resize.axis&&c.x>a.right-u,g="x"!==l.resize.axis&&c.y>a.bottom-u;if(v||g)return{name:"resize",axes:(v?"x":"")+(g?"y":"")}}}return null},cursors:s.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},getCursor:function(t){if(t.axis)return d.cursors[t.name+t.axis];if(t.edges){for(var e="",n=["top","bottom","left","right"],r=0;r<4;r++)t.edges[n[r]]&&(e+=n[r]);return d.cursors[e]}}};a.signals.on("new",function(t){var e=t.iEvent,n=t.interaction;if("resizestart"===e.type&&n.prepared.edges){var r=n.target.getRect(n.element),i=n.target.options.resize;if(i.square||i.preserveAspectRatio){var s=o.extend({},n.prepared.edges);s.top=s.top||s.left&&!s.bottom,s.left=s.left||s.top&&!s.right,s.bottom=s.bottom||s.right&&!s.top,s.right=s.right||s.bottom&&!s.left,n.prepared._linkedEdges=s}else n.prepared._linkedEdges=null;i.preserveAspectRatio&&(n.resizeStartAspectRatio=r.width/r.height),n.resizeRects={start:r,current:o.extend({},r),inverted:o.extend({},r),previous:o.extend({},r),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},e.rect=n.resizeRects.inverted,e.deltaRect=n.resizeRects.delta}}),a.signals.on("new",function(t){var e=t.iEvent,n=t.phase,r=t.interaction;if("move"===n&&r.prepared.edges){var i=r.target.options.resize,s=i.invert,a="reposition"===s||"negate"===s,c=r.prepared.edges,l=r.resizeRects.start,p=r.resizeRects.current,u=r.resizeRects.inverted,d=r.resizeRects.delta,f=o.extend(r.resizeRects.previous,u),v=c,g=e.dx,h=e.dy;if(i.preserveAspectRatio||i.square){var m=i.preserveAspectRatio?r.resizeStartAspectRatio:1;c=r.prepared._linkedEdges,v.left&&v.bottom||v.right&&v.top?h=-g/m:v.left||v.right?h=g/m:(v.top||v.bottom)&&(g=h*m)}if(c.top&&(p.top+=h),c.bottom&&(p.bottom+=h),c.left&&(p.left+=g),c.right&&(p.right+=g),a){if(o.extend(u,p),"reposition"===s){var y=void 0;u.top>u.bottom&&(y=u.top,u.top=u.bottom,u.bottom=y),u.left>u.right&&(y=u.left,u.left=u.right,u.right=y)}}else u.top=Math.min(p.top,l.bottom),u.bottom=Math.max(p.bottom,l.top),u.left=Math.min(p.left,l.right),u.right=Math.max(p.right,l.left);u.width=u.right-u.left,u.height=u.bottom-u.top;for(var x in u)d[x]=u[x]-f[x];e.edges=r.prepared.edges,e.rect=u,e.deltaRect=d}}),c.prototype.resizable=function(t){return o.is.object(t)?(this.options.resize.enabled=!1!==t.enabled,this.setPerAction("resize",t),this.setOnEvents("resize",t),/^x$|^y$|^xy$/.test(t.axis)?this.options.resize.axis=t.axis:null===t.axis&&(this.options.resize.axis=p.resize.axis),o.is.bool(t.preserveAspectRatio)?this.options.resize.preserveAspectRatio=t.preserveAspectRatio:o.is.bool(t.square)&&(this.options.resize.square=t.square),this):o.is.bool(t)?(this.options.resize.enabled=t,t||(this.onresizestart=this.onresizestart=this.onresizeend=null),this):this.options.resize},l.signals.on("new",function(t){t.resizeAxes="xy"}),a.signals.on("set-delta",function(t){var e=t.interaction,n=t.iEvent;"resize"===t.action&&e.resizeAxes&&(e.target.options.resize.square?("y"===e.resizeAxes?n.dx=n.dy:n.dy=n.dx,n.axes="xy"):(n.axes=e.resizeAxes,"x"===e.resizeAxes?n.dy=0:"y"===e.resizeAxes&&(n.dx=0)))}),i.resize=d,i.names.push("resize"),
o.merge(c.eventTypes,["resizestart","resizemove","resizeinertiastart","resizeinertiaresume","resizeend"]),i.methodDict.resize="resizable",p.resize=d.defaults,e.exports=d},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":43,"../utils/browser":36,"./base":6}],11:[function(t,e,n){"use strict";var r=t("./utils/raf"),i=t("./utils/window").getWindow,o=t("./utils/is"),s=t("./utils/domUtils"),a=t("./Interaction"),c=t("./defaultOptions"),l={defaults:{enabled:!1,container:null,margin:60,speed:300},interaction:null,i:null,x:0,y:0,isScrolling:!1,prevTime:0,start:function(t){l.isScrolling=!0,r.cancel(l.i),l.interaction=t,l.prevTime=(new Date).getTime(),l.i=r.request(l.scroll)},stop:function(){l.isScrolling=!1,r.cancel(l.i)},scroll:function(){var t=l.interaction.target.options[l.interaction.prepared.name].autoScroll,e=t.container||i(l.interaction.element),n=(new Date).getTime(),s=(n-l.prevTime)/1e3,a=t.speed*s;a>=1&&(o.window(e)?e.scrollBy(l.x*a,l.y*a):e&&(e.scrollLeft+=l.x*a,e.scrollTop+=l.y*a),l.prevTime=n),l.isScrolling&&(r.cancel(l.i),l.i=r.request(l.scroll))},check:function(t,e){var n=t.options;return n[e].autoScroll&&n[e].autoScroll.enabled},onInteractionMove:function(t){var e=t.interaction,n=t.pointer;if(e.interacting()&&l.check(e.target,e.prepared.name)){if(e.simulation)return void(l.x=l.y=0);var r=void 0,a=void 0,c=void 0,p=void 0,u=e.target.options[e.prepared.name].autoScroll,d=u.container||i(e.element);if(o.window(d))p=n.clientX<l.margin,r=n.clientY<l.margin,a=n.clientX>d.innerWidth-l.margin,c=n.clientY>d.innerHeight-l.margin;else{var f=s.getElementClientRect(d);p=n.clientX<f.left+l.margin,r=n.clientY<f.top+l.margin,a=n.clientX>f.right-l.margin,c=n.clientY>f.bottom-l.margin}l.x=a?1:p?-1:0,l.y=c?1:r?-1:0,l.isScrolling||(l.margin=u.margin,l.speed=u.speed,l.start(e))}}};a.signals.on("stop-active",function(){l.stop()}),a.signals.on("action-move",l.onInteractionMove),c.perAction.autoScroll=l.defaults,e.exports=l},{"./Interaction":5,"./defaultOptions":18,"./utils/domUtils":38,"./utils/is":45,"./utils/raf":49,"./utils/window":51}],12:[function(t,e,n){"use strict";var r=t("../Interactable"),i=t("../actions/base"),o=t("../utils/is"),s=t("../utils/domUtils"),a=t("../utils"),c=a.warnOnce;r.prototype.getAction=function(t,e,n,r){var i=this.defaultActionChecker(t,e,n,r);return this.options.actionChecker?this.options.actionChecker(t,e,i,this,r,n):i},r.prototype.ignoreFrom=c(function(t){return this._backCompatOption("ignoreFrom",t)},"Interactable.ignoreForm() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),r.prototype.allowFrom=c(function(t){return this._backCompatOption("allowFrom",t)},"Interactable.allowForm() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),r.prototype.testIgnore=function(t,e,n){return!(!t||!o.element(n))&&(o.string(t)?s.matchesUpTo(n,t,e):!!o.element(t)&&s.nodeContains(t,n))},r.prototype.testAllow=function(t,e,n){return!t||!!o.element(n)&&(o.string(t)?s.matchesUpTo(n,t,e):!!o.element(t)&&s.nodeContains(t,n))},r.prototype.testIgnoreAllow=function(t,e,n){return!this.testIgnore(t.ignoreFrom,e,n)&&this.testAllow(t.allowFrom,e,n)},r.prototype.actionChecker=function(t){return o.function(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker},r.prototype.styleCursor=function(t){return o.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor},r.prototype.defaultActionChecker=function(t,e,n,r){for(var o=this.getRect(r),s=e.buttons||{0:1,1:4,3:8,4:16}[e.button],a=null,c=0;c<i.names.length;c++){var l;l=i.names[c];var p=l;if((!n.pointerIsDown||!/mouse|pointer/.test(n.pointerType)||0!=(s&this.options[p].mouseButtons))&&(a=i[p].checker(t,e,this,r,n,o)))return a}}},{"../Interactable":4,"../actions/base":6,"../utils":43,"../utils/domUtils":38,"../utils/is":45}],13:[function(t,e,n){"use strict";function r(t,e,n,r){return v.is.object(t)&&e.testIgnoreAllow(e.options[t.name],n,r)&&e.options[t.name].enabled&&a(e,n,t)?t:null}function i(t,e,n,i,o,s){for(var a=0,c=i.length;a<c;a++){var l=i[a],p=o[a],u=r(l.getAction(e,n,t,p),l,p,s);if(u)return{action:u,target:l,element:p}}return{}}function o(t,e,n,r){function o(t){s.push(t),a.push(c)}for(var s=[],a=[],c=r;v.is.element(c);){s=[],a=[],f.interactables.forEachMatch(c,o);var l=i(t,e,n,s,a,r);if(l.action&&!l.target.options[l.action.name].manualStart)return l;c=v.parentNode(c)}return{}}function s(t,e){var n=e.action,r=e.target,i=e.element;if(n=n||{},t.target&&t.target.options.styleCursor&&(t.target._doc.documentElement.style.cursor=""),t.target=r,t.element=i,v.copyAction(t.prepared,n),r&&r.options.styleCursor){var o=n?u[n.name].getCursor(n):"";t.target._doc.documentElement.style.cursor=o}g.fire("prepared",{interaction:t})}function a(t,e,n){var r=t.options,i=r[n.name].max,o=r[n.name].maxPerElement,s=0,a=0,c=0;if(i&&o&&h.maxInteractions){for(var l=0;l<f.interactions.length;l++){var p;p=f.interactions[l];var u=p,d=u.prepared.name;if(u.interacting()){if(++s>=h.maxInteractions)return!1;if(u.target===t){if((a+=d===n.name|0)>=i)return!1;if(u.element===e&&(c++,d!==n.name||c>=o))return!1}}}return h.maxInteractions>0}}var c=t("../interact"),l=t("../Interactable"),p=t("../Interaction"),u=t("../actions/base"),d=t("../defaultOptions"),f=t("../scope"),v=t("../utils"),g=t("../utils/Signals").new();t("./InteractableMethods");var h={signals:g,withinInteractionLimit:a,maxInteractions:1/0,defaults:{perAction:{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}},setActionDefaults:function(t){v.extend(t.defaults,h.defaults.perAction)},validateAction:r};p.signals.on("down",function(t){var e=t.interaction,n=t.pointer,r=t.event,i=t.eventTarget;if(!e.interacting()){s(e,o(e,n,r,i))}}),p.signals.on("move",function(t){var e=t.interaction,n=t.pointer,r=t.event,i=t.eventTarget;if("mouse"===e.pointerType&&!e.pointerIsDown&&!e.interacting()){s(e,o(e,n,r,i))}}),p.signals.on("move",function(t){var e=t.interaction,n=t.event;if(e.pointerIsDown&&!e.interacting()&&e.pointerWasMoved&&e.prepared.name){g.fire("before-start",t);var r=e.target;e.prepared.name&&r&&(r.options[e.prepared.name].manualStart||!a(r,e.element,e.prepared)?e.stop(n):e.start(e.prepared,r,e.element))}}),p.signals.on("stop",function(t){var e=t.interaction,n=e.target;n&&n.options.styleCursor&&(n._doc.documentElement.style.cursor="")}),c.maxInteractions=function(t){return v.is.number(t)?(h.maxInteractions=t,c):h.maxInteractions},l.settingsMethods.push("styleCursor"),l.settingsMethods.push("actionChecker"),l.settingsMethods.push("ignoreFrom"),l.settingsMethods.push("allowFrom"),d.base.actionChecker=null,d.base.styleCursor=!0,v.extend(d.perAction,h.defaults.perAction),e.exports=h},{"../Interactable":4,"../Interaction":5,"../actions/base":6,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":43,"../utils/Signals":34,"./InteractableMethods":12}],14:[function(t,e,n){"use strict";function r(t,e){if(!e)return!1;var n=e.options.drag.startAxis;return"xy"===t||"xy"===n||n===t}var i=t("./base"),o=t("../scope"),s=t("../utils/is"),a=t("../utils/domUtils"),c=a.parentNode;i.setActionDefaults(t("../actions/drag")),i.signals.on("before-start",function(t){var e=t.interaction,n=t.eventTarget,a=t.dx,l=t.dy;if("drag"===e.prepared.name){var p=Math.abs(a),u=Math.abs(l),d=e.target.options.drag,f=d.startAxis,v=p>u?"x":p<u?"y":"xy";if(e.prepared.axis="start"===d.lockAxis?v[0]:d.lockAxis,"xy"!==v&&"xy"!==f&&f!==v){e.prepared.name=null;for(var g=n,h=function(t){if(t!==e.target){var o=e.target.options.drag;if(!o.manualStart&&t.testIgnoreAllow(o,g,n)){var s=t.getAction(e.downPointer,e.downEvent,e,g);if(s&&"drag"===s.name&&r(v,t)&&i.validateAction(s,t,g,n))return t}}};s.element(g);){var m=o.interactables.forEachMatch(g,h);if(m){e.prepared.name="drag",e.target=m,e.element=g;break}g=c(g)}}}})},{"../actions/drag":7,"../scope":33,"../utils/domUtils":38,"../utils/is":45,"./base":13}],15:[function(t,e,n){"use strict";t("./base").setActionDefaults(t("../actions/gesture"))},{"../actions/gesture":9,"./base":13}],16:[function(t,e,n){"use strict";function r(t){var e=t.prepared&&t.prepared.name;if(!e)return null;var n=t.target.options;return n[e].hold||n[e].delay}var i=t("./base"),o=t("../Interaction");i.defaults.perAction.hold=0,i.defaults.perAction.delay=0,o.signals.on("new",function(t){t.autoStartHoldTimer=null}),i.signals.on("prepared",function(t){var e=t.interaction,n=r(e);n>0&&(e.autoStartHoldTimer=setTimeout(function(){e.start(e.prepared,e.target,e.element)},n))}),o.signals.on("move",function(t){var e=t.interaction,n=t.duplicate;e.pointerWasMoved&&!n&&clearTimeout(e.autoStartHoldTimer)}),i.signals.on("before-start",function(t){var e=t.interaction;r(e)>0&&(e.prepared.name=null)}),e.exports={getHoldDuration:r}},{"../Interaction":5,"./base":13}],17:[function(t,e,n){"use strict";t("./base").setActionDefaults(t("../actions/resize"))},{"../actions/resize":10,"./base":13}],18:[function(t,e,n){"use strict";e.exports={base:{accept:null,preventDefault:"auto",deltaSource:"page"},perAction:{origin:{x:0,y:0},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}}}},{}],19:[function(t,e,n){"use strict";t("./inertia"),t("./modifiers/snap"),t("./modifiers/restrict"),t("./pointerEvents/base"),t("./pointerEvents/holdRepeat"),t("./pointerEvents/interactableTargets"),t("./autoStart/hold"),t("./actions/gesture"),t("./actions/resize"),t("./actions/drag"),t("./actions/drop"),t("./modifiers/snapSize"),t("./modifiers/restrictEdges"),t("./modifiers/restrictSize"),t("./autoStart/gesture"),t("./autoStart/resize"),t("./autoStart/drag"),t("./interactablePreventDefault.js"),t("./autoScroll"),e.exports=t("./interact")},{"./actions/drag":7,"./actions/drop":8,"./actions/gesture":9,"./actions/resize":10,"./autoScroll":11,"./autoStart/drag":14,"./autoStart/gesture":15,"./autoStart/hold":16,"./autoStart/resize":17,"./inertia":20,"./interact":21,"./interactablePreventDefault.js":22,"./modifiers/restrict":24,"./modifiers/restrictEdges":25,"./modifiers/restrictSize":26,"./modifiers/snap":27,"./modifiers/snapSize":28,"./pointerEvents/base":30,"./pointerEvents/holdRepeat":31,"./pointerEvents/interactableTargets":32}],20:[function(t,e,n){"use strict";function r(t,e){var n=t.target.options[t.prepared.name].inertia,r=n.resistance,i=-Math.log(n.endSpeed/e.v0)/r;e.x0=t.prevEvent.pageX,e.y0=t.prevEvent.pageY,e.t0=e.startEvent.timeStamp/1e3,e.sx=e.sy=0,e.modifiedXe=e.xe=(e.vx0-i)/r,e.modifiedYe=e.ye=(e.vy0-i)/r,e.te=i,e.lambda_v0=r/e.v0,e.one_ve_v0=1-n.endSpeed/e.v0}function i(){s(this),p.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords);var t=this.inertiaStatus,e=this.target.options[this.prepared.name].inertia,n=e.resistance,r=(new Date).getTime()/1e3-t.t0;if(r<t.te){var i=1-(Math.exp(-n*r)-t.lambda_v0)/t.one_ve_v0;if(t.modifiedXe===t.xe&&t.modifiedYe===t.ye)t.sx=t.xe*i,t.sy=t.ye*i;else{var o=p.getQuadraticCurvePoint(0,0,t.xe,t.ye,t.modifiedXe,t.modifiedYe,i);t.sx=o.x,t.sy=o.y}this.doMove(),t.i=u.request(this.boundInertiaFrame)}else t.sx=t.modifiedXe,t.sy=t.modifiedYe,this.doMove(),this.end(t.startEvent),t.active=!1,this.simulation=null;p.copyCoords(this.prevCoords,this.curCoords)}function o(){s(this);var t=this.inertiaStatus,e=(new Date).getTime()-t.t0,n=this.target.options[this.prepared.name].inertia.smoothEndDuration;e<n?(t.sx=p.easeOutQuad(e,0,t.xe,n),t.sy=p.easeOutQuad(e,0,t.ye,n),this.pointerMove(t.startEvent,t.startEvent),t.i=u.request(this.boundSmoothEndFrame)):(t.sx=t.xe,t.sy=t.ye,this.pointerMove(t.startEvent,t.startEvent),this.end(t.startEvent),t.smoothEnd=t.active=!1,this.simulation=null)}function s(t){var e=t.inertiaStatus;if(e.active){var n=e.upCoords.page,r=e.upCoords.client;p.setCoords(t.curCoords,[{pageX:n.x+e.sx,pageY:n.y+e.sy,clientX:r.x+e.sx,clientY:r.y+e.sy}])}}var a=t("./InteractEvent"),c=t("./Interaction"),l=t("./modifiers/base"),p=t("./utils"),u=t("./utils/raf");c.signals.on("new",function(t){t.inertiaStatus={active:!1,smoothEnd:!1,allowResume:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,lambda_v0:0,one_ve_v0:0,i:null},t.boundInertiaFrame=function(){return i.apply(t)},t.boundSmoothEndFrame=function(){return o.apply(t)}}),c.signals.on("down",function(t){var e=t.interaction,n=t.event,r=t.pointer,i=t.eventTarget,o=e.inertiaStatus;if(o.active)for(var s=i;p.is.element(s);){if(s===e.element){u.cancel(o.i),o.active=!1,e.simulation=null,e.updatePointer(r),p.setCoords(e.curCoords,e.pointers);var d={interaction:e};c.signals.fire("before-action-move",d),c.signals.fire("action-resume",d);var f=new a(e,n,e.prepared.name,"inertiaresume",e.element);e.target.fire(f),e.prevEvent=f,l.resetStatuses(e.modifierStatuses),p.copyCoords(e.prevCoords,e.curCoords);break}s=p.parentNode(s)}}),c.signals.on("up",function(t){var e=t.interaction,n=t.event,i=e.inertiaStatus;if(e.interacting()&&!i.active){var o=e.target,s=o&&o.options,c=s&&e.prepared.name&&s[e.prepared.name].inertia,d=(new Date).getTime(),f={},v=p.extend({},e.curCoords.page),g=e.pointerDelta.client.speed,h=!1,m=void 0,y=c&&c.enabled&&"gesture"!==e.prepared.name&&n!==i.startEvent,x=y&&d-e.curCoords.timeStamp<50&&g>c.minSpeed&&g>c.endSpeed,b={interaction:e,pageCoords:v,statuses:f,preEnd:!0,requireEndOnly:!0};y&&!x&&(l.resetStatuses(f),m=l.setAll(b),m.shouldMove&&m.locked&&(h=!0)),(x||h)&&(p.copyCoords(i.upCoords,e.curCoords),e.pointers[0]=i.startEvent=new a(e,n,e.prepared.name,"inertiastart",e.element),i.t0=d,i.active=!0,i.allowResume=c.allowResume,e.simulation=i,o.fire(i.startEvent),x?(i.vx0=e.pointerDelta.client.vx,i.vy0=e.pointerDelta.client.vy,i.v0=g,r(e,i),p.extend(v,e.curCoords.page),v.x+=i.xe,v.y+=i.ye,l.resetStatuses(f),m=l.setAll(b),i.modifiedXe+=m.dx,i.modifiedYe+=m.dy,i.i=u.request(e.boundInertiaFrame)):(i.smoothEnd=!0,i.xe=m.dx,i.ye=m.dy,i.sx=i.sy=0,i.i=u.request(e.boundSmoothEndFrame)))}}),c.signals.on("stop-active",function(t){var e=t.interaction,n=e.inertiaStatus;n.active&&(u.cancel(n.i),n.active=!1,e.simulation=null)})},{"./InteractEvent":3,"./Interaction":5,"./modifiers/base":23,"./utils":43,"./utils/raf":49}],21:[function(t,e,n){"use strict";function r(t,e){var n=a.interactables.get(t,e);return n||(n=new c(t,e),n.events.global=p),n}var i=t("./utils/browser"),o=t("./utils/events"),s=t("./utils"),a=t("./scope"),c=t("./Interactable"),l=t("./Interaction"),p={};r.isSet=function(t,e){return-1!==a.interactables.indexOfElement(t,e&&e.context)},r.on=function(t,e,n){if(s.is.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),s.is.array(t)){for(var i=0;i<t.length;i++){var l;l=t[i];var u=l;r.on(u,e,n)}return r}if(s.is.object(t)){for(var d in t)r.on(d,t[d],e);return r}return s.contains(c.eventTypes,t)?p[t]?p[t].push(e):p[t]=[e]:o.add(a.document,t,e,{options:n}),r},r.off=function(t,e,n){if(s.is.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),s.is.array(t)){for(var i=0;i<t.length;i++){var l;l=t[i];var u=l;r.off(u,e,n)}return r}if(s.is.object(t)){for(var d in t)r.off(d,t[d],e);return r}if(s.contains(c.eventTypes,t)){var f=void 0;t in p&&-1!==(f=p[t].indexOf(e))&&p[t].splice(f,1)}else o.remove(a.document,t,e,n);return r},r.debug=function(){return a},r.getPointerAverage=s.pointerAverage,r.getTouchBBox=s.touchBBox,r.getTouchDistance=s.touchDistance,r.getTouchAngle=s.touchAngle,r.getElementRect=s.getElementRect,r.getElementClientRect=s.getElementClientRect,r.matchesSelector=s.matchesSelector,r.closest=s.closest,r.supportsTouch=function(){return i.supportsTouch},r.supportsPointerEvent=function(){return i.supportsPointerEvent},r.stop=function(t){for(var e=a.interactions.length-1;e>=0;e--)a.interactions[e].stop(t);return r},r.pointerMoveTolerance=function(t){return s.is.number(t)?(l.pointerMoveTolerance=t,r):l.pointerMoveTolerance},r.addDocument=a.addDocument,r.removeDocument=a.removeDocument,a.interact=r,e.exports=r},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils":43,"./utils/browser":36,"./utils/events":39}],22:[function(t,e,n){"use strict";function r(t){var e=t.interaction,n=t.event;e.target&&e.target.checkAndPreventDefault(n)}var i=t("./Interactable"),o=t("./Interaction"),s=t("./scope"),a=t("./utils/is"),c=t("./utils/events"),l=t("./utils/domUtils"),p=l.nodeContains,u=l.matchesSelector;i.prototype.preventDefault=function(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):a.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault},i.prototype.checkAndPreventDefault=function(t){var e=this.options.preventDefault;if("never"!==e)return"always"===e?void t.preventDefault():void(c.supportsOptions&&/^touch(start|move)$/.test(t.type)||/^(mouse|pointer|touch)*(down|start)/i.test(t.type)||a.element(t.target)&&u(t.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||t.preventDefault())};for(var d=["down","move","up","cancel"],f=0;f<d.length;f++){var v=d[f];o.signals.on(v,r)}o.docEvents.dragstart=function(t){for(var e=0;e<s.interactions.length;e++){var n;n=s.interactions[e];var r=n;if(r.element&&(r.element===t.target||p(r.element,t.target)))return void r.target.checkAndPreventDefault(t)}}},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils/domUtils":38,"./utils/events":39,"./utils/is":45}],23:[function(t,e,n){"use strict";function r(t,e,n){return t&&t.enabled&&(e||!t.endOnly)&&(!n||t.endOnly)}var i=t("../InteractEvent"),o=t("../Interaction"),s=t("../utils/extend"),a={names:[],setOffsets:function(t){var e=t.interaction,n=t.pageCoords,r=e.target,i=e.element,o=e.startOffset,s=r.getRect(i);s?(o.left=n.x-s.left,o.top=n.y-s.top,o.right=s.right-n.x,o.bottom=s.bottom-n.y,"width"in s||(s.width=s.right-s.left),"height"in s||(s.height=s.bottom-s.top)):o.left=o.top=o.right=o.bottom=0,t.rect=s,t.interactable=r,t.element=i;for(var c=0;c<a.names.length;c++){var l;l=a.names[c];var p=l;t.options=r.options[e.prepared.name][p],t.options&&(e.modifierOffsets[p]=a[p].setOffset(t))}},setAll:function(t){var e=t.interaction,n=t.statuses,i=t.preEnd,o=t.requireEndOnly,c={dx:0,dy:0,changed:!1,locked:!1,shouldMove:!0};t.modifiedCoords=s({},t.pageCoords);for(var l=0;l<a.names.length;l++){var p;p=a.names[l];var u=p,d=a[u],f=e.target.options[e.prepared.name][u];r(f,i,o)&&(t.status=t.status=n[u],t.options=f,t.offset=t.interaction.modifierOffsets[u],d.set(t),t.status.locked&&(t.modifiedCoords.x+=t.status.dx,t.modifiedCoords.y+=t.status.dy,c.dx+=t.status.dx,c.dy+=t.status.dy,c.locked=!0))}return c.shouldMove=!t.status||!c.locked||t.status.changed,c},resetStatuses:function(t){for(var e=0;e<a.names.length;e++){var n;n=a.names[e];var r=n,i=t[r]||{};i.dx=i.dy=0,i.modifiedX=i.modifiedY=NaN,i.locked=!1,i.changed=!0,t[r]=i}return t},start:function(t,e){var n=t.interaction,r={interaction:n,pageCoords:("action-resume"===e?n.curCoords:n.startCoords).page,startOffset:n.startOffset,statuses:n.modifierStatuses,preEnd:!1,requireEndOnly:!1};a.setOffsets(r),a.resetStatuses(r.statuses),r.pageCoords=s({},n.startCoords.page),n.modifierResult=a.setAll(r)},beforeMove:function(t){var e=t.interaction,n=t.preEnd,r=t.interactingBeforeMove,i=a.setAll({interaction:e,preEnd:n,pageCoords:e.curCoords.page,statuses:e.modifierStatuses,requireEndOnly:!1});!i.shouldMove&&r&&(e._dontFireMove=!0),e.modifierResult=i},end:function(t){for(var e=t.interaction,n=t.event,i=0;i<a.names.length;i++){var o;o=a.names[i];var s=o;if(r(e.target.options[e.prepared.name][s],!0,!0)){e.doMove({event:n,preEnd:!0});break}}},setXY:function(t){for(var e=t.iEvent,n=t.interaction,r=s({},t),i=0;i<a.names.length;i++){var o=a.names[i];if(r.options=n.target.options[n.prepared.name][o],r.options){var c=a[o];r.status=n.modifierStatuses[o],e[o]=c.modifyCoords(r)}}}};o.signals.on("new",function(t){t.startOffset={left:0,right:0,top:0,bottom:0},t.modifierOffsets={},t.modifierStatuses=a.resetStatuses({}),t.modifierResult=null}),o.signals.on("action-start",a.start),o.signals.on("action-resume",a.start),o.signals.on("before-action-move",a.beforeMove),o.signals.on("action-end",a.end),i.signals.on("set-xy",a.setXY),e.exports=a},{"../InteractEvent":3,"../Interaction":5,"../utils/extend":40}],24:[function(t,e,n){"use strict";function r(t,e,n){return o.is.function(t)?o.resolveRectLike(t,e.target,e.element,[n.x,n.y,e]):o.resolveRectLike(t,e.target,e.element)}var i=t("./base"),o=t("../utils"),s=t("../defaultOptions"),a={defaults:{enabled:!1,endOnly:!1,restriction:null,elementRect:null},setOffset:function(t){var e=t.rect,n=t.startOffset,r=t.options,i=r&&r.elementRect,o={};return e&&i?(o.left=n.left-e.width*i.left,o.top=n.top-e.height*i.top,o.right=n.right-e.width*(1-i.right),o.bottom=n.bottom-e.height*(1-i.bottom)):o.left=o.top=o.right=o.bottom=0,o},set:function(t){var e=t.modifiedCoords,n=t.interaction,i=t.status,s=t.options;if(!s)return i;var a=i.useStatusXY?{x:i.x,y:i.y}:o.extend({},e),c=r(s.restriction,n,a);if(!c)return i;i.dx=0,i.dy=0,i.locked=!1;var l=c,p=a.x,u=a.y,d=n.modifierOffsets.restrict;"x"in c&&"y"in c?(p=Math.max(Math.min(l.x+l.width-d.right,a.x),l.x+d.left),u=Math.max(Math.min(l.y+l.height-d.bottom,a.y),l.y+d.top)):(p=Math.max(Math.min(l.right-d.right,a.x),l.left+d.left),u=Math.max(Math.min(l.bottom-d.bottom,a.y),l.top+d.top)),i.dx=p-a.x,i.dy=u-a.y,i.changed=i.modifiedX!==p||i.modifiedY!==u,i.locked=!(!i.dx&&!i.dy),i.modifiedX=p,i.modifiedY=u},modifyCoords:function(t){var e=t.page,n=t.client,r=t.status,i=t.phase,o=t.options,s=o&&o.elementRect;if(o&&o.enabled&&("start"!==i||!s||!r.locked)&&r.locked)return e.x+=r.dx,e.y+=r.dy,n.x+=r.dx,n.y+=r.dy,{dx:r.dx,dy:r.dy}},getRestrictionRect:r};i.restrict=a,i.names.push("restrict"),s.perAction.restrict=a.defaults,e.exports=a},{"../defaultOptions":18,"../utils":43,"./base":23}],25:[function(t,e,n){"use strict";var r=t("./base"),i=t("../utils"),o=t("../utils/rect"),s=t("../defaultOptions"),a=t("../actions/resize"),c=t("./restrict"),l=c.getRestrictionRect,p={top:1/0,left:1/0,bottom:-1/0,right:-1/0},u={top:-1/0,left:-1/0,bottom:1/0,right:1/0},d={defaults:{enabled:!1,endOnly:!1,min:null,max:null,offset:null},setOffset:function(t){var e=t.interaction,n=t.startOffset,r=t.options;if(!r)return i.extend({},n);var o=l(r.offset,e,e.startCoords.page);return o?{top:n.top+o.y,left:n.left+o.x,bottom:n.bottom+o.y,right:n.right+o.x}:n},set:function(t){var e=t.modifiedCoords,n=t.interaction,r=t.status,s=t.offset,a=t.options,c=n.prepared.linkedEdges||n.prepared.edges;if(n.interacting()&&c){var d=r.useStatusXY?{x:r.x,y:r.y}:i.extend({},e),f=o.xywhToTlbr(l(a.inner,n,d))||p,v=o.xywhToTlbr(l(a.outer,n,d))||u,g=d.x,h=d.y;r.dx=0,r.dy=0,r.locked=!1,c.top?h=Math.min(Math.max(v.top+s.top,d.y),f.top+s.top):c.bottom&&(h=Math.max(Math.min(v.bottom-s.bottom,d.y),f.bottom-s.bottom)),c.left?g=Math.min(Math.max(v.left+s.left,d.x),f.left+s.left):c.right&&(g=Math.max(Math.min(v.right-s.right,d.x),f.right-s.right)),r.dx=g-d.x,r.dy=h-d.y,r.changed=r.modifiedX!==g||r.modifiedY!==h,r.locked=!(!r.dx&&!r.dy),r.modifiedX=g,r.modifiedY=h}},modifyCoords:function(t){var e=t.page,n=t.client,r=t.status,i=t.phase,o=t.options;if(o&&o.enabled&&("start"!==i||!r.locked)&&r.locked)return e.x+=r.dx,e.y+=r.dy,n.x+=r.dx,n.y+=r.dy,{dx:r.dx,dy:r.dy}},noInner:p,noOuter:u,getRestrictionRect:l};r.restrictEdges=d,r.names.push("restrictEdges"),s.perAction.restrictEdges=d.defaults,a.defaults.restrictEdges=d.defaults,e.exports=d},{"../actions/resize":10,"../defaultOptions":18,"../utils":43,"../utils/rect":50,"./base":23,"./restrict":24}],26:[function(t,e,n){"use strict";var r=t("./base"),i=t("./restrictEdges"),o=t("../utils"),s=t("../utils/rect"),a=t("../defaultOptions"),c=t("../actions/resize"),l={width:-1/0,height:-1/0},p={width:1/0,height:1/0},u={defaults:{enabled:!1,endOnly:!1,min:null,max:null},setOffset:function(t){return t.interaction.startOffset},set:function(t){var e=t.interaction,n=t.options,r=e.prepared.linkedEdges||e.prepared.edges;if(e.interacting()&&r){var a=s.xywhToTlbr(e.resizeRects.inverted),c=s.tlbrToXywh(i.getRestrictionRect(n.min,e))||l,u=s.tlbrToXywh(i.getRestrictionRect(n.max,e))||p;t.options={enabled:n.enabled,endOnly:n.endOnly,inner:o.extend({},i.noInner),outer:o.extend({},i.noOuter)},r.top?(t.options.inner.top=a.bottom-c.height,t.options.outer.top=a.bottom-u.height):r.bottom&&(t.options.inner.bottom=a.top+c.height,t.options.outer.bottom=a.top+u.height),r.left?(t.options.inner.left=a.right-c.width,t.options.outer.left=a.right-u.width):r.right&&(t.options.inner.right=a.left+c.width,t.options.outer.right=a.left+u.width),i.set(t)}},modifyCoords:i.modifyCoords};r.restrictSize=u,r.names.push("restrictSize"),a.perAction.restrictSize=u.defaults,c.defaults.restrictSize=u.defaults,e.exports=u},{"../actions/resize":10,"../defaultOptions":18,"../utils":43,"../utils/rect":50,"./base":23,"./restrictEdges":25}],27:[function(t,e,n){"use strict";var r=t("./base"),i=t("../interact"),o=t("../utils"),s=t("../defaultOptions"),a={defaults:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},setOffset:function(t){var e=t.interaction,n=t.interactable,r=t.element,i=t.rect,s=t.startOffset,a=t.options,c=[],l=o.rectToXY(o.resolveRectLike(a.origin)),p=l||o.getOriginXY(n,r,e.prepared.name);a=a||n.options[e.prepared.name].snap||{};var u=void 0;if("startCoords"===a.offset)u={x:e.startCoords.page.x-p.x,y:e.startCoords.page.y-p.y};else{var d=o.resolveRectLike(a.offset,n,r,[e]);u=o.rectToXY(d)||{x:0,y:0}}if(i&&a.relativePoints&&a.relativePoints.length)for(var f=0;f<a.relativePoints.length;f++){var v;v=a.relativePoints[f];var g=v,h=g.x,m=g.y;c.push({x:s.left-i.width*h+u.x,y:s.top-i.height*m+u.y})}else c.push(u);return c},set:function(t){var e=t.interaction,n=t.modifiedCoords,r=t.status,i=t.options,s=t.offset,a=[],c=void 0,l=void 0,p=void 0;if(r.useStatusXY)l={x:r.x,y:r.y};else{var u=o.getOriginXY(e.target,e.element,e.prepared.name);l=o.extend({},n),l.x-=u.x,l.y-=u.y}r.realX=l.x,r.realY=l.y;for(var d=i.targets?i.targets.length:0,f=0;f<s.length;f++){var v;v=s[f];for(var g=v,h=g.x,m=g.y,y=l.x-h,x=l.y-m,b=0;b<i.targets.length;b++){var w;w=i.targets[b];var E=w;c=o.is.function(E)?E(y,x,e):E,c&&a.push({x:o.is.number(c.x)?c.x+h:y,y:o.is.number(c.y)?c.y+m:x,range:o.is.number(c.range)?c.range:i.range})}}var T={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(p=0,d=a.length;p<d;p++){c=a[p];var S=c.range,C=c.x-l.x,D=c.y-l.y,I=o.hypot(C,D),O=I<=S;S===1/0&&T.inRange&&T.range!==1/0&&(O=!1),T.target&&!(O?T.inRange&&S!==1/0?I/S<T.distance/T.range:S===1/0&&T.range!==1/0||I<T.distance:!T.inRange&&I<T.distance)||(T.target=c,T.distance=I,T.range=S,T.inRange=O,T.dx=C,T.dy=D,r.range=S)}var M=void 0;T.target?(M=r.modifiedX!==T.target.x||r.modifiedY!==T.target.y,r.modifiedX=T.target.x,r.modifiedY=T.target.y):(M=!0,r.modifiedX=NaN,r.modifiedY=NaN),r.dx=T.dx,r.dy=T.dy,r.changed=M||T.inRange&&!r.locked,r.locked=T.inRange},modifyCoords:function(t){var e=t.page,n=t.client,r=t.status,i=t.phase,o=t.options,s=o&&o.relativePoints;if(o&&o.enabled&&("start"!==i||!s||!s.length))return r.locked&&(e.x+=r.dx,e.y+=r.dy,n.x+=r.dx,n.y+=r.dy),{range:r.range,locked:r.locked,x:r.modifiedX,y:r.modifiedY,realX:r.realX,realY:r.realY,dx:r.dx,dy:r.dy}}};i.createSnapGrid=function(t){return function(e,n){var r=t.limits||{left:-1/0,right:1/0,top:-1/0,bottom:1/0},i=0,s=0;o.is.object(t.offset)&&(i=t.offset.x,s=t.offset.y);var a=Math.round((e-i)/t.x),c=Math.round((n-s)/t.y);return{x:Math.max(r.left,Math.min(r.right,a*t.x+i)),y:Math.max(r.top,Math.min(r.bottom,c*t.y+s)),range:t.range}}},r.snap=a,r.names.push("snap"),s.perAction.snap=a.defaults,e.exports=a},{"../defaultOptions":18,"../interact":21,"../utils":43,"./base":23}],28:[function(t,e,n){"use strict";var r=t("./base"),i=t("./snap"),o=t("../defaultOptions"),s=t("../actions/resize"),a=t("../utils/"),c={defaults:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null},setOffset:function(t){var e=t.interaction,n=t.options,r=e.prepared.edges;if(r){t.options={relativePoints:[{x:r.left?0:1,y:r.top?0:1}],origin:{x:0,y:0},offset:"self",range:n.range};var o=i.setOffset(t);return t.options=n,o}},set:function(t){var e=t.interaction,n=t.options,r=t.offset,o=t.modifiedCoords,s=a.extend({},o),c=s.x-r[0].x,l=s.y-r[0].y;t.options=a.extend({},n),t.options.targets=[];for(var p=0;p<n.targets.length;p++){var u;u=n.targets[p];var d=u,f=void 0;f=a.is.function(d)?d(c,l,e):d,f&&("width"in f&&"height"in f&&(f.x=f.width,f.y=f.height),t.options.targets.push(f))}i.set(t)},modifyCoords:function(t){var e=t.options;t.options=a.extend({},e),t.options.enabled=e.enabled,t.options.relativePoints=[null],i.modifyCoords(t)}};r.snapSize=c,r.names.push("snapSize"),o.perAction.snapSize=c.defaults,s.defaults.snapSize=c.defaults,e.exports=c},{"../actions/resize":10,"../defaultOptions":18,"../utils/":43,"./base":23,"./snap":27}],29:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=t("../utils/pointerUtils");e.exports=function(){function t(e,n,o,s,a){if(r(this,t),i.pointerExtend(this,o),o!==n&&i.pointerExtend(this,n),this.interaction=a,this.timeStamp=(new Date).getTime(),this.originalEvent=o,this.type=e,this.pointerId=i.getPointerId(n),this.pointerType=i.getPointerType(n),this.target=s,this.currentTarget=null,"tap"===e){var c=a.getPointerIndex(n);this.dt=this.timeStamp-a.downTimes[c];var l=this.timeStamp-a.tapTime;this.double=!!(a.prevTap&&"doubletap"!==a.prevTap.type&&a.prevTap.target===this.target&&l<500)}else"doubletap"===e&&(this.dt=n.timeStamp-a.tapTime)}return t.prototype.subtractOrigin=function(t){var e=t.x,n=t.y;return this.pageX-=e,this.pageY-=n,this.clientX-=e,this.clientY-=n,this},t.prototype.addOrigin=function(t){var e=t.x,n=t.y;return this.pageX+=e,this.pageY+=n,this.clientX+=e,this.clientY+=n,this},t.prototype.preventDefault=function(){this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t}()},{"../utils/pointerUtils":48}],30:[function(t,e,n){"use strict";function r(t){for(var e=t.interaction,n=t.pointer,s=t.event,c=t.eventTarget,p=t.type,u=void 0===p?t.pointerEvent.type:p,d=t.targets,f=void 0===d?i(t):d,v=t.pointerEvent,g=void 0===v?new o(u,n,s,c,e):v,h={interaction:e,pointer:n,event:s,eventTarget:c,targets:f,type:u,pointerEvent:g},m=0;m<f.length;m++){var y=f[m];for(var x in y.props||{})g[x]=y.props[x];var b=a.getOriginXY(y.eventable,y.element);if(g.subtractOrigin(b),g.eventable=y.eventable,g.currentTarget=y.element,y.eventable.fire(g),g.addOrigin(b),g.immediatePropagationStopped||g.propagationStopped&&m+1<f.length&&f[m+1].element!==g.currentTarget)break}if(l.fire("fired",h),"tap"===u){var w=g.double?r({interaction:e,pointer:n,event:s,eventTarget:c,type:"doubletap"}):g;e.prevTap=w,e.tapTime=w.timeStamp}return g}function i(t){var e=t.interaction,n=t.pointer,r=t.event,i=t.eventTarget,o=t.type,s=e.getPointerIndex(n);if("tap"===o&&(e.pointerWasMoved||!e.downTargets[s]||e.downTargets[s]!==i))return[];for(var c=a.getPath(i),p={interaction:e,pointer:n,event:r,eventTarget:i,type:o,path:c,targets:[],element:null},u=0;u<c.length;u++){var d;d=c[u];var f=d;p.element=f,l.fire("collect-targets",p)}return"hold"===o&&(p.targets=p.targets.filter(function(t){return t.eventable.options.holdDuration===e.holdTimers[s].duration})),p.targets}var o=t("./PointerEvent"),s=t("../Interaction"),a=t("../utils"),c=t("../defaultOptions"),l=t("../utils/Signals").new(),p=["down","up","cancel"],u=["down","up","cancel"],d={PointerEvent:o,fire:r,collectEventTargets:i,signals:l,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:["down","move","up","cancel","tap","doubletap","hold"]};s.signals.on("update-pointer-down",function(t){var e=t.interaction,n=t.pointerIndex;e.holdTimers[n]={duration:1/0,timeout:null}}),s.signals.on("remove-pointer",function(t){var e=t.interaction,n=t.pointerIndex;e.holdTimers.splice(n,1)}),s.signals.on("move",function(t){
var e=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget,s=t.duplicateMove,a=e.getPointerIndex(n);s||e.pointerIsDown&&!e.pointerWasMoved||(e.pointerIsDown&&clearTimeout(e.holdTimers[a].timeout),r({interaction:e,pointer:n,event:i,eventTarget:o,type:"move"}))}),s.signals.on("down",function(t){for(var e=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget,s=t.pointerIndex,c=e.holdTimers[s],p=a.getPath(o),u={interaction:e,pointer:n,event:i,eventTarget:o,type:"hold",targets:[],path:p,element:null},d=0;d<p.length;d++){var f;f=p[d];var v=f;u.element=v,l.fire("collect-targets",u)}if(u.targets.length){for(var g=1/0,h=0;h<u.targets.length;h++){var m;m=u.targets[h];var y=m,x=y.eventable.options.holdDuration;x<g&&(g=x)}c.duration=g,c.timeout=setTimeout(function(){r({interaction:e,eventTarget:o,pointer:n,event:i,type:"hold"})},g)}}),s.signals.on("up",function(t){var e=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget;e.pointerWasMoved||r({interaction:e,eventTarget:o,pointer:n,event:i,type:"tap"})});for(var f=["up","cancel"],v=0;v<f.length;v++){var g=f[v];s.signals.on(g,function(t){var e=t.interaction,n=t.pointerIndex;e.holdTimers[n]&&clearTimeout(e.holdTimers[n].timeout)})}for(var h=0;h<p.length;h++)s.signals.on(p[h],function(t){return function(e){var n=e.interaction,i=e.pointer,o=e.event;r({interaction:n,eventTarget:e.eventTarget,pointer:i,event:o,type:t})}}(u[h]));s.signals.on("new",function(t){t.prevTap=null,t.tapTime=0,t.holdTimers=[]}),c.pointerEvents=d.defaults,e.exports=d},{"../Interaction":5,"../defaultOptions":18,"../utils":43,"../utils/Signals":34,"./PointerEvent":29}],31:[function(t,e,n){"use strict";function r(t){var e=t.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)}function i(t){var e=t.interaction,n=t.pointerEvent,r=t.eventTarget,i=t.targets;if("hold"===n.type&&i.length){var o=i[0].eventable.options.holdRepeatInterval;o<=0||(e.holdIntervalHandle=setTimeout(function(){s.fire({interaction:e,eventTarget:r,type:"hold",pointer:n,event:n})},o))}}function o(t){var e=t.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}var s=t("./base"),a=t("../Interaction");s.signals.on("new",r),s.signals.on("fired",i);for(var c=["move","up","cancel","endall"],l=0;l<c.length;l++){var p=c[l];a.signals.on(p,o)}s.defaults.holdRepeatInterval=0,s.types.push("holdrepeat"),e.exports={onNew:r,onFired:i,endHoldRepeat:o}},{"../Interaction":5,"./base":30}],32:[function(t,e,n){"use strict";var r=t("./base"),i=t("../Interactable"),o=t("../utils/is"),s=t("../scope"),a=t("../utils/extend"),c=t("../utils/arr"),l=c.merge;r.signals.on("collect-targets",function(t){var e=t.targets,n=t.element,r=t.type,i=t.eventTarget;s.interactables.forEachMatch(n,function(t){var s=t.events,a=s.options;s[r]&&o.element(n)&&t.testIgnoreAllow(a,n,i)&&e.push({element:n,eventable:s,props:{interactable:t}})})}),i.signals.on("new",function(t){var e=t.interactable;e.events.getRect=function(t){return e.getRect(t)}}),i.signals.on("set",function(t){var e=t.interactable,n=t.options;a(e.events.options,r.defaults),a(e.events.options,n)}),l(i.eventTypes,r.types),i.prototype.pointerEvents=function(t){return a(this.events.options,t),this};var p=i.prototype._backCompatOption;i.prototype._backCompatOption=function(t,e){var n=p.call(this,t,e);return n===this&&(this.events.options[t]=e),n},i.settingsMethods.push("pointerEvents")},{"../Interactable":4,"../scope":33,"../utils/arr":35,"../utils/extend":40,"../utils/is":45,"./base":30}],33:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./utils/events"),o=t("./utils/Signals").new(),s=t("./utils/window"),a=s.getWindow,c={signals:o,events:i,utils:r,document:t("./utils/domObjects").document,documents:[],addDocument:function(t,e){if(r.contains(c.documents,t))return!1;e=e||a(t),c.documents.push(t),i.documents.push(t),t!==c.document&&i.add(e,"unload",c.onWindowUnload),o.fire("add-document",{doc:t,win:e})},removeDocument:function(t,e){var n=c.documents.indexOf(t);e=e||a(t),i.remove(e,"unload",c.onWindowUnload),c.documents.splice(n,1),i.documents.splice(n,1),o.fire("remove-document",{win:e,doc:t})},onWindowUnload:function(){c.removeDocument(this.document,this)}};e.exports=c},{"./utils":43,"./utils/Signals":34,"./utils/domObjects":37,"./utils/events":39,"./utils/window":51}],34:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(){r(this,t),this.listeners={}}return t.prototype.on=function(t,e){if(!this.listeners[t])return void(this.listeners[t]=[e]);this.listeners[t].push(e)},t.prototype.off=function(t,e){if(this.listeners[t]){var n=this.listeners[t].indexOf(e);-1!==n&&this.listeners[t].splice(n,1)}},t.prototype.fire=function(t,e){var n=this.listeners[t];if(n)for(var r=0;r<n.length;r++){var i;i=n[r];var o=i;if(!1===o(e,t))return}},t}();i.new=function(){return new i},e.exports=i},{}],35:[function(t,e,n){"use strict";function r(t,e){return-1!==t.indexOf(e)}function i(t,e){for(var n=0;n<e.length;n++){var r;r=e[n];var i=r;t.push(i)}return t}e.exports={contains:r,merge:i}},{}],36:[function(t,e,n){"use strict";var r=t("./window"),i=r.window,o=t("./is"),s=t("./domObjects"),a=s.Element,c=i.navigator,l={supportsTouch:!!("ontouchstart"in i||o.function(i.DocumentTouch)&&s.document instanceof i.DocumentTouch),supportsPointerEvent:!!s.PointerEvent,isIOS7:/iP(hone|od|ad)/.test(c.platform)&&/OS 7[^\d]/.test(c.appVersion),isIe9:/MSIE 9/.test(c.userAgent),prefixedMatchesSelector:"matches"in a.prototype?"matches":"webkitMatchesSelector"in a.prototype?"webkitMatchesSelector":"mozMatchesSelector"in a.prototype?"mozMatchesSelector":"oMatchesSelector"in a.prototype?"oMatchesSelector":"msMatchesSelector",pEventTypes:s.PointerEvent?s.PointerEvent===i.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,wheelEvent:"onmousewheel"in s.document?"mousewheel":"wheel"};l.isOperaMobile="Opera"===c.appName&&l.supportsTouch&&c.userAgent.match("Presto"),e.exports=l},{"./domObjects":37,"./is":45,"./window":51}],37:[function(t,e,n){"use strict";function r(){}var i={},o=t("./window").window;i.document=o.document,i.DocumentFragment=o.DocumentFragment||r,i.SVGElement=o.SVGElement||r,i.SVGSVGElement=o.SVGSVGElement||r,i.SVGElementInstance=o.SVGElementInstance||r,i.Element=o.Element||r,i.HTMLElement=o.HTMLElement||i.Element,i.Event=o.Event,i.Touch=o.Touch||r,i.PointerEvent=o.PointerEvent||o.MSPointerEvent,e.exports=i},{"./window":51}],38:[function(t,e,n){"use strict";var r=t("./window"),i=t("./browser"),o=t("./is"),s=t("./domObjects"),a={nodeContains:function(t,e){for(;e;){if(e===t)return!0;e=e.parentNode}return!1},closest:function(t,e){for(;o.element(t);){if(a.matchesSelector(t,e))return t;t=a.parentNode(t)}return null},parentNode:function(t){var e=t.parentNode;if(o.docFrag(e)){for(;(e=e.host)&&o.docFrag(e););return e}return e},matchesSelector:function(t,e){return r.window!==r.realWindow&&(e=e.replace(/\/deep\//g," ")),t[i.prefixedMatchesSelector](e)},indexOfDeepestElement:function(t){var e=[],n=[],r=void 0,i=t[0],o=i?0:-1,a=void 0,c=void 0,l=void 0,p=void 0;for(l=1;l<t.length;l++)if((r=t[l])&&r!==i)if(i){if(r.parentNode!==r.ownerDocument)if(i.parentNode!==r.ownerDocument){if(!e.length)for(a=i;a.parentNode&&a.parentNode!==a.ownerDocument;)e.unshift(a),a=a.parentNode;if(i instanceof s.HTMLElement&&r instanceof s.SVGElement&&!(r instanceof s.SVGSVGElement)){if(r===i.parentNode)continue;a=r.ownerSVGElement}else a=r;for(n=[];a.parentNode!==a.ownerDocument;)n.unshift(a),a=a.parentNode;for(p=0;n[p]&&n[p]===e[p];)p++;var u=[n[p-1],n[p],e[p]];for(c=u[0].lastChild;c;){if(c===u[1]){i=r,o=l,e=[];break}if(c===u[2])break;c=c.previousSibling}}else i=r,o=l}else i=r,o=l;return o},matchesUpTo:function(t,e,n){for(;o.element(t);){if(a.matchesSelector(t,e))return!0;if((t=a.parentNode(t))===n)return a.matchesSelector(t,e)}return!1},getActualElement:function(t){return t instanceof s.SVGElementInstance?t.correspondingUseElement:t},getScrollXY:function(t){return t=t||r.window,{x:t.scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}},getElementClientRect:function(t){var e=t instanceof s.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}},getElementRect:function(t){var e=a.getElementClientRect(t);if(!i.isIOS7&&e){var n=a.getScrollXY(r.getWindow(t));e.left+=n.x,e.right+=n.x,e.top+=n.y,e.bottom+=n.y}return e},getPath:function(t){for(var e=[];t;)e.push(t),t=a.parentNode(t);return e},trySelector:function(t){return!!o.string(t)&&(s.document.querySelector(t),!0)}};e.exports=a},{"./browser":36,"./domObjects":37,"./is":45,"./window":51}],39:[function(t,e,n){"use strict";function r(t,e,n,r){var i=p(r),o=x.indexOf(t),s=b[o];s||(s={events:{},typeCount:0},o=x.push(t)-1,b.push(s)),s.events[e]||(s.events[e]=[],s.typeCount++),y(s.events[e],n)||(t.addEventListener(e,n,T?i:!!i.capture),s.events[e].push(n))}function i(t,e,n,r){var o=p(r),s=x.indexOf(t),a=b[s];if(a&&a.events)if("all"!==e){if(a.events[e]){var c=a.events[e].length;if("all"===n){for(var l=0;l<c;l++)i(t,e,a.events[e][l],o);return}for(var u=0;u<c;u++)if(a.events[e][u]===n){t.removeEventListener("on"+e,n,T?o:!!o.capture),a.events[e].splice(u,1);break}a.events[e]&&0===a.events[e].length&&(a.events[e]=null,a.typeCount--)}a.typeCount||(b.splice(s,1),x.splice(s,1))}else for(e in a.events)a.events.hasOwnProperty(e)&&i(t,e,"all")}function o(t,e,n,i,o){var s=p(o);if(!w[n]){w[n]={selectors:[],contexts:[],listeners:[]};for(var l=0;l<E.length;l++){var u=E[l];r(u,n,a),r(u,n,c,!0)}}var d=w[n],f=void 0;for(f=d.selectors.length-1;f>=0&&(d.selectors[f]!==t||d.contexts[f]!==e);f--);-1===f&&(f=d.selectors.length,d.selectors.push(t),d.contexts.push(e),d.listeners.push([])),d.listeners[f].push([i,!!s.capture,s.passive])}function s(t,e,n,r,o){var s=p(o),l=w[n],u=!1,d=void 0;if(l)for(d=l.selectors.length-1;d>=0;d--)if(l.selectors[d]===t&&l.contexts[d]===e){for(var f=l.listeners[d],v=f.length-1;v>=0;v--){var g=f[v],h=g[0],m=g[1],y=g[2];if(h===r&&m===!!s.capture&&y===s.passive){f.splice(v,1),f.length||(l.selectors.splice(d,1),l.contexts.splice(d,1),l.listeners.splice(d,1),i(e,n,a),i(e,n,c,!0),l.selectors.length||(w[n]=null)),u=!0;break}}if(u)break}}function a(t,e){var n=p(e),r={},i=w[t.type],o=f.getEventTargets(t),s=o[0],a=s;for(v(r,t),r.originalEvent=t,r.preventDefault=l;u.element(a);){for(var c=0;c<i.selectors.length;c++){var g=i.selectors[c],h=i.contexts[c];if(d.matchesSelector(a,g)&&d.nodeContains(h,s)&&d.nodeContains(h,a)){var m=i.listeners[c];r.currentTarget=a;for(var y=0;y<m.length;y++){var x=m[y],b=x[0],E=x[1],T=x[2];E===!!n.capture&&T===n.passive&&b(r)}}}a=d.parentNode(a)}}function c(t){return a.call(this,t,!0)}function l(){this.originalEvent.preventDefault()}function p(t){return u.object(t)?t:{capture:t}}var u=t("./is"),d=t("./domUtils"),f=t("./pointerUtils"),v=t("./pointerExtend"),g=t("./window"),h=g.window,m=t("./arr"),y=m.contains,x=[],b=[],w={},E=[],T=function(){var t=!1;return h.document.createElement("div").addEventListener("test",null,{get capture(){t=!0}}),t}();e.exports={add:r,remove:i,addDelegate:o,removeDelegate:s,delegateListener:a,delegateUseCapture:c,delegatedEvents:w,documents:E,supportsOptions:T,_elements:x,_targets:b}},{"./arr":35,"./domUtils":38,"./is":45,"./pointerExtend":47,"./pointerUtils":48,"./window":51}],40:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n in e)t[n]=e[n];return t}},{}],41:[function(t,e,n){"use strict";var r=t("./rect"),i=r.resolveRectLike,o=r.rectToXY;e.exports=function(t,e,n){var r=t.options[n],s=r&&r.origin,a=s||t.options.origin,c=i(a,t,e,[t&&e]);return o(c)||{x:0,y:0}}},{"./rect":50}],42:[function(t,e,n){"use strict";e.exports=function(t,e){return Math.sqrt(t*t+e*e)}},{}],43:[function(t,e,n){"use strict";var r=t("./extend"),i=t("./window"),o={warnOnce:function(t,e){var n=!1;return function(){return n||(i.window.console.warn(e),n=!0),t.apply(this,arguments)}},_getQBezierValue:function(t,e,n,r){var i=1-t;return i*i*e+2*i*t*n+t*t*r},getQuadraticCurvePoint:function(t,e,n,r,i,s,a){return{x:o._getQBezierValue(a,t,n,i),y:o._getQBezierValue(a,e,r,s)}},easeOutQuad:function(t,e,n,r){return t/=r,-n*t*(t-2)+e},copyAction:function(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t},is:t("./is"),extend:r,hypot:t("./hypot"),getOriginXY:t("./getOriginXY")};r(o,t("./arr")),r(o,t("./domUtils")),r(o,t("./pointerUtils")),r(o,t("./rect")),e.exports=o},{"./arr":35,"./domUtils":38,"./extend":40,"./getOriginXY":41,"./hypot":42,"./is":45,"./pointerUtils":48,"./rect":50,"./window":51}],44:[function(t,e,n){"use strict";var r=t("../scope"),i=t("./index"),o={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(t,e,n){for(var r=i.getPointerType(t),s=i.getPointerId(t),a={pointer:t,pointerId:s,pointerType:r,eventType:e,eventTarget:n},c=0;c<o.methodOrder.length;c++){var l;l=o.methodOrder[c];var p=l,u=o[p](a);if(u)return u}},simulationResume:function(t){var e=t.pointerType,n=t.eventType,o=t.eventTarget;if(!/down|start/i.test(n))return null;for(var s=0;s<r.interactions.length;s++){var a;a=r.interactions[s];var c=a,l=o;if(c.simulation&&c.simulation.allowResume&&c.pointerType===e)for(;l;){if(l===c.element)return c;l=i.parentNode(l)}}return null},mouseOrPen:function(t){var e=t.pointerId,n=t.pointerType,o=t.eventType;if("mouse"!==n&&"pen"!==n)return null;for(var s=void 0,a=0;a<r.interactions.length;a++){var c;c=r.interactions[a];var l=c;if(l.pointerType===n){if(l.simulation&&!i.contains(l.pointerIds,e))continue;if(l.interacting())return l;s||(s=l)}}if(s)return s;for(var p=0;p<r.interactions.length;p++){var u;u=r.interactions[p];var d=u;if(!(d.pointerType!==n||/down/i.test(o)&&d.simulation))return d}return null},hasPointer:function(t){for(var e=t.pointerId,n=0;n<r.interactions.length;n++){var o;o=r.interactions[n];var s=o;if(i.contains(s.pointerIds,e))return s}},idle:function(t){for(var e=t.pointerType,n=0;n<r.interactions.length;n++){var i;i=r.interactions[n];var o=i;if(1===o.pointerIds.length){var s=o.target;if(s&&!s.options.gesture.enabled)continue}else if(o.pointerIds.length>=2)continue;if(!o.interacting()&&e===o.pointerType)return o}return null}};e.exports=o},{"../scope":33,"./index":43}],45:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=t("./window"),o=t("./isWindow"),s={array:function(){},window:function(t){return t===i.window||o(t)},docFrag:function(t){return s.object(t)&&11===t.nodeType},object:function(t){return!!t&&"object"===(void 0===t?"undefined":r(t))},function:function(t){return"function"==typeof t},number:function(t){return"number"==typeof t},bool:function(t){return"boolean"==typeof t},string:function(t){return"string"==typeof t},element:function(t){if(!t||"object"!==(void 0===t?"undefined":r(t)))return!1;var e=i.getWindow(t)||i.window;return/object|function/.test(r(e.Element))?t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName}};s.array=function(t){return s.object(t)&&void 0!==t.length&&s.function(t.splice)},e.exports=s},{"./isWindow":46,"./window":51}],46:[function(t,e,n){"use strict";e.exports=function(t){return!(!t||!t.Window)&&t instanceof t.Window}},{}],47:[function(t,e,n){"use strict";function r(t,n){for(var r in n){var i=e.exports.prefixedPropREs,o=!1;for(var s in i)if(0===r.indexOf(s)&&i[s].test(r)){o=!0;break}o||"function"==typeof n[r]||(t[r]=n[r])}return t}r.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/},e.exports=r},{}],48:[function(t,e,n){"use strict";var r=t("./hypot"),i=t("./browser"),o=t("./domObjects"),s=t("./domUtils"),a=t("./domObjects"),c=t("./is"),l=t("./pointerExtend"),p={copyCoords:function(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp},setCoordDeltas:function(t,e,n){t.page.x=n.page.x-e.page.x,t.page.y=n.page.y-e.page.y,t.client.x=n.client.x-e.client.x,t.client.y=n.client.y-e.client.y,t.timeStamp=n.timeStamp-e.timeStamp;var i=Math.max(t.timeStamp/1e3,.001);t.page.speed=r(t.page.x,t.page.y)/i,t.page.vx=t.page.x/i,t.page.vy=t.page.y/i,t.client.speed=r(t.client.x,t.page.y)/i,t.client.vx=t.client.x/i,t.client.vy=t.client.y/i},isNativePointer:function(t){return t instanceof o.Event||t instanceof o.Touch},getXY:function(t,e,n){return n=n||{},t=t||"page",n.x=e[t+"X"],n.y=e[t+"Y"],n},getPageXY:function(t,e){return e=e||{},i.isOperaMobile&&p.isNativePointer(t)?(p.getXY("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):p.getXY("page",t,e),e},getClientXY:function(t,e){return e=e||{},i.isOperaMobile&&p.isNativePointer(t)?p.getXY("screen",t,e):p.getXY("client",t,e),e},getPointerId:function(t){return c.number(t.pointerId)?t.pointerId:t.identifier},setCoords:function(t,e,n){var r=e.length>1?p.pointerAverage(e):e[0],i={};p.getPageXY(r,i),t.page.x=i.x,t.page.y=i.y,p.getClientXY(r,i),t.client.x=i.x,t.client.y=i.y,t.timeStamp=c.number(n)?n:(new Date).getTime()},pointerExtend:l,getTouchPair:function(t){var e=[];return c.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e},pointerAverage:function(t){for(var e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<t.length;n++){var r;r=t[n];var i=r;for(var o in e)e[o]+=i[o]}for(var s in e)e[s]/=t.length;return e},touchBBox:function(t){if(t.length||t.touches&&t.touches.length>1){var e=p.getTouchPair(t),n=Math.min(e[0].pageX,e[1].pageX),r=Math.min(e[0].pageY,e[1].pageY);return{x:n,y:r,left:n,top:r,width:Math.max(e[0].pageX,e[1].pageX)-n,height:Math.max(e[0].pageY,e[1].pageY)-r}}},touchDistance:function(t,e){var n=e+"X",i=e+"Y",o=p.getTouchPair(t),s=o[0][n]-o[1][n],a=o[0][i]-o[1][i];return r(s,a)},touchAngle:function(t,e,n){var r=n+"X",i=n+"Y",o=p.getTouchPair(t),s=o[1][r]-o[0][r],a=o[1][i]-o[0][i];return 180*Math.atan2(a,s)/Math.PI},getPointerType:function(t){return c.string(t.pointerType)?t.pointerType:c.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type)||t instanceof a.Touch?"touch":"mouse"},getEventTargets:function(t){var e=c.function(t.composedPath)?t.composedPath():t.path;return[s.getActualElement(e?e[0]:t.target),s.getActualElement(t.currentTarget)]}};e.exports=p},{"./browser":36,"./domObjects":37,"./domUtils":38,"./hypot":42,"./is":45,"./pointerExtend":47}],49:[function(t,e,n){"use strict";for(var r=t("./window"),i=r.window,o=["ms","moz","webkit","o"],s=0,a=void 0,c=void 0,l=0;l<o.length&&!i.requestAnimationFrame;l++)a=i[o[l]+"RequestAnimationFrame"],c=i[o[l]+"CancelAnimationFrame"]||i[o[l]+"CancelRequestAnimationFrame"];a||(a=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-s)),r=setTimeout(function(){t(e+n)},n);return s=e+n,r}),c||(c=function(t){clearTimeout(t)}),e.exports={request:a,cancel:c}},{"./window":51}],50:[function(t,e,n){"use strict";var r=t("./extend"),i=t("./is"),o=t("./domUtils"),s=o.closest,a=o.parentNode,c=o.getElementRect,l={getStringOptionResult:function(t,e,n){return i.string(t)?t="parent"===t?a(n):"self"===t?e.getRect(n):s(n,t):null},resolveRectLike:function(t,e,n,r){return t=l.getStringOptionResult(t,e,n)||t,i.function(t)&&(t=t.apply(null,r)),i.element(t)&&(t=c(t)),t},rectToXY:function(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}},xywhToTlbr:function(t){return!t||"left"in t&&"top"in t||(t=r({},t),t.left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t},tlbrToXywh:function(t){return!t||"x"in t&&"y"in t||(t=r({},t),t.x=t.left||0,t.top=t.top||0,t.width=t.width||t.right-t.x,t.height=t.height||t.bottom-t.y),t}};e.exports=l},{"./domUtils":38,"./extend":40,"./is":45}],51:[function(t,e,n){"use strict";function r(t){i.realWindow=t;var e=t.document.createTextNode("");e.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(e)===e&&(t=t.wrap(t)),i.window=t}var i=e.exports,o=t("./isWindow");"undefined"==typeof window?(i.window=void 0,i.realWindow=void 0):r(window),i.getWindow=function(t){if(o(t))return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i.window},i.init=r},{"./isWindow":46}]},{},[1])(1)});

//# sourceMappingURL=interact.min.js.map

// --- global variables

var pages = $('.page');
var criticPopup = $('#critic');

// --- GENERAL FUNCTIONS

function makeId() {
	var randLetter = String.fromCharCode(65 + Math.floor(Math.random() * 26));
	var id = randLetter + Date.now();
	return id; 
}

function errorSound() {
	var audio = new Audio('assets/audio/incorrect.swf.mp3');
	audio.play();
}

// --- M-V-C

var model = {
	// all our states
	timeLeft: 100000,
	expired: false,
	images: []
};

function controller(model, page, input) {

	// expired?
	if (model.timeLeft > 0) {
		showTime(model);
	}
	else {
		model.expired = true;
		showExpired(model);
		noDrag();
	}
  
	if ( input && input[1].includes("data:image") && input[3] == true && model.expired == false) { // new element
		// update the model
		model.images.push(input);
		// drop file
		dropFile(page, input[1], input[0]);
		// add bonus time
		addtime(10000);
		// critic speak
		critic();
	} else if ( input && !input[1].includes("data:image") && model.expired == false) { // not an image
		notAnImage();
	} else if (input && input[3] == false && model.expired == false) { // deleting an element
		removeElement(input[0]);
	} else if (input && model.expired == true) { // too late
		LateDropFile();
	}
}


// --- CONTROLLER

var x = setInterval(function() {
	model.timeLeft = model.timeLeft - 10;
	controller(model);
}, 10);

function addtime(bonusTime) {
	model.timeLeft = model.timeLeft + bonusTime;
}

// dropFile

pages.on("dragover", function(e) {
	e.preventDefault();
  $(this).addClass('dragover');
});
pages.on("dragleave", function(e) {
	e.preventDefault();
  $(this).removeClass('dragover');
});
pages.on("drop", function(e) {
  $(this).removeClass('dragover');
  e.preventDefault();
  console.log(e);
  var file = e.originalEvent.dataTransfer.files[0], 
      reader = new FileReader();
   var pageId = $(this).attr('id');
  reader.onload = function (event) {
    console.log(event.target);
    // id, url, size, pos, rotation?, visible
    controller(model, pageId, [makeId(), event.target.result, [0,0,0,0,0], true] );
  };
  console.log(file);
  reader.readAsDataURL(file);

	return false;
});
// prevent drop on body
$('body').on("dragover", function(e) {
	e.preventDefault();
});
$('body').on("dragleave", function(e) {
	e.preventDefault();
});
$('body').on("drop", function(e) {
  e.preventDefault();
  errorSound();
});

// remove element
$(document).on('click', '.close', function () {
	var pageId = $(this).closest('.page').attr('id');
	var elementId = $(this).parent().attr('id');
	var elementSrc = $(this).siblings().attr('src');
	controller(model, pageId, [elementId, elementSrc, [0,0,0,0,0], false]);
});

// --- VIEW

function showTime(model) {
	seconds = model.timeLeft / 1000;
	document.getElementById("counter").innerHTML = seconds.toFixed(2) + " seconds left!";
}

function showExpired() {
	document.getElementById("counter").innerHTML = "expired!";
	$('body').addClass('expired');
	setTimeout(function(){ 
		window.print(); 
	}, 1000);
	clearInterval(x);
}

function notAnImage() {
	errorSound();
	alert('The file you dropped is not an image!');
}

function dropFile(pageId, src, id) {
	var pageElement = $("<div>", {"class": "page-element draggable"});
	var pageElementContent = $("<img>", {"src": src});
	var pageElementClose = $("<span>", {"class": "close"}).text('x');
	pageElement.append(pageElementContent, pageElementClose);
	pageElement.attr('id', id);
	$('#' + pageId).append(pageElement);
	// read size, pos, rot and add them to model
	elementPos = [
		pageElement.position().left,
		pageElement.position().top,
		pageElement.width(),
		pageElement.height(),
		0 // rotation (TODO)
	];
	for(var i = 0 ; i < model.images.length; i += 1) {
		if (model.images[i][0] == id) {
			model.images[i][2] = elementPos;
		}
	} 
}

function LateDropFile(src) {
	alert('too late bro');
}

function noDrag() {
	var elems = document.querySelectorAll(".draggable");
  	[].forEach.call(elems, function(el) {
    	el.classList.remove("draggable");
  });
}

function critic() {
	criticPopup.innerHTML = 'Make this image bigger pls!';
}

function removeElement(id) {
	$('#' + id).hide();
	console.log(id);
}

interact('.draggable')
	.draggable({
		onmove: window.dragMoveListener,
		restrict: {
			restriction: 'parent',
			elementRect: {
				top: 0,
				left: 0,
				bottom: 1,
				right: 1
			}
		},
	})
	.resizable({
		// resize from all edges and corners
		edges: {
			left: true,
			right: true,
			bottom: true,
			top: true
		},

		// keep the edges inside the parent
		restrictEdges: {
			outer: 'parent',
			endOnly: true,
		},

		inertia: true,
	})
	.on('resizemove', function(event) {
		var target = event.target,
			x = (parseFloat(target.getAttribute('data-x')) || 0),
			y = (parseFloat(target.getAttribute('data-y')) || 0);

		// update the element's style
		target.style.width = event.rect.width + 'px';
		target.style.height = event.rect.height + 'px';

		// translate when resizing from top or left edges
		x += event.deltaRect.left;
		y += event.deltaRect.top;

		target.style.webkitTransform = target.style.transform =
			'translate(' + x + 'px,' + y + 'px)';

		target.setAttribute('data-x', x);
		target.setAttribute('data-y', y);
	});

function dragMoveListener(event) {
	var target = event.target,
		// keep the dragged position in the data-x/data-y attributes
		x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
		y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

	// translate the element
	target.style.webkitTransform =
		target.style.transform =
		'translate(' + x + 'px, ' + y + 'px)';

	// update the posiion attributes
	target.setAttribute('data-x', x);
	target.setAttribute('data-y', y);
}

// this is used later in the resizing and gesture demos
window.dragMoveListener = dragMoveListener;


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludGVyYWN0Lm1pbi5qcyIsIm1haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGludGVyYWN0LmpzIHYxLjMuMCB8IGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vdGF5ZS9pbnRlcmFjdC5qcy9tYXN0ZXIvTElDRU5TRSAqL1xuIWZ1bmN0aW9uKHQpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPXQoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sdCk7ZWxzZXt2YXIgZTtlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyxlLmludGVyYWN0PXQoKX19KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIHQoZSxuLHIpe2Z1bmN0aW9uIGkocyxhKXtpZighbltzXSl7aWYoIWVbc10pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJmMpcmV0dXJuIGMocywhMCk7aWYobylyZXR1cm4gbyhzLCEwKTt2YXIgbD1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK3MrXCInXCIpO3Rocm93IGwuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixsfXZhciBwPW5bc109e2V4cG9ydHM6e319O2Vbc11bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24odCl7dmFyIG49ZVtzXVsxXVt0XTtyZXR1cm4gaShufHx0KX0scCxwLmV4cG9ydHMsdCxlLG4scil9cmV0dXJuIG5bc10uZXhwb3J0c31mb3IodmFyIG89XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxzPTA7czxyLmxlbmd0aDtzKyspaShyW3NdKTtyZXR1cm4gaX0oezE6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdChcIi4vc3JjL3V0aWxzL3dpbmRvd1wiKS5pbml0KGUpLHQoXCIuL3NyYy9pbmRleFwiKX06ZS5leHBvcnRzPXQoXCIuL3NyYy9pbmRleFwiKX0se1wiLi9zcmMvaW5kZXhcIjoxOSxcIi4vc3JjL3V0aWxzL3dpbmRvd1wiOjUxfV0sMjpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI7cj1lW25dO3ZhciBpPXI7aWYodC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQpYnJlYWs7aSh0KX19dmFyIG89dChcIi4vdXRpbHMvZXh0ZW5kLmpzXCIpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3IodGhpcyx0KSx0aGlzLm9wdGlvbnM9byh7fSxlfHx7fSl9cmV0dXJuIHQucHJvdG90eXBlLmZpcmU9ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwLG49XCJvblwiK3QudHlwZSxyPXRoaXMuZ2xvYmFsOyhlPXRoaXNbdC50eXBlXSkmJmkodCxlKSx0aGlzW25dJiZ0aGlzW25dKHQpLCF0LnByb3BhZ2F0aW9uU3RvcHBlZCYmciYmKGU9clt0LnR5cGVdKSYmaSh0LGUpfSx0LnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGUpe3RoaXNbdF0/dGhpc1t0XS5wdXNoKGUpOnRoaXNbdF09W2VdfSx0LnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzW3RdLHI9bj9uLmluZGV4T2YoZSk6LTE7LTEhPT1yJiZuLnNwbGljZShyLDEpLChuJiYwPT09bi5sZW5ndGh8fCFlKSYmKHRoaXNbdF09dm9pZCAwKX0sdH0oKTtlLmV4cG9ydHM9c30se1wiLi91dGlscy9leHRlbmQuanNcIjo0MH1dLDM6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX12YXIgaT10KFwiLi91dGlscy9leHRlbmRcIiksbz10KFwiLi91dGlscy9nZXRPcmlnaW5YWVwiKSxzPXQoXCIuL2RlZmF1bHRPcHRpb25zXCIpLGE9dChcIi4vdXRpbHMvU2lnbmFsc1wiKS5uZXcoKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4sYyxsLHAsdSl7dmFyIGQ9YXJndW1lbnRzLmxlbmd0aD42JiZ2b2lkIDAhPT1hcmd1bWVudHNbNl0mJmFyZ3VtZW50c1s2XTtyKHRoaXMsdCk7dmFyIGY9ZS50YXJnZXQsdj0oZiYmZi5vcHRpb25zfHxzKS5kZWx0YVNvdXJjZSxnPW8oZixwLGMpLGg9XCJzdGFydFwiPT09bCxtPVwiZW5kXCI9PT1sLHk9aD9lLnN0YXJ0Q29vcmRzOmUuY3VyQ29vcmRzLHg9ZS5wcmV2RXZlbnQ7cD1wfHxlLmVsZW1lbnQ7dmFyIGI9aSh7fSx5LnBhZ2UpLHc9aSh7fSx5LmNsaWVudCk7Yi54LT1nLngsYi55LT1nLnksdy54LT1nLngsdy55LT1nLnksdGhpcy5jdHJsS2V5PW4uY3RybEtleSx0aGlzLmFsdEtleT1uLmFsdEtleSx0aGlzLnNoaWZ0S2V5PW4uc2hpZnRLZXksdGhpcy5tZXRhS2V5PW4ubWV0YUtleSx0aGlzLmJ1dHRvbj1uLmJ1dHRvbix0aGlzLmJ1dHRvbnM9bi5idXR0b25zLHRoaXMudGFyZ2V0PXAsdGhpcy5jdXJyZW50VGFyZ2V0PXAsdGhpcy5yZWxhdGVkVGFyZ2V0PXV8fG51bGwsdGhpcy5wcmVFbmQ9ZCx0aGlzLnR5cGU9YysobHx8XCJcIiksdGhpcy5pbnRlcmFjdGlvbj1lLHRoaXMuaW50ZXJhY3RhYmxlPWYsdGhpcy50MD1oP2UuZG93blRpbWVzW2UuZG93blRpbWVzLmxlbmd0aC0xXTp4LnQwO3ZhciBFPXtpbnRlcmFjdGlvbjplLGV2ZW50Om4sYWN0aW9uOmMscGhhc2U6bCxlbGVtZW50OnAscmVsYXRlZDp1LHBhZ2U6YixjbGllbnQ6dyxjb29yZHM6eSxzdGFydGluZzpoLGVuZGluZzptLGRlbHRhU291cmNlOnYsaUV2ZW50OnRoaXN9O2EuZmlyZShcInNldC14eVwiLEUpLG0/KHRoaXMucGFnZVg9eC5wYWdlWCx0aGlzLnBhZ2VZPXgucGFnZVksdGhpcy5jbGllbnRYPXguY2xpZW50WCx0aGlzLmNsaWVudFk9eC5jbGllbnRZKToodGhpcy5wYWdlWD1iLngsdGhpcy5wYWdlWT1iLnksdGhpcy5jbGllbnRYPXcueCx0aGlzLmNsaWVudFk9dy55KSx0aGlzLngwPWUuc3RhcnRDb29yZHMucGFnZS54LWcueCx0aGlzLnkwPWUuc3RhcnRDb29yZHMucGFnZS55LWcueSx0aGlzLmNsaWVudFgwPWUuc3RhcnRDb29yZHMuY2xpZW50LngtZy54LHRoaXMuY2xpZW50WTA9ZS5zdGFydENvb3Jkcy5jbGllbnQueS1nLnksYS5maXJlKFwic2V0LWRlbHRhXCIsRSksdGhpcy50aW1lU3RhbXA9eS50aW1lU3RhbXAsdGhpcy5kdD1lLnBvaW50ZXJEZWx0YS50aW1lU3RhbXAsdGhpcy5kdXJhdGlvbj10aGlzLnRpbWVTdGFtcC10aGlzLnQwLHRoaXMuc3BlZWQ9ZS5wb2ludGVyRGVsdGFbdl0uc3BlZWQsdGhpcy52ZWxvY2l0eVg9ZS5wb2ludGVyRGVsdGFbdl0udngsdGhpcy52ZWxvY2l0eVk9ZS5wb2ludGVyRGVsdGFbdl0udnksdGhpcy5zd2lwZT1tfHxcImluZXJ0aWFzdGFydFwiPT09bD90aGlzLmdldFN3aXBlKCk6bnVsbCxhLmZpcmUoXCJuZXdcIixFKX1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0U3dpcGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmludGVyYWN0aW9uO2lmKHQucHJldkV2ZW50LnNwZWVkPDYwMHx8dGhpcy50aW1lU3RhbXAtdC5wcmV2RXZlbnQudGltZVN0YW1wPjE1MClyZXR1cm4gbnVsbDt2YXIgZT0xODAqTWF0aC5hdGFuMih0LnByZXZFdmVudC52ZWxvY2l0eVksdC5wcmV2RXZlbnQudmVsb2NpdHlYKS9NYXRoLlBJO2U8MCYmKGUrPTM2MCk7dmFyIG49MTEyLjU8PWUmJmU8MjQ3LjUscj0yMDIuNTw9ZSYmZTwzMzcuNSxpPSFuJiYoMjkyLjU8PWV8fGU8NjcuNSk7cmV0dXJue3VwOnIsZG93bjohciYmMjIuNTw9ZSYmZTwxNTcuNSxsZWZ0Om4scmlnaHQ6aSxhbmdsZTplLHNwZWVkOnQucHJldkV2ZW50LnNwZWVkLHZlbG9jaXR5Ont4OnQucHJldkV2ZW50LnZlbG9jaXR5WCx5OnQucHJldkV2ZW50LnZlbG9jaXR5WX19fSx0LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9dGhpcy5wcm9wYWdhdGlvblN0b3BwZWQ9ITB9LHQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbigpe3RoaXMucHJvcGFnYXRpb25TdG9wcGVkPSEwfSx0fSgpO2Eub24oXCJzZXQtZGVsdGFcIixmdW5jdGlvbih0KXt2YXIgZT10LmlFdmVudCxuPXQuaW50ZXJhY3Rpb24scj10LnN0YXJ0aW5nLGk9dC5kZWx0YVNvdXJjZSxvPXI/ZTpuLnByZXZFdmVudDtcImNsaWVudFwiPT09aT8oZS5keD1lLmNsaWVudFgtby5jbGllbnRYLGUuZHk9ZS5jbGllbnRZLW8uY2xpZW50WSk6KGUuZHg9ZS5wYWdlWC1vLnBhZ2VYLGUuZHk9ZS5wYWdlWS1vLnBhZ2VZKX0pLGMuc2lnbmFscz1hLGUuZXhwb3J0cz1jfSx7XCIuL2RlZmF1bHRPcHRpb25zXCI6MTgsXCIuL3V0aWxzL1NpZ25hbHNcIjozNCxcIi4vdXRpbHMvZXh0ZW5kXCI6NDAsXCIuL3V0aWxzL2dldE9yaWdpblhZXCI6NDF9XSw0OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9dmFyIGk9dChcIi4vdXRpbHMvaXNcIiksbz10KFwiLi91dGlscy9ldmVudHNcIikscz10KFwiLi91dGlscy9leHRlbmRcIiksYT10KFwiLi9hY3Rpb25zL2Jhc2VcIiksYz10KFwiLi9zY29wZVwiKSxsPXQoXCIuL0V2ZW50YWJsZVwiKSxwPXQoXCIuL2RlZmF1bHRPcHRpb25zXCIpLHU9dChcIi4vdXRpbHMvU2lnbmFsc1wiKS5uZXcoKSxkPXQoXCIuL3V0aWxzL2RvbVV0aWxzXCIpLGY9ZC5nZXRFbGVtZW50UmVjdCx2PWQubm9kZUNvbnRhaW5zLGc9ZC50cnlTZWxlY3RvcixoPWQubWF0Y2hlc1NlbGVjdG9yLG09dChcIi4vdXRpbHMvd2luZG93XCIpLHk9bS5nZXRXaW5kb3cseD10KFwiLi91dGlscy9hcnJcIiksYj14LmNvbnRhaW5zLHc9dChcIi4vdXRpbHMvYnJvd3NlclwiKSxFPXcud2hlZWxFdmVudDtjLmludGVyYWN0YWJsZXM9W107dmFyIFQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsbil7cih0aGlzLHQpLG49bnx8e30sdGhpcy50YXJnZXQ9ZSx0aGlzLmV2ZW50cz1uZXcgbCx0aGlzLl9jb250ZXh0PW4uY29udGV4dHx8Yy5kb2N1bWVudCx0aGlzLl93aW49eShnKGUpP3RoaXMuX2NvbnRleHQ6ZSksdGhpcy5fZG9jPXRoaXMuX3dpbi5kb2N1bWVudCx1LmZpcmUoXCJuZXdcIix7dGFyZ2V0OmUsb3B0aW9uczpuLGludGVyYWN0YWJsZTp0aGlzLHdpbjp0aGlzLl93aW59KSxjLmFkZERvY3VtZW50KHRoaXMuX2RvYyx0aGlzLl93aW4pLGMuaW50ZXJhY3RhYmxlcy5wdXNoKHRoaXMpLHRoaXMuc2V0KG4pfXJldHVybiB0LnByb3RvdHlwZS5zZXRPbkV2ZW50cz1mdW5jdGlvbih0LGUpe3ZhciBuPVwib25cIit0O3JldHVybiBpLmZ1bmN0aW9uKGUub25zdGFydCkmJih0aGlzLmV2ZW50c1tuK1wic3RhcnRcIl09ZS5vbnN0YXJ0KSxpLmZ1bmN0aW9uKGUub25tb3ZlKSYmKHRoaXMuZXZlbnRzW24rXCJtb3ZlXCJdPWUub25tb3ZlKSxpLmZ1bmN0aW9uKGUub25lbmQpJiYodGhpcy5ldmVudHNbbitcImVuZFwiXT1lLm9uZW5kKSxpLmZ1bmN0aW9uKGUub25pbmVydGlhc3RhcnQpJiYodGhpcy5ldmVudHNbbitcImluZXJ0aWFzdGFydFwiXT1lLm9uaW5lcnRpYXN0YXJ0KSx0aGlzfSx0LnByb3RvdHlwZS5zZXRQZXJBY3Rpb249ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSluIGluIHBbdF0mJihpLm9iamVjdChlW25dKT8odGhpcy5vcHRpb25zW3RdW25dPXModGhpcy5vcHRpb25zW3RdW25dfHx7fSxlW25dKSxpLm9iamVjdChwLnBlckFjdGlvbltuXSkmJlwiZW5hYmxlZFwiaW4gcC5wZXJBY3Rpb25bbl0mJih0aGlzLm9wdGlvbnNbdF1bbl0uZW5hYmxlZD0hMSE9PWVbbl0uZW5hYmxlZCkpOmkuYm9vbChlW25dKSYmaS5vYmplY3QocC5wZXJBY3Rpb25bbl0pP3RoaXMub3B0aW9uc1t0XVtuXS5lbmFibGVkPWVbbl06dm9pZCAwIT09ZVtuXSYmKHRoaXMub3B0aW9uc1t0XVtuXT1lW25dKSl9LHQucHJvdG90eXBlLmdldFJlY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dHx8dGhpcy50YXJnZXQsaS5zdHJpbmcodGhpcy50YXJnZXQpJiYhaS5lbGVtZW50KHQpJiYodD10aGlzLl9jb250ZXh0LnF1ZXJ5U2VsZWN0b3IodGhpcy50YXJnZXQpKSxmKHQpfSx0LnByb3RvdHlwZS5yZWN0Q2hlY2tlcj1mdW5jdGlvbih0KXtyZXR1cm4gaS5mdW5jdGlvbih0KT8odGhpcy5nZXRSZWN0PXQsdGhpcyk6bnVsbD09PXQ/KGRlbGV0ZSB0aGlzLm9wdGlvbnMuZ2V0UmVjdCx0aGlzKTp0aGlzLmdldFJlY3R9LHQucHJvdG90eXBlLl9iYWNrQ29tcGF0T3B0aW9uPWZ1bmN0aW9uKHQsZSl7aWYoZyhlKXx8aS5vYmplY3QoZSkpe3RoaXMub3B0aW9uc1t0XT1lO2Zvcih2YXIgbj0wO248YS5uYW1lcy5sZW5ndGg7bisrKXt2YXIgcjtyPWEubmFtZXNbbl07dmFyIG89cjt0aGlzLm9wdGlvbnNbb11bdF09ZX1yZXR1cm4gdGhpc31yZXR1cm4gdGhpcy5vcHRpb25zW3RdfSx0LnByb3RvdHlwZS5vcmlnaW49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JhY2tDb21wYXRPcHRpb24oXCJvcmlnaW5cIix0KX0sdC5wcm90b3R5cGUuZGVsdGFTb3VyY2U9ZnVuY3Rpb24odCl7cmV0dXJuXCJwYWdlXCI9PT10fHxcImNsaWVudFwiPT09dD8odGhpcy5vcHRpb25zLmRlbHRhU291cmNlPXQsdGhpcyk6dGhpcy5vcHRpb25zLmRlbHRhU291cmNlfSx0LnByb3RvdHlwZS5jb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHR9LHQucHJvdG90eXBlLmluQ29udGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY29udGV4dD09PXQub3duZXJEb2N1bWVudHx8dih0aGlzLl9jb250ZXh0LHQpfSx0LnByb3RvdHlwZS5maXJlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV2ZW50cy5maXJlKHQpLHRoaXN9LHQucHJvdG90eXBlLl9vbk9mZk11bHRpcGxlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKGkuc3RyaW5nKGUpJiYtMSE9PWUuc2VhcmNoKFwiIFwiKSYmKGU9ZS50cmltKCkuc3BsaXQoLyArLykpLGkuYXJyYXkoZSkpe2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKXt2YXIgcztzPWVbb107dmFyIGE9czt0aGlzW3RdKGEsbixyKX1yZXR1cm4hMH1pZihpLm9iamVjdChlKSl7Zm9yKHZhciBjIGluIGUpdGhpc1t0XShjLGVbY10sbik7cmV0dXJuITB9fSx0LnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLG4scil7cmV0dXJuIHRoaXMuX29uT2ZmTXVsdGlwbGUoXCJvblwiLGUsbixyKT90aGlzOihcIndoZWVsXCI9PT1lJiYoZT1FKSxiKHQuZXZlbnRUeXBlcyxlKT90aGlzLmV2ZW50cy5vbihlLG4pOmkuc3RyaW5nKHRoaXMudGFyZ2V0KT9vLmFkZERlbGVnYXRlKHRoaXMudGFyZ2V0LHRoaXMuX2NvbnRleHQsZSxuLHIpOm8uYWRkKHRoaXMudGFyZ2V0LGUsbixyKSx0aGlzKX0sdC5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5fb25PZmZNdWx0aXBsZShcIm9mZlwiLGUsbixyKT90aGlzOihcIndoZWVsXCI9PT1lJiYoZT1FKSxiKHQuZXZlbnRUeXBlcyxlKT90aGlzLmV2ZW50cy5vZmYoZSxuKTppLnN0cmluZyh0aGlzLnRhcmdldCk/by5yZW1vdmVEZWxlZ2F0ZSh0aGlzLnRhcmdldCx0aGlzLl9jb250ZXh0LGUsbixyKTpvLnJlbW92ZSh0aGlzLnRhcmdldCxlLG4sciksdGhpcyl9LHQucHJvdG90eXBlLnNldD1mdW5jdGlvbihlKXtpLm9iamVjdChlKXx8KGU9e30pLHRoaXMub3B0aW9ucz1zKHt9LHAuYmFzZSk7dmFyIG49cyh7fSxwLnBlckFjdGlvbik7Zm9yKHZhciByIGluIGEubWV0aG9kRGljdCl7dmFyIG89YS5tZXRob2REaWN0W3JdO3RoaXMub3B0aW9uc1tyXT1zKHt9LHBbcl0pLHRoaXMuc2V0UGVyQWN0aW9uKHIsbiksdGhpc1tvXShlW3JdKX1mb3IodmFyIGM9MDtjPHQuc2V0dGluZ3NNZXRob2RzLmxlbmd0aDtjKyspe3ZhciBsO2w9dC5zZXR0aW5nc01ldGhvZHNbY107dmFyIGQ9bDt0aGlzLm9wdGlvbnNbZF09cC5iYXNlW2RdLGQgaW4gZSYmdGhpc1tkXShlW2RdKX1yZXR1cm4gdS5maXJlKFwic2V0XCIse29wdGlvbnM6ZSxpbnRlcmFjdGFibGU6dGhpc30pLHRoaXN9LHQucHJvdG90eXBlLnVuc2V0PWZ1bmN0aW9uKCl7aWYoby5yZW1vdmUodGhpcy50YXJnZXQsXCJhbGxcIiksaS5zdHJpbmcodGhpcy50YXJnZXQpKWZvcih2YXIgdCBpbiBvLmRlbGVnYXRlZEV2ZW50cyl7dmFyIGU9by5kZWxlZ2F0ZWRFdmVudHNbdF07ZS5zZWxlY3RvcnNbMF09PT10aGlzLnRhcmdldCYmZS5jb250ZXh0c1swXT09PXRoaXMuX2NvbnRleHQmJihlLnNlbGVjdG9ycy5zcGxpY2UoMCwxKSxlLmNvbnRleHRzLnNwbGljZSgwLDEpLGUubGlzdGVuZXJzLnNwbGljZSgwLDEpLGUuc2VsZWN0b3JzLmxlbmd0aHx8KGVbdF09bnVsbCkpLG8ucmVtb3ZlKHRoaXMuX2NvbnRleHQsdCxvLmRlbGVnYXRlTGlzdGVuZXIpLG8ucmVtb3ZlKHRoaXMuX2NvbnRleHQsdCxvLmRlbGVnYXRlVXNlQ2FwdHVyZSwhMCl9ZWxzZSBvLnJlbW92ZSh0aGlzLFwiYWxsXCIpO3UuZmlyZShcInVuc2V0XCIse2ludGVyYWN0YWJsZTp0aGlzfSksYy5pbnRlcmFjdGFibGVzLnNwbGljZShjLmludGVyYWN0YWJsZXMuaW5kZXhPZih0aGlzKSwxKTtmb3IodmFyIG49MDtuPChjLmludGVyYWN0aW9uc3x8W10pLmxlbmd0aDtuKyspe3ZhciByO3I9KGMuaW50ZXJhY3Rpb25zfHxbXSlbbl07dmFyIHM9cjtzLnRhcmdldD09PXRoaXMmJnMuaW50ZXJhY3RpbmcoKSYmcy5zdG9wKCl9cmV0dXJuIGMuaW50ZXJhY3R9LHR9KCk7Yy5pbnRlcmFjdGFibGVzLmluZGV4T2ZFbGVtZW50PWZ1bmN0aW9uKHQsZSl7ZT1lfHxjLmRvY3VtZW50O2Zvcih2YXIgbj0wO248dGhpcy5sZW5ndGg7bisrKXt2YXIgcj10aGlzW25dO2lmKHIudGFyZ2V0PT09dCYmci5fY29udGV4dD09PWUpcmV0dXJuIG59cmV0dXJuLTF9LGMuaW50ZXJhY3RhYmxlcy5nZXQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXNbdGhpcy5pbmRleE9mRWxlbWVudCh0LGUmJmUuY29udGV4dCldO3JldHVybiByJiYoaS5zdHJpbmcodCl8fG58fHIuaW5Db250ZXh0KHQpKT9yOm51bGx9LGMuaW50ZXJhY3RhYmxlcy5mb3JFYWNoTWF0Y2g9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMubGVuZ3RoO24rKyl7dmFyIHI7cj10aGlzW25dO3ZhciBvPXIscz12b2lkIDA7aWYoKGkuc3RyaW5nKG8udGFyZ2V0KT9pLmVsZW1lbnQodCkmJmgodCxvLnRhcmdldCk6dD09PW8udGFyZ2V0KSYmby5pbkNvbnRleHQodCkmJihzPWUobykpLHZvaWQgMCE9PXMpcmV0dXJuIHN9fSxULmV2ZW50VHlwZXM9Yy5ldmVudFR5cGVzPVtdLFQuc2lnbmFscz11LFQuc2V0dGluZ3NNZXRob2RzPVtcImRlbHRhU291cmNlXCIsXCJvcmlnaW5cIixcInByZXZlbnREZWZhdWx0XCIsXCJyZWN0Q2hlY2tlclwiXSxlLmV4cG9ydHM9VH0se1wiLi9FdmVudGFibGVcIjoyLFwiLi9hY3Rpb25zL2Jhc2VcIjo2LFwiLi9kZWZhdWx0T3B0aW9uc1wiOjE4LFwiLi9zY29wZVwiOjMzLFwiLi91dGlscy9TaWduYWxzXCI6MzQsXCIuL3V0aWxzL2FyclwiOjM1LFwiLi91dGlscy9icm93c2VyXCI6MzYsXCIuL3V0aWxzL2RvbVV0aWxzXCI6MzgsXCIuL3V0aWxzL2V2ZW50c1wiOjM5LFwiLi91dGlscy9leHRlbmRcIjo0MCxcIi4vdXRpbHMvaXNcIjo0NSxcIi4vdXRpbHMvd2luZG93XCI6NTF9XSw1OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49Yy5nZXRQb2ludGVyVHlwZShlKSxyPWMuZ2V0RXZlbnRUYXJnZXRzKGUpLGk9clswXSxvPXJbMV0scz1bXTtpZihwLnN1cHBvcnRzVG91Y2gmJi90b3VjaC8udGVzdChlLnR5cGUpKXtoPShuZXcgRGF0ZSkuZ2V0VGltZSgpO2Zvcih2YXIgbD0wO2w8ZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7bCsrKXt2YXIgdTt1PWUuY2hhbmdlZFRvdWNoZXNbbF07dmFyIGY9dSx2PWYsZz1kLnNlYXJjaCh2LGUudHlwZSxpKTtzLnB1c2goW3YsZ3x8bmV3IG0oe3BvaW50ZXJUeXBlOm59KV0pfX1lbHNle3ZhciB5PSExO2lmKCFwLnN1cHBvcnRzUG9pbnRlckV2ZW50JiYvbW91c2UvLnRlc3QoZS50eXBlKSl7Zm9yKHZhciB4PTA7eDxhLmludGVyYWN0aW9ucy5sZW5ndGgmJiF5O3grKyl5PVwibW91c2VcIiE9PWEuaW50ZXJhY3Rpb25zW3hdLnBvaW50ZXJUeXBlJiZhLmludGVyYWN0aW9uc1t4XS5wb2ludGVySXNEb3duO3k9eXx8KG5ldyBEYXRlKS5nZXRUaW1lKCktaDw1MDB8fDA9PT1lLnRpbWVTdGFtcH1pZigheSl7dmFyIGI9ZC5zZWFyY2goZSxlLnR5cGUsaSk7Ynx8KGI9bmV3IG0oe3BvaW50ZXJUeXBlOm59KSkscy5wdXNoKFtlLGJdKX19Zm9yKHZhciB3PTA7dzxzLmxlbmd0aDt3Kyspe3ZhciBFPXNbd10sVD1FWzBdLFM9RVsxXTtTLl91cGRhdGVFdmVudFRhcmdldHMoaSxvKSxTW3RdKFQsZSxpLG8pfX19ZnVuY3Rpb24gbyh0KXtmb3IodmFyIGU9MDtlPGEuaW50ZXJhY3Rpb25zLmxlbmd0aDtlKyspe3ZhciBuO249YS5pbnRlcmFjdGlvbnNbZV07dmFyIHI9bjtyLmVuZCh0KSxmLmZpcmUoXCJlbmRhbGxcIix7ZXZlbnQ6dCxpbnRlcmFjdGlvbjpyfSl9fWZ1bmN0aW9uIHModCxlKXt2YXIgbj10LmRvYyxyPTA9PT1lLmluZGV4T2YoXCJhZGRcIik/bC5hZGQ6bC5yZW1vdmU7Zm9yKHZhciBpIGluIGEuZGVsZWdhdGVkRXZlbnRzKXIobixpLGwuZGVsZWdhdGVMaXN0ZW5lcikscihuLGksbC5kZWxlZ2F0ZVVzZUNhcHR1cmUsITApO2Zvcih2YXIgbyBpbiBiKXIobixvLGJbb10pfXZhciBhPXQoXCIuL3Njb3BlXCIpLGM9dChcIi4vdXRpbHNcIiksbD10KFwiLi91dGlscy9ldmVudHNcIikscD10KFwiLi91dGlscy9icm93c2VyXCIpLHU9dChcIi4vdXRpbHMvZG9tT2JqZWN0c1wiKSxkPXQoXCIuL3V0aWxzL2ludGVyYWN0aW9uRmluZGVyXCIpLGY9dChcIi4vdXRpbHMvU2lnbmFsc1wiKS5uZXcoKSx2PXt9LGc9W1wicG9pbnRlckRvd25cIixcInBvaW50ZXJNb3ZlXCIsXCJwb2ludGVyVXBcIixcInVwZGF0ZVBvaW50ZXJcIixcInJlbW92ZVBvaW50ZXJcIl0saD0wO2EuaW50ZXJhY3Rpb25zPVtdO2Zvcih2YXIgbT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49ZS5wb2ludGVyVHlwZTtyKHRoaXMsdCksdGhpcy50YXJnZXQ9bnVsbCx0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLnByZXBhcmVkPXtuYW1lOm51bGwsYXhpczpudWxsLGVkZ2VzOm51bGx9LHRoaXMucG9pbnRlcnM9W10sdGhpcy5wb2ludGVySWRzPVtdLHRoaXMuZG93blRhcmdldHM9W10sdGhpcy5kb3duVGltZXM9W10sdGhpcy5wcmV2Q29vcmRzPXtwYWdlOnt4OjAseTowfSxjbGllbnQ6e3g6MCx5OjB9LHRpbWVTdGFtcDowfSx0aGlzLmN1ckNvb3Jkcz17cGFnZTp7eDowLHk6MH0sY2xpZW50Ont4OjAseTowfSx0aW1lU3RhbXA6MH0sdGhpcy5zdGFydENvb3Jkcz17cGFnZTp7eDowLHk6MH0sY2xpZW50Ont4OjAseTowfSx0aW1lU3RhbXA6MH0sdGhpcy5wb2ludGVyRGVsdGE9e3BhZ2U6e3g6MCx5OjAsdng6MCx2eTowLHNwZWVkOjB9LGNsaWVudDp7eDowLHk6MCx2eDowLHZ5OjAsc3BlZWQ6MH0sdGltZVN0YW1wOjB9LHRoaXMuZG93bkV2ZW50PW51bGwsdGhpcy5kb3duUG9pbnRlcj17fSx0aGlzLl9ldmVudFRhcmdldD1udWxsLHRoaXMuX2N1ckV2ZW50VGFyZ2V0PW51bGwsdGhpcy5wcmV2RXZlbnQ9bnVsbCx0aGlzLnBvaW50ZXJJc0Rvd249ITEsdGhpcy5wb2ludGVyV2FzTW92ZWQ9ITEsdGhpcy5faW50ZXJhY3Rpbmc9ITEsdGhpcy5wb2ludGVyVHlwZT1uLGYuZmlyZShcIm5ld1wiLHRoaXMpLGEuaW50ZXJhY3Rpb25zLnB1c2godGhpcyl9cmV0dXJuIHQucHJvdG90eXBlLnBvaW50ZXJEb3duPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLnVwZGF0ZVBvaW50ZXIodCxlLCEwKTtmLmZpcmUoXCJkb3duXCIse3BvaW50ZXI6dCxldmVudDplLGV2ZW50VGFyZ2V0Om4scG9pbnRlckluZGV4OnIsaW50ZXJhY3Rpb246dGhpc30pfSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0LGUsbil7dGhpcy5pbnRlcmFjdGluZygpfHwhdGhpcy5wb2ludGVySXNEb3dufHx0aGlzLnBvaW50ZXJJZHMubGVuZ3RoPChcImdlc3R1cmVcIj09PXQubmFtZT8yOjEpfHwoLTE9PT1hLmludGVyYWN0aW9ucy5pbmRleE9mKHRoaXMpJiZhLmludGVyYWN0aW9ucy5wdXNoKHRoaXMpLGMuY29weUFjdGlvbih0aGlzLnByZXBhcmVkLHQpLHRoaXMudGFyZ2V0PWUsdGhpcy5lbGVtZW50PW4sZi5maXJlKFwiYWN0aW9uLXN0YXJ0XCIse2ludGVyYWN0aW9uOnRoaXMsZXZlbnQ6dGhpcy5kb3duRXZlbnR9KSl9LHQucHJvdG90eXBlLnBvaW50ZXJNb3ZlPWZ1bmN0aW9uKGUsbixyKXt0aGlzLnNpbXVsYXRpb258fCh0aGlzLnVwZGF0ZVBvaW50ZXIoZSksYy5zZXRDb29yZHModGhpcy5jdXJDb29yZHMsdGhpcy5wb2ludGVycykpO3ZhciBpPXRoaXMuY3VyQ29vcmRzLnBhZ2UueD09PXRoaXMucHJldkNvb3Jkcy5wYWdlLngmJnRoaXMuY3VyQ29vcmRzLnBhZ2UueT09PXRoaXMucHJldkNvb3Jkcy5wYWdlLnkmJnRoaXMuY3VyQ29vcmRzLmNsaWVudC54PT09dGhpcy5wcmV2Q29vcmRzLmNsaWVudC54JiZ0aGlzLmN1ckNvb3Jkcy5jbGllbnQueT09PXRoaXMucHJldkNvb3Jkcy5jbGllbnQueSxvPXZvaWQgMCxzPXZvaWQgMDt0aGlzLnBvaW50ZXJJc0Rvd24mJiF0aGlzLnBvaW50ZXJXYXNNb3ZlZCYmKG89dGhpcy5jdXJDb29yZHMuY2xpZW50LngtdGhpcy5zdGFydENvb3Jkcy5jbGllbnQueCxzPXRoaXMuY3VyQ29vcmRzLmNsaWVudC55LXRoaXMuc3RhcnRDb29yZHMuY2xpZW50LnksdGhpcy5wb2ludGVyV2FzTW92ZWQ9Yy5oeXBvdChvLHMpPnQucG9pbnRlck1vdmVUb2xlcmFuY2UpO3ZhciBhPXtwb2ludGVyOmUscG9pbnRlckluZGV4OnRoaXMuZ2V0UG9pbnRlckluZGV4KGUpLGV2ZW50Om4sZXZlbnRUYXJnZXQ6cixkeDpvLGR5OnMsZHVwbGljYXRlOmksaW50ZXJhY3Rpb246dGhpcyxpbnRlcmFjdGluZ0JlZm9yZU1vdmU6dGhpcy5pbnRlcmFjdGluZygpfTtpfHxjLnNldENvb3JkRGVsdGFzKHRoaXMucG9pbnRlckRlbHRhLHRoaXMucHJldkNvb3Jkcyx0aGlzLmN1ckNvb3JkcyksZi5maXJlKFwibW92ZVwiLGEpLGl8fCh0aGlzLmludGVyYWN0aW5nKCkmJnRoaXMuZG9Nb3ZlKGEpLHRoaXMucG9pbnRlcldhc01vdmVkJiZjLmNvcHlDb29yZHModGhpcy5wcmV2Q29vcmRzLHRoaXMuY3VyQ29vcmRzKSl9LHQucHJvdG90eXBlLmRvTW92ZT1mdW5jdGlvbih0KXt0PWMuZXh0ZW5kKHtwb2ludGVyOnRoaXMucG9pbnRlcnNbMF0sZXZlbnQ6dGhpcy5wcmV2RXZlbnQsZXZlbnRUYXJnZXQ6dGhpcy5fZXZlbnRUYXJnZXQsaW50ZXJhY3Rpb246dGhpc30sdHx8e30pLGYuZmlyZShcImJlZm9yZS1hY3Rpb24tbW92ZVwiLHQpLHRoaXMuX2RvbnRGaXJlTW92ZXx8Zi5maXJlKFwiYWN0aW9uLW1vdmVcIix0KSx0aGlzLl9kb250RmlyZU1vdmU9ITF9LHQucHJvdG90eXBlLnBvaW50ZXJVcD1mdW5jdGlvbih0LGUsbixyKXt2YXIgaT10aGlzLmdldFBvaW50ZXJJbmRleCh0KTtmLmZpcmUoL2NhbmNlbCQvaS50ZXN0KGUudHlwZSk/XCJjYW5jZWxcIjpcInVwXCIse3BvaW50ZXI6dCxwb2ludGVySW5kZXg6aSxldmVudDplLGV2ZW50VGFyZ2V0Om4sY3VyRXZlbnRUYXJnZXQ6cixpbnRlcmFjdGlvbjp0aGlzfSksdGhpcy5zaW11bGF0aW9ufHx0aGlzLmVuZChlKSx0aGlzLnBvaW50ZXJJc0Rvd249ITEsdGhpcy5yZW1vdmVQb2ludGVyKHQsZSl9LHQucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXt0PXR8fHRoaXMucHJldkV2ZW50LHRoaXMuaW50ZXJhY3RpbmcoKSYmZi5maXJlKFwiYWN0aW9uLWVuZFwiLHtldmVudDp0LGludGVyYWN0aW9uOnRoaXN9KSx0aGlzLnN0b3AoKX0sdC5wcm90b3R5cGUuY3VycmVudEFjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnRlcmFjdGluZz90aGlzLnByZXBhcmVkLm5hbWU6bnVsbH0sdC5wcm90b3R5cGUuaW50ZXJhY3Rpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW50ZXJhY3Rpbmd9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtmLmZpcmUoXCJzdG9wXCIse2ludGVyYWN0aW9uOnRoaXN9KSx0aGlzLl9pbnRlcmFjdGluZyYmKGYuZmlyZShcInN0b3AtYWN0aXZlXCIse2ludGVyYWN0aW9uOnRoaXN9KSxmLmZpcmUoXCJzdG9wLVwiK3RoaXMucHJlcGFyZWQubmFtZSx7aW50ZXJhY3Rpb246dGhpc30pKSx0aGlzLnRhcmdldD10aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLl9pbnRlcmFjdGluZz0hMSx0aGlzLnByZXBhcmVkLm5hbWU9dGhpcy5wcmV2RXZlbnQ9bnVsbH0sdC5wcm90b3R5cGUuZ2V0UG9pbnRlckluZGV4PWZ1bmN0aW9uKHQpe3JldHVyblwibW91c2VcIj09PXRoaXMucG9pbnRlclR5cGV8fFwicGVuXCI9PT10aGlzLnBvaW50ZXJUeXBlPzA6dGhpcy5wb2ludGVySWRzLmluZGV4T2YoYy5nZXRQb2ludGVySWQodCkpfSx0LnByb3RvdHlwZS51cGRhdGVQb2ludGVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOmUmJi8oZG93bnxzdGFydCkkL2kudGVzdChlLnR5cGUpLHI9Yy5nZXRQb2ludGVySWQodCksaT10aGlzLmdldFBvaW50ZXJJbmRleCh0KTtyZXR1cm4tMT09PWkmJihpPXRoaXMucG9pbnRlcklkcy5sZW5ndGgsdGhpcy5wb2ludGVySWRzW2ldPXIpLG4mJmYuZmlyZShcInVwZGF0ZS1wb2ludGVyLWRvd25cIix7cG9pbnRlcjp0LGV2ZW50OmUsZG93bjpuLHBvaW50ZXJJZDpyLHBvaW50ZXJJbmRleDppLGludGVyYWN0aW9uOnRoaXN9KSx0aGlzLnBvaW50ZXJzW2ldPXQsaX0sdC5wcm90b3R5cGUucmVtb3ZlUG9pbnRlcj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0UG9pbnRlckluZGV4KHQpOy0xIT09biYmKGYuZmlyZShcInJlbW92ZS1wb2ludGVyXCIse3BvaW50ZXI6dCxldmVudDplLHBvaW50ZXJJbmRleDpuLGludGVyYWN0aW9uOnRoaXN9KSx0aGlzLnBvaW50ZXJzLnNwbGljZShuLDEpLHRoaXMucG9pbnRlcklkcy5zcGxpY2UobiwxKSx0aGlzLmRvd25UYXJnZXRzLnNwbGljZShuLDEpLHRoaXMuZG93blRpbWVzLnNwbGljZShuLDEpKX0sdC5wcm90b3R5cGUuX3VwZGF0ZUV2ZW50VGFyZ2V0cz1mdW5jdGlvbih0LGUpe3RoaXMuX2V2ZW50VGFyZ2V0PXQsdGhpcy5fY3VyRXZlbnRUYXJnZXQ9ZX0sdH0oKSx5PTA7eTxnLmxlbmd0aDt5Kyspe3ZhciB4PWdbeV07dlt4XT1pKHgpfXZhciBiPXt9LHc9cC5wRXZlbnRUeXBlczt1LlBvaW50ZXJFdmVudD8oYlt3LmRvd25dPXYucG9pbnRlckRvd24sYlt3Lm1vdmVdPXYucG9pbnRlck1vdmUsYlt3LnVwXT12LnBvaW50ZXJVcCxiW3cuY2FuY2VsXT12LnBvaW50ZXJVcCk6KGIubW91c2Vkb3duPXYucG9pbnRlckRvd24sYi5tb3VzZW1vdmU9di5wb2ludGVyTW92ZSxiLm1vdXNldXA9di5wb2ludGVyVXAsYi50b3VjaHN0YXJ0PXYucG9pbnRlckRvd24sYi50b3VjaG1vdmU9di5wb2ludGVyTW92ZSxiLnRvdWNoZW5kPXYucG9pbnRlclVwLGIudG91Y2hjYW5jZWw9di5wb2ludGVyVXApLGIuYmx1cj1vLGYub24oXCJ1cGRhdGUtcG9pbnRlci1kb3duXCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQucG9pbnRlcixyPXQucG9pbnRlcklkLGk9dC5wb2ludGVySW5kZXgsbz10LmV2ZW50LHM9dC5ldmVudFRhcmdldCxhPXQuZG93bjtlLnBvaW50ZXJJZHNbaV09cixlLnBvaW50ZXJzW2ldPW4sYSYmKGUucG9pbnRlcklzRG93bj0hMCksZS5pbnRlcmFjdGluZygpfHwoYy5zZXRDb29yZHMoZS5zdGFydENvb3JkcyxlLnBvaW50ZXJzKSxjLmNvcHlDb29yZHMoZS5jdXJDb29yZHMsZS5zdGFydENvb3JkcyksYy5jb3B5Q29vcmRzKGUucHJldkNvb3JkcyxlLnN0YXJ0Q29vcmRzKSxlLmRvd25FdmVudD1vLGUuZG93blRpbWVzW2ldPWUuY3VyQ29vcmRzLnRpbWVTdGFtcCxlLmRvd25UYXJnZXRzW2ldPXN8fG8mJmMuZ2V0RXZlbnRUYXJnZXRzKG8pWzBdLGUucG9pbnRlcldhc01vdmVkPSExLGMucG9pbnRlckV4dGVuZChlLmRvd25Qb2ludGVyLG4pKX0pLGEuc2lnbmFscy5vbihcImFkZC1kb2N1bWVudFwiLHMpLGEuc2lnbmFscy5vbihcInJlbW92ZS1kb2N1bWVudFwiLHMpLG0ucG9pbnRlck1vdmVUb2xlcmFuY2U9MSxtLmRvT25JbnRlcmFjdGlvbnM9aSxtLmVuZEFsbD1vLG0uc2lnbmFscz1mLG0uZG9jRXZlbnRzPWIsYS5lbmRBbGxJbnRlcmFjdGlvbnM9byxlLmV4cG9ydHM9bX0se1wiLi9zY29wZVwiOjMzLFwiLi91dGlsc1wiOjQzLFwiLi91dGlscy9TaWduYWxzXCI6MzQsXCIuL3V0aWxzL2Jyb3dzZXJcIjozNixcIi4vdXRpbHMvZG9tT2JqZWN0c1wiOjM3LFwiLi91dGlscy9ldmVudHNcIjozOSxcIi4vdXRpbHMvaW50ZXJhY3Rpb25GaW5kZXJcIjo0NH1dLDY6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSxuLHIpe3ZhciBpPXQucHJlcGFyZWQubmFtZSxzPW5ldyBvKHQsZSxpLG4sdC5lbGVtZW50LG51bGwscik7dC50YXJnZXQuZmlyZShzKSx0LnByZXZFdmVudD1zfXZhciBpPXQoXCIuLi9JbnRlcmFjdGlvblwiKSxvPXQoXCIuLi9JbnRlcmFjdEV2ZW50XCIpLHM9e2ZpcmVQcmVwYXJlZDpyLG5hbWVzOltdLG1ldGhvZERpY3Q6e319O2kuc2lnbmFscy5vbihcImFjdGlvbi1zdGFydFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb24sbj10LmV2ZW50O2UuX2ludGVyYWN0aW5nPSEwLHIoZSxuLFwic3RhcnRcIil9KSxpLnNpZ25hbHMub24oXCJhY3Rpb24tbW92ZVwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb247aWYocihlLHQuZXZlbnQsXCJtb3ZlXCIsdC5wcmVFbmQpLCFlLmludGVyYWN0aW5nKCkpcmV0dXJuITF9KSxpLnNpZ25hbHMub24oXCJhY3Rpb24tZW5kXCIsZnVuY3Rpb24odCl7cih0LmludGVyYWN0aW9uLHQuZXZlbnQsXCJlbmRcIil9KSxlLmV4cG9ydHM9c30se1wiLi4vSW50ZXJhY3RFdmVudFwiOjMsXCIuLi9JbnRlcmFjdGlvblwiOjV9XSw3OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dChcIi4vYmFzZVwiKSxpPXQoXCIuLi91dGlsc1wiKSxvPXQoXCIuLi9JbnRlcmFjdEV2ZW50XCIpLHM9dChcIi4uL0ludGVyYWN0YWJsZVwiKSxhPXQoXCIuLi9JbnRlcmFjdGlvblwiKSxjPXQoXCIuLi9kZWZhdWx0T3B0aW9uc1wiKSxsPXtkZWZhdWx0czp7ZW5hYmxlZDohMSxtb3VzZUJ1dHRvbnM6bnVsbCxvcmlnaW46bnVsbCxzbmFwOm51bGwscmVzdHJpY3Q6bnVsbCxpbmVydGlhOm51bGwsYXV0b1Njcm9sbDpudWxsLHN0YXJ0QXhpczpcInh5XCIsbG9ja0F4aXM6XCJ4eVwifSxjaGVja2VyOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uLm9wdGlvbnMuZHJhZztyZXR1cm4gci5lbmFibGVkP3tuYW1lOlwiZHJhZ1wiLGF4aXM6XCJzdGFydFwiPT09ci5sb2NrQXhpcz9yLnN0YXJ0QXhpczpyLmxvY2tBeGlzfTpudWxsfSxnZXRDdXJzb3I6ZnVuY3Rpb24oKXtyZXR1cm5cIm1vdmVcIn19O2Euc2lnbmFscy5vbihcImJlZm9yZS1hY3Rpb24tbW92ZVwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb247aWYoXCJkcmFnXCI9PT1lLnByZXBhcmVkLm5hbWUpe3ZhciBuPWUucHJlcGFyZWQuYXhpcztcInhcIj09PW4/KGUuY3VyQ29vcmRzLnBhZ2UueT1lLnN0YXJ0Q29vcmRzLnBhZ2UueSxlLmN1ckNvb3Jkcy5jbGllbnQueT1lLnN0YXJ0Q29vcmRzLmNsaWVudC55LGUucG9pbnRlckRlbHRhLnBhZ2Uuc3BlZWQ9TWF0aC5hYnMoZS5wb2ludGVyRGVsdGEucGFnZS52eCksZS5wb2ludGVyRGVsdGEuY2xpZW50LnNwZWVkPU1hdGguYWJzKGUucG9pbnRlckRlbHRhLmNsaWVudC52eCksZS5wb2ludGVyRGVsdGEuY2xpZW50LnZ5PTAsZS5wb2ludGVyRGVsdGEucGFnZS52eT0wKTpcInlcIj09PW4mJihlLmN1ckNvb3Jkcy5wYWdlLng9ZS5zdGFydENvb3Jkcy5wYWdlLngsZS5jdXJDb29yZHMuY2xpZW50Lng9ZS5zdGFydENvb3Jkcy5jbGllbnQueCxlLnBvaW50ZXJEZWx0YS5wYWdlLnNwZWVkPU1hdGguYWJzKGUucG9pbnRlckRlbHRhLnBhZ2UudnkpLGUucG9pbnRlckRlbHRhLmNsaWVudC5zcGVlZD1NYXRoLmFicyhlLnBvaW50ZXJEZWx0YS5jbGllbnQudnkpLGUucG9pbnRlckRlbHRhLmNsaWVudC52eD0wLGUucG9pbnRlckRlbHRhLnBhZ2Uudng9MCl9fSksby5zaWduYWxzLm9uKFwibmV3XCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pRXZlbnQsbj10LmludGVyYWN0aW9uO2lmKFwiZHJhZ21vdmVcIj09PWUudHlwZSl7dmFyIHI9bi5wcmVwYXJlZC5heGlzO1wieFwiPT09cj8oZS5wYWdlWT1uLnN0YXJ0Q29vcmRzLnBhZ2UueSxlLmNsaWVudFk9bi5zdGFydENvb3Jkcy5jbGllbnQueSxlLmR5PTApOlwieVwiPT09ciYmKGUucGFnZVg9bi5zdGFydENvb3Jkcy5wYWdlLngsZS5jbGllbnRYPW4uc3RhcnRDb29yZHMuY2xpZW50LngsZS5keD0wKX19KSxzLnByb3RvdHlwZS5kcmFnZ2FibGU9ZnVuY3Rpb24odCl7cmV0dXJuIGkuaXMub2JqZWN0KHQpPyh0aGlzLm9wdGlvbnMuZHJhZy5lbmFibGVkPSExIT09dC5lbmFibGVkLHRoaXMuc2V0UGVyQWN0aW9uKFwiZHJhZ1wiLHQpLHRoaXMuc2V0T25FdmVudHMoXCJkcmFnXCIsdCksL14oeHl8eHx5fHN0YXJ0KSQvLnRlc3QodC5sb2NrQXhpcykmJih0aGlzLm9wdGlvbnMuZHJhZy5sb2NrQXhpcz10LmxvY2tBeGlzKSwvXih4eXx4fHkpJC8udGVzdCh0LnN0YXJ0QXhpcykmJih0aGlzLm9wdGlvbnMuZHJhZy5zdGFydEF4aXM9dC5zdGFydEF4aXMpLHRoaXMpOmkuaXMuYm9vbCh0KT8odGhpcy5vcHRpb25zLmRyYWcuZW5hYmxlZD10LHR8fCh0aGlzLm9uZHJhZ3N0YXJ0PXRoaXMub25kcmFnc3RhcnQ9dGhpcy5vbmRyYWdlbmQ9bnVsbCksdGhpcyk6dGhpcy5vcHRpb25zLmRyYWd9LHIuZHJhZz1sLHIubmFtZXMucHVzaChcImRyYWdcIiksaS5tZXJnZShzLmV2ZW50VHlwZXMsW1wiZHJhZ3N0YXJ0XCIsXCJkcmFnbW92ZVwiLFwiZHJhZ2luZXJ0aWFzdGFydFwiLFwiZHJhZ2luZXJ0aWFyZXN1bWVcIixcImRyYWdlbmRcIl0pLHIubWV0aG9kRGljdC5kcmFnPVwiZHJhZ2dhYmxlXCIsYy5kcmFnPWwuZGVmYXVsdHMsZS5leHBvcnRzPWx9LHtcIi4uL0ludGVyYWN0RXZlbnRcIjozLFwiLi4vSW50ZXJhY3RhYmxlXCI6NCxcIi4uL0ludGVyYWN0aW9uXCI6NSxcIi4uL2RlZmF1bHRPcHRpb25zXCI6MTgsXCIuLi91dGlsc1wiOjQzLFwiLi9iYXNlXCI6Nn1dLDg6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7dmFyIG49W10scj1bXTtlPWV8fHQuZWxlbWVudDtmb3IodmFyIGk9MDtpPHUuaW50ZXJhY3RhYmxlcy5sZW5ndGg7aSsrKXt2YXIgbztvPXUuaW50ZXJhY3RhYmxlc1tpXTt2YXIgcz1vO2lmKHMub3B0aW9ucy5kcm9wLmVuYWJsZWQpe3ZhciBhPXMub3B0aW9ucy5kcm9wLmFjY2VwdDtpZighKHAuaXMuZWxlbWVudChhKSYmYSE9PWV8fHAuaXMuc3RyaW5nKGEpJiYhcC5tYXRjaGVzU2VsZWN0b3IoZSxhKSkpZm9yKHZhciBjPXAuaXMuc3RyaW5nKHMudGFyZ2V0KT9zLl9jb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwocy50YXJnZXQpOltzLnRhcmdldF0sbD0wO2w8Yy5sZW5ndGg7bCsrKXt2YXIgZDtkPWNbbF07dmFyIGY9ZDtmIT09ZSYmKG4ucHVzaChzKSxyLnB1c2goZikpfX19cmV0dXJue2VsZW1lbnRzOnIsZHJvcHpvbmVzOm59fWZ1bmN0aW9uIGkodCxlKXtmb3IodmFyIG49dm9pZCAwLHI9MDtyPHQuYWN0aXZlRHJvcHMuZHJvcHpvbmVzLmxlbmd0aDtyKyspe3ZhciBpPXQuYWN0aXZlRHJvcHMuZHJvcHpvbmVzW3JdLG89dC5hY3RpdmVEcm9wcy5lbGVtZW50c1tyXTtvIT09biYmKGUudGFyZ2V0PW8saS5maXJlKGUpKSxuPW99fWZ1bmN0aW9uIG8odCxlKXt2YXIgbj1yKHQsZSwhMCk7dC5hY3RpdmVEcm9wcy5kcm9wem9uZXM9bi5kcm9wem9uZXMsdC5hY3RpdmVEcm9wcy5lbGVtZW50cz1uLmVsZW1lbnRzLHQuYWN0aXZlRHJvcHMucmVjdHM9W107Zm9yKHZhciBpPTA7aTx0LmFjdGl2ZURyb3BzLmRyb3B6b25lcy5sZW5ndGg7aSsrKXQuYWN0aXZlRHJvcHMucmVjdHNbaV09dC5hY3RpdmVEcm9wcy5kcm9wem9uZXNbaV0uZ2V0UmVjdCh0LmFjdGl2ZURyb3BzLmVsZW1lbnRzW2ldKX1mdW5jdGlvbiBzKHQsZSxuKXt2YXIgcj10LmludGVyYWN0aW9uLGk9W107eSYmbyhyLG4pO2Zvcih2YXIgcz0wO3M8ci5hY3RpdmVEcm9wcy5kcm9wem9uZXMubGVuZ3RoO3MrKyl7dmFyIGE9ci5hY3RpdmVEcm9wcy5kcm9wem9uZXNbc10sYz1yLmFjdGl2ZURyb3BzLmVsZW1lbnRzW3NdLGw9ci5hY3RpdmVEcm9wcy5yZWN0c1tzXTtpLnB1c2goYS5kcm9wQ2hlY2sodCxlLHIudGFyZ2V0LG4sYyxsKT9jOm51bGwpfXZhciB1PXAuaW5kZXhPZkRlZXBlc3RFbGVtZW50KGkpO3JldHVybntkcm9wem9uZTpyLmFjdGl2ZURyb3BzLmRyb3B6b25lc1t1XXx8bnVsbCxlbGVtZW50OnIuYWN0aXZlRHJvcHMuZWxlbWVudHNbdV18fG51bGx9fWZ1bmN0aW9uIGEodCxlLG4pe3ZhciByPXtlbnRlcjpudWxsLGxlYXZlOm51bGwsYWN0aXZhdGU6bnVsbCxkZWFjdGl2YXRlOm51bGwsbW92ZTpudWxsLGRyb3A6bnVsbH0saT17ZHJhZ0V2ZW50Om4saW50ZXJhY3Rpb246dCx0YXJnZXQ6dC5kcm9wRWxlbWVudCxkcm9wem9uZTp0LmRyb3BUYXJnZXQscmVsYXRlZFRhcmdldDpuLnRhcmdldCxkcmFnZ2FibGU6bi5pbnRlcmFjdGFibGUsdGltZVN0YW1wOm4udGltZVN0YW1wfTtyZXR1cm4gdC5kcm9wRWxlbWVudCE9PXQucHJldkRyb3BFbGVtZW50JiYodC5wcmV2RHJvcFRhcmdldCYmKHIubGVhdmU9cC5leHRlbmQoe3R5cGU6XCJkcmFnbGVhdmVcIn0saSksbi5kcmFnTGVhdmU9ci5sZWF2ZS50YXJnZXQ9dC5wcmV2RHJvcEVsZW1lbnQsbi5wcmV2RHJvcHpvbmU9ci5sZWF2ZS5kcm9wem9uZT10LnByZXZEcm9wVGFyZ2V0KSx0LmRyb3BUYXJnZXQmJihyLmVudGVyPXtkcmFnRXZlbnQ6bixpbnRlcmFjdGlvbjp0LHRhcmdldDp0LmRyb3BFbGVtZW50LGRyb3B6b25lOnQuZHJvcFRhcmdldCxyZWxhdGVkVGFyZ2V0Om4udGFyZ2V0LGRyYWdnYWJsZTpuLmludGVyYWN0YWJsZSx0aW1lU3RhbXA6bi50aW1lU3RhbXAsdHlwZTpcImRyYWdlbnRlclwifSxuLmRyYWdFbnRlcj10LmRyb3BFbGVtZW50LG4uZHJvcHpvbmU9dC5kcm9wVGFyZ2V0KSksXCJkcmFnZW5kXCI9PT1uLnR5cGUmJnQuZHJvcFRhcmdldCYmKHIuZHJvcD1wLmV4dGVuZCh7dHlwZTpcImRyb3BcIn0saSksbi5kcm9wem9uZT10LmRyb3BUYXJnZXQsbi5yZWxhdGVkVGFyZ2V0PXQuZHJvcEVsZW1lbnQpLFwiZHJhZ3N0YXJ0XCI9PT1uLnR5cGUmJihyLmFjdGl2YXRlPXAuZXh0ZW5kKHt0eXBlOlwiZHJvcGFjdGl2YXRlXCJ9LGkpLHIuYWN0aXZhdGUudGFyZ2V0PW51bGwsci5hY3RpdmF0ZS5kcm9wem9uZT1udWxsKSxcImRyYWdlbmRcIj09PW4udHlwZSYmKHIuZGVhY3RpdmF0ZT1wLmV4dGVuZCh7dHlwZTpcImRyb3BkZWFjdGl2YXRlXCJ9LGkpLHIuZGVhY3RpdmF0ZS50YXJnZXQ9bnVsbCxyLmRlYWN0aXZhdGUuZHJvcHpvbmU9bnVsbCksXCJkcmFnbW92ZVwiPT09bi50eXBlJiZ0LmRyb3BUYXJnZXQmJihyLm1vdmU9cC5leHRlbmQoe2RyYWdtb3ZlOm4sdHlwZTpcImRyb3Btb3ZlXCJ9LGkpLG4uZHJvcHpvbmU9dC5kcm9wVGFyZ2V0KSxyfWZ1bmN0aW9uIGModCxlKXtlLmxlYXZlJiZ0LnByZXZEcm9wVGFyZ2V0LmZpcmUoZS5sZWF2ZSksZS5tb3ZlJiZ0LmRyb3BUYXJnZXQuZmlyZShlLm1vdmUpLGUuZW50ZXImJnQuZHJvcFRhcmdldC5maXJlKGUuZW50ZXIpLGUuZHJvcCYmdC5kcm9wVGFyZ2V0LmZpcmUoZS5kcm9wKSxlLmRlYWN0aXZhdGUmJmkodCxlLmRlYWN0aXZhdGUpLHQucHJldkRyb3BUYXJnZXQ9dC5kcm9wVGFyZ2V0LHQucHJldkRyb3BFbGVtZW50PXQuZHJvcEVsZW1lbnR9dmFyIGw9dChcIi4vYmFzZVwiKSxwPXQoXCIuLi91dGlsc1wiKSx1PXQoXCIuLi9zY29wZVwiKSxkPXQoXCIuLi9pbnRlcmFjdFwiKSxmPXQoXCIuLi9JbnRlcmFjdEV2ZW50XCIpLHY9dChcIi4uL0ludGVyYWN0YWJsZVwiKSxnPXQoXCIuLi9JbnRlcmFjdGlvblwiKSxoPXQoXCIuLi9kZWZhdWx0T3B0aW9uc1wiKSxtPXtkZWZhdWx0czp7ZW5hYmxlZDohMSxhY2NlcHQ6bnVsbCxvdmVybGFwOlwicG9pbnRlclwifX0seT0hMTtnLnNpZ25hbHMub24oXCJhY3Rpb24tc3RhcnRcIixmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5ldmVudDtpZihcImRyYWdcIj09PWUucHJlcGFyZWQubmFtZSl7ZS5hY3RpdmVEcm9wcy5kcm9wem9uZXM9W10sZS5hY3RpdmVEcm9wcy5lbGVtZW50cz1bXSxlLmFjdGl2ZURyb3BzLnJlY3RzPVtdLGUuZHJvcEV2ZW50cz1udWxsLGUuZHluYW1pY0Ryb3B8fG8oZSxlLmVsZW1lbnQpO3ZhciByPWUucHJldkV2ZW50LHM9YShlLG4scik7cy5hY3RpdmF0ZSYmaShlLHMuYWN0aXZhdGUpfX0pLGYuc2lnbmFscy5vbihcIm5ld1wiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb24sbj10LmlFdmVudCxyPXQuZXZlbnQ7aWYoXCJkcmFnbW92ZVwiPT09bi50eXBlfHxcImRyYWdlbmRcIj09PW4udHlwZSl7dmFyIGk9ZS5lbGVtZW50LG89bixjPXMobyxyLGkpO2UuZHJvcFRhcmdldD1jLmRyb3B6b25lLGUuZHJvcEVsZW1lbnQ9Yy5lbGVtZW50LGUuZHJvcEV2ZW50cz1hKGUscixvKX19KSxnLnNpZ25hbHMub24oXCJhY3Rpb24tbW92ZVwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb247XCJkcmFnXCI9PT1lLnByZXBhcmVkLm5hbWUmJmMoZSxlLmRyb3BFdmVudHMpfSksZy5zaWduYWxzLm9uKFwiYWN0aW9uLWVuZFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb247XCJkcmFnXCI9PT1lLnByZXBhcmVkLm5hbWUmJmMoZSxlLmRyb3BFdmVudHMpfSksZy5zaWduYWxzLm9uKFwic3RvcC1kcmFnXCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbjtlLmFjdGl2ZURyb3BzLmRyb3B6b25lcz1lLmFjdGl2ZURyb3BzLmVsZW1lbnRzPWUuYWN0aXZlRHJvcHMucmVjdHM9ZS5kcm9wRXZlbnRzPW51bGx9KSx2LnByb3RvdHlwZS5kcm9wem9uZT1mdW5jdGlvbih0KXtyZXR1cm4gcC5pcy5vYmplY3QodCk/KHRoaXMub3B0aW9ucy5kcm9wLmVuYWJsZWQ9ITEhPT10LmVuYWJsZWQscC5pcy5mdW5jdGlvbih0Lm9uZHJvcCkmJih0aGlzLmV2ZW50cy5vbmRyb3A9dC5vbmRyb3ApLHAuaXMuZnVuY3Rpb24odC5vbmRyb3BhY3RpdmF0ZSkmJih0aGlzLmV2ZW50cy5vbmRyb3BhY3RpdmF0ZT10Lm9uZHJvcGFjdGl2YXRlKSxwLmlzLmZ1bmN0aW9uKHQub25kcm9wZGVhY3RpdmF0ZSkmJih0aGlzLmV2ZW50cy5vbmRyb3BkZWFjdGl2YXRlPXQub25kcm9wZGVhY3RpdmF0ZSkscC5pcy5mdW5jdGlvbih0Lm9uZHJhZ2VudGVyKSYmKHRoaXMuZXZlbnRzLm9uZHJhZ2VudGVyPXQub25kcmFnZW50ZXIpLHAuaXMuZnVuY3Rpb24odC5vbmRyYWdsZWF2ZSkmJih0aGlzLmV2ZW50cy5vbmRyYWdsZWF2ZT10Lm9uZHJhZ2xlYXZlKSxwLmlzLmZ1bmN0aW9uKHQub25kcm9wbW92ZSkmJih0aGlzLmV2ZW50cy5vbmRyb3Btb3ZlPXQub25kcm9wbW92ZSksL14ocG9pbnRlcnxjZW50ZXIpJC8udGVzdCh0Lm92ZXJsYXApP3RoaXMub3B0aW9ucy5kcm9wLm92ZXJsYXA9dC5vdmVybGFwOnAuaXMubnVtYmVyKHQub3ZlcmxhcCkmJih0aGlzLm9wdGlvbnMuZHJvcC5vdmVybGFwPU1hdGgubWF4KE1hdGgubWluKDEsdC5vdmVybGFwKSwwKSksXCJhY2NlcHRcImluIHQmJih0aGlzLm9wdGlvbnMuZHJvcC5hY2NlcHQ9dC5hY2NlcHQpLFwiY2hlY2tlclwiaW4gdCYmKHRoaXMub3B0aW9ucy5kcm9wLmNoZWNrZXI9dC5jaGVja2VyKSx0aGlzKTpwLmlzLmJvb2wodCk/KHRoaXMub3B0aW9ucy5kcm9wLmVuYWJsZWQ9dCx0fHwodGhpcy5vbmRyYWdlbnRlcj10aGlzLm9uZHJhZ2xlYXZlPXRoaXMub25kcm9wPXRoaXMub25kcm9wYWN0aXZhdGU9dGhpcy5vbmRyb3BkZWFjdGl2YXRlPW51bGwpLHRoaXMpOnRoaXMub3B0aW9ucy5kcm9wfSx2LnByb3RvdHlwZS5kcm9wQ2hlY2s9ZnVuY3Rpb24odCxlLG4scixpLG8pe3ZhciBzPSExO2lmKCEobz1vfHx0aGlzLmdldFJlY3QoaSkpKXJldHVybiEhdGhpcy5vcHRpb25zLmRyb3AuY2hlY2tlciYmdGhpcy5vcHRpb25zLmRyb3AuY2hlY2tlcih0LGUscyx0aGlzLGksbixyKTt2YXIgYT10aGlzLm9wdGlvbnMuZHJvcC5vdmVybGFwO2lmKFwicG9pbnRlclwiPT09YSl7dmFyIGM9cC5nZXRPcmlnaW5YWShuLHIsXCJkcmFnXCIpLGw9cC5nZXRQYWdlWFkodCk7bC54Kz1jLngsbC55Kz1jLnk7dmFyIHU9bC54Pm8ubGVmdCYmbC54PG8ucmlnaHQsZD1sLnk+by50b3AmJmwueTxvLmJvdHRvbTtzPXUmJmR9dmFyIGY9bi5nZXRSZWN0KHIpO2lmKGYmJlwiY2VudGVyXCI9PT1hKXt2YXIgdj1mLmxlZnQrZi53aWR0aC8yLGc9Zi50b3ArZi5oZWlnaHQvMjtzPXY+PW8ubGVmdCYmdjw9by5yaWdodCYmZz49by50b3AmJmc8PW8uYm90dG9tfWlmKGYmJnAuaXMubnVtYmVyKGEpKXtzPU1hdGgubWF4KDAsTWF0aC5taW4oby5yaWdodCxmLnJpZ2h0KS1NYXRoLm1heChvLmxlZnQsZi5sZWZ0KSkqTWF0aC5tYXgoMCxNYXRoLm1pbihvLmJvdHRvbSxmLmJvdHRvbSktTWF0aC5tYXgoby50b3AsZi50b3ApKS8oZi53aWR0aCpmLmhlaWdodCk+PWF9cmV0dXJuIHRoaXMub3B0aW9ucy5kcm9wLmNoZWNrZXImJihzPXRoaXMub3B0aW9ucy5kcm9wLmNoZWNrZXIodCxlLHMsdGhpcyxpLG4scikpLHN9LHYuc2lnbmFscy5vbihcInVuc2V0XCIsZnVuY3Rpb24odCl7dC5pbnRlcmFjdGFibGUuZHJvcHpvbmUoITEpfSksdi5zZXR0aW5nc01ldGhvZHMucHVzaChcImRyb3BDaGVja2VyXCIpLGcuc2lnbmFscy5vbihcIm5ld1wiLGZ1bmN0aW9uKHQpe3QuZHJvcFRhcmdldD1udWxsLHQuZHJvcEVsZW1lbnQ9bnVsbCx0LnByZXZEcm9wVGFyZ2V0PW51bGwsdC5wcmV2RHJvcEVsZW1lbnQ9bnVsbCx0LmRyb3BFdmVudHM9bnVsbCx0LmFjdGl2ZURyb3BzPXtkcm9wem9uZXM6W10sZWxlbWVudHM6W10scmVjdHM6W119fSksZy5zaWduYWxzLm9uKFwic3RvcFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb247ZS5kcm9wVGFyZ2V0PWUuZHJvcEVsZW1lbnQ9ZS5wcmV2RHJvcFRhcmdldD1lLnByZXZEcm9wRWxlbWVudD1udWxsfSksZC5keW5hbWljRHJvcD1mdW5jdGlvbih0KXtyZXR1cm4gcC5pcy5ib29sKHQpPyh5PXQsZCk6eX0scC5tZXJnZSh2LmV2ZW50VHlwZXMsW1wiZHJhZ2VudGVyXCIsXCJkcmFnbGVhdmVcIixcImRyb3BhY3RpdmF0ZVwiLFwiZHJvcGRlYWN0aXZhdGVcIixcImRyb3Btb3ZlXCIsXCJkcm9wXCJdKSxsLm1ldGhvZERpY3QuZHJvcD1cImRyb3B6b25lXCIsaC5kcm9wPW0uZGVmYXVsdHMsZS5leHBvcnRzPW19LHtcIi4uL0ludGVyYWN0RXZlbnRcIjozLFwiLi4vSW50ZXJhY3RhYmxlXCI6NCxcIi4uL0ludGVyYWN0aW9uXCI6NSxcIi4uL2RlZmF1bHRPcHRpb25zXCI6MTgsXCIuLi9pbnRlcmFjdFwiOjIxLFwiLi4vc2NvcGVcIjozMyxcIi4uL3V0aWxzXCI6NDMsXCIuL2Jhc2VcIjo2fV0sOTpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPXQoXCIuL2Jhc2VcIiksaT10KFwiLi4vdXRpbHNcIiksbz10KFwiLi4vSW50ZXJhY3RFdmVudFwiKSxzPXQoXCIuLi9JbnRlcmFjdGFibGVcIiksYT10KFwiLi4vSW50ZXJhY3Rpb25cIiksYz10KFwiLi4vZGVmYXVsdE9wdGlvbnNcIiksbD17ZGVmYXVsdHM6e2VuYWJsZWQ6ITEsb3JpZ2luOm51bGwscmVzdHJpY3Q6bnVsbH0sY2hlY2tlcjpmdW5jdGlvbih0LGUsbixyLGkpe3JldHVybiBpLnBvaW50ZXJJZHMubGVuZ3RoPj0yP3tuYW1lOlwiZ2VzdHVyZVwifTpudWxsfSxnZXRDdXJzb3I6ZnVuY3Rpb24oKXtyZXR1cm5cIlwifX07by5zaWduYWxzLm9uKFwibmV3XCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pRXZlbnQsbj10LmludGVyYWN0aW9uO1wiZ2VzdHVyZXN0YXJ0XCI9PT1lLnR5cGUmJihlLmRzPTAsbi5nZXN0dXJlLnN0YXJ0RGlzdGFuY2U9bi5nZXN0dXJlLnByZXZEaXN0YW5jZT1lLmRpc3RhbmNlLG4uZ2VzdHVyZS5zdGFydEFuZ2xlPW4uZ2VzdHVyZS5wcmV2QW5nbGU9ZS5hbmdsZSxuLmdlc3R1cmUuc2NhbGU9MSl9KSxvLnNpZ25hbHMub24oXCJuZXdcIixmdW5jdGlvbih0KXt2YXIgZT10LmlFdmVudCxuPXQuaW50ZXJhY3Rpb247XCJnZXN0dXJlbW92ZVwiPT09ZS50eXBlJiYoZS5kcz1lLnNjYWxlLW4uZ2VzdHVyZS5zY2FsZSxuLnRhcmdldC5maXJlKGUpLG4uZ2VzdHVyZS5wcmV2QW5nbGU9ZS5hbmdsZSxuLmdlc3R1cmUucHJldkRpc3RhbmNlPWUuZGlzdGFuY2UsZS5zY2FsZT09PTEvMHx8bnVsbD09PWUuc2NhbGV8fHZvaWQgMD09PWUuc2NhbGV8fGlzTmFOKGUuc2NhbGUpfHwobi5nZXN0dXJlLnNjYWxlPWUuc2NhbGUpKX0pLHMucHJvdG90eXBlLmdlc3R1cmFibGU9ZnVuY3Rpb24odCl7cmV0dXJuIGkuaXMub2JqZWN0KHQpPyh0aGlzLm9wdGlvbnMuZ2VzdHVyZS5lbmFibGVkPSExIT09dC5lbmFibGVkLHRoaXMuc2V0UGVyQWN0aW9uKFwiZ2VzdHVyZVwiLHQpLHRoaXMuc2V0T25FdmVudHMoXCJnZXN0dXJlXCIsdCksdGhpcyk6aS5pcy5ib29sKHQpPyh0aGlzLm9wdGlvbnMuZ2VzdHVyZS5lbmFibGVkPXQsdHx8KHRoaXMub25nZXN0dXJlc3RhcnQ9dGhpcy5vbmdlc3R1cmVzdGFydD10aGlzLm9uZ2VzdHVyZWVuZD1udWxsKSx0aGlzKTp0aGlzLm9wdGlvbnMuZ2VzdHVyZX0sby5zaWduYWxzLm9uKFwic2V0LWRlbHRhXCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQuaUV2ZW50LHI9dC5hY3Rpb24scz10LmV2ZW50LGE9dC5zdGFydGluZyxjPXQuZW5kaW5nLGw9dC5kZWx0YVNvdXJjZTtpZihcImdlc3R1cmVcIj09PXIpe3ZhciBwPWUucG9pbnRlcnM7bi50b3VjaGVzPVtwWzBdLHBbMV1dLGE/KG4uZGlzdGFuY2U9aS50b3VjaERpc3RhbmNlKHAsbCksbi5ib3g9aS50b3VjaEJCb3gocCksbi5zY2FsZT0xLG4uZHM9MCxuLmFuZ2xlPWkudG91Y2hBbmdsZShwLHZvaWQgMCxsKSxuLmRhPTApOmN8fHMgaW5zdGFuY2VvZiBvPyhuLmRpc3RhbmNlPWUucHJldkV2ZW50LmRpc3RhbmNlLG4uYm94PWUucHJldkV2ZW50LmJveCxuLnNjYWxlPWUucHJldkV2ZW50LnNjYWxlLG4uZHM9bi5zY2FsZS0xLG4uYW5nbGU9ZS5wcmV2RXZlbnQuYW5nbGUsbi5kYT1uLmFuZ2xlLWUuZ2VzdHVyZS5zdGFydEFuZ2xlKToobi5kaXN0YW5jZT1pLnRvdWNoRGlzdGFuY2UocCxsKSxuLmJveD1pLnRvdWNoQkJveChwKSxuLnNjYWxlPW4uZGlzdGFuY2UvZS5nZXN0dXJlLnN0YXJ0RGlzdGFuY2Usbi5hbmdsZT1pLnRvdWNoQW5nbGUocCxlLmdlc3R1cmUucHJldkFuZ2xlLGwpLG4uZHM9bi5zY2FsZS1lLmdlc3R1cmUucHJldlNjYWxlLG4uZGE9bi5hbmdsZS1lLmdlc3R1cmUucHJldkFuZ2xlKX19KSxhLnNpZ25hbHMub24oXCJuZXdcIixmdW5jdGlvbih0KXt0Lmdlc3R1cmU9e3N0YXJ0Ont4OjAseTowfSxzdGFydERpc3RhbmNlOjAscHJldkRpc3RhbmNlOjAsZGlzdGFuY2U6MCxzY2FsZToxLHN0YXJ0QW5nbGU6MCxwcmV2QW5nbGU6MH19KSxyLmdlc3R1cmU9bCxyLm5hbWVzLnB1c2goXCJnZXN0dXJlXCIpLGkubWVyZ2Uocy5ldmVudFR5cGVzLFtcImdlc3R1cmVzdGFydFwiLFwiZ2VzdHVyZW1vdmVcIixcImdlc3R1cmVlbmRcIl0pLHIubWV0aG9kRGljdC5nZXN0dXJlPVwiZ2VzdHVyYWJsZVwiLGMuZ2VzdHVyZT1sLmRlZmF1bHRzLGUuZXhwb3J0cz1sfSx7XCIuLi9JbnRlcmFjdEV2ZW50XCI6MyxcIi4uL0ludGVyYWN0YWJsZVwiOjQsXCIuLi9JbnRlcmFjdGlvblwiOjUsXCIuLi9kZWZhdWx0T3B0aW9uc1wiOjE4LFwiLi4vdXRpbHNcIjo0MyxcIi4vYmFzZVwiOjZ9XSwxMDpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlLG4scixpLHMsYSl7aWYoIWUpcmV0dXJuITE7aWYoITA9PT1lKXt2YXIgYz1vLmlzLm51bWJlcihzLndpZHRoKT9zLndpZHRoOnMucmlnaHQtcy5sZWZ0LGw9by5pcy5udW1iZXIocy5oZWlnaHQpP3MuaGVpZ2h0OnMuYm90dG9tLXMudG9wO2lmKGM8MCYmKFwibGVmdFwiPT09dD90PVwicmlnaHRcIjpcInJpZ2h0XCI9PT10JiYodD1cImxlZnRcIikpLGw8MCYmKFwidG9wXCI9PT10P3Q9XCJib3R0b21cIjpcImJvdHRvbVwiPT09dCYmKHQ9XCJ0b3BcIikpLFwibGVmdFwiPT09dClyZXR1cm4gbi54PChjPj0wP3MubGVmdDpzLnJpZ2h0KSthO2lmKFwidG9wXCI9PT10KXJldHVybiBuLnk8KGw+PTA/cy50b3A6cy5ib3R0b20pK2E7aWYoXCJyaWdodFwiPT09dClyZXR1cm4gbi54PihjPj0wP3MucmlnaHQ6cy5sZWZ0KS1hO2lmKFwiYm90dG9tXCI9PT10KXJldHVybiBuLnk+KGw+PTA/cy5ib3R0b206cy50b3ApLWF9cmV0dXJuISFvLmlzLmVsZW1lbnQocikmJihvLmlzLmVsZW1lbnQoZSk/ZT09PXI6by5tYXRjaGVzVXBUbyhyLGUsaSkpfXZhciBpPXQoXCIuL2Jhc2VcIiksbz10KFwiLi4vdXRpbHNcIikscz10KFwiLi4vdXRpbHMvYnJvd3NlclwiKSxhPXQoXCIuLi9JbnRlcmFjdEV2ZW50XCIpLGM9dChcIi4uL0ludGVyYWN0YWJsZVwiKSxsPXQoXCIuLi9JbnRlcmFjdGlvblwiKSxwPXQoXCIuLi9kZWZhdWx0T3B0aW9uc1wiKSx1PXMuc3VwcG9ydHNUb3VjaHx8cy5zdXBwb3J0c1BvaW50ZXJFdmVudD8yMDoxMCxkPXtkZWZhdWx0czp7ZW5hYmxlZDohMSxtb3VzZUJ1dHRvbnM6bnVsbCxvcmlnaW46bnVsbCxzbmFwOm51bGwscmVzdHJpY3Q6bnVsbCxpbmVydGlhOm51bGwsYXV0b1Njcm9sbDpudWxsLHNxdWFyZTohMSxwcmVzZXJ2ZUFzcGVjdFJhdGlvOiExLGF4aXM6XCJ4eVwiLG1hcmdpbjpOYU4sZWRnZXM6bnVsbCxpbnZlcnQ6XCJub25lXCJ9LGNoZWNrZXI6ZnVuY3Rpb24odCxlLG4saSxzLGEpe2lmKCFhKXJldHVybiBudWxsO3ZhciBjPW8uZXh0ZW5kKHt9LHMuY3VyQ29vcmRzLnBhZ2UpLGw9bi5vcHRpb25zO2lmKGwucmVzaXplLmVuYWJsZWQpe3ZhciBwPWwucmVzaXplLGQ9e2xlZnQ6ITEscmlnaHQ6ITEsdG9wOiExLGJvdHRvbTohMX07aWYoby5pcy5vYmplY3QocC5lZGdlcykpe2Zvcih2YXIgZiBpbiBkKWRbZl09cihmLHAuZWRnZXNbZl0sYyxzLl9ldmVudFRhcmdldCxpLGEscC5tYXJnaW58fHUpO2lmKGQubGVmdD1kLmxlZnQmJiFkLnJpZ2h0LGQudG9wPWQudG9wJiYhZC5ib3R0b20sZC5sZWZ0fHxkLnJpZ2h0fHxkLnRvcHx8ZC5ib3R0b20pcmV0dXJue25hbWU6XCJyZXNpemVcIixlZGdlczpkfX1lbHNle3ZhciB2PVwieVwiIT09bC5yZXNpemUuYXhpcyYmYy54PmEucmlnaHQtdSxnPVwieFwiIT09bC5yZXNpemUuYXhpcyYmYy55PmEuYm90dG9tLXU7aWYodnx8ZylyZXR1cm57bmFtZTpcInJlc2l6ZVwiLGF4ZXM6KHY/XCJ4XCI6XCJcIikrKGc/XCJ5XCI6XCJcIil9fX1yZXR1cm4gbnVsbH0sY3Vyc29yczpzLmlzSWU5P3t4OlwiZS1yZXNpemVcIix5Olwicy1yZXNpemVcIix4eTpcInNlLXJlc2l6ZVwiLHRvcDpcIm4tcmVzaXplXCIsbGVmdDpcInctcmVzaXplXCIsYm90dG9tOlwicy1yZXNpemVcIixyaWdodDpcImUtcmVzaXplXCIsdG9wbGVmdDpcInNlLXJlc2l6ZVwiLGJvdHRvbXJpZ2h0Olwic2UtcmVzaXplXCIsdG9wcmlnaHQ6XCJuZS1yZXNpemVcIixib3R0b21sZWZ0OlwibmUtcmVzaXplXCJ9Ont4OlwiZXctcmVzaXplXCIseTpcIm5zLXJlc2l6ZVwiLHh5OlwibndzZS1yZXNpemVcIix0b3A6XCJucy1yZXNpemVcIixsZWZ0OlwiZXctcmVzaXplXCIsYm90dG9tOlwibnMtcmVzaXplXCIscmlnaHQ6XCJldy1yZXNpemVcIix0b3BsZWZ0OlwibndzZS1yZXNpemVcIixib3R0b21yaWdodDpcIm53c2UtcmVzaXplXCIsdG9wcmlnaHQ6XCJuZXN3LXJlc2l6ZVwiLGJvdHRvbWxlZnQ6XCJuZXN3LXJlc2l6ZVwifSxnZXRDdXJzb3I6ZnVuY3Rpb24odCl7aWYodC5heGlzKXJldHVybiBkLmN1cnNvcnNbdC5uYW1lK3QuYXhpc107aWYodC5lZGdlcyl7Zm9yKHZhciBlPVwiXCIsbj1bXCJ0b3BcIixcImJvdHRvbVwiLFwibGVmdFwiLFwicmlnaHRcIl0scj0wO3I8NDtyKyspdC5lZGdlc1tuW3JdXSYmKGUrPW5bcl0pO3JldHVybiBkLmN1cnNvcnNbZV19fX07YS5zaWduYWxzLm9uKFwibmV3XCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pRXZlbnQsbj10LmludGVyYWN0aW9uO2lmKFwicmVzaXplc3RhcnRcIj09PWUudHlwZSYmbi5wcmVwYXJlZC5lZGdlcyl7dmFyIHI9bi50YXJnZXQuZ2V0UmVjdChuLmVsZW1lbnQpLGk9bi50YXJnZXQub3B0aW9ucy5yZXNpemU7aWYoaS5zcXVhcmV8fGkucHJlc2VydmVBc3BlY3RSYXRpbyl7dmFyIHM9by5leHRlbmQoe30sbi5wcmVwYXJlZC5lZGdlcyk7cy50b3A9cy50b3B8fHMubGVmdCYmIXMuYm90dG9tLHMubGVmdD1zLmxlZnR8fHMudG9wJiYhcy5yaWdodCxzLmJvdHRvbT1zLmJvdHRvbXx8cy5yaWdodCYmIXMudG9wLHMucmlnaHQ9cy5yaWdodHx8cy5ib3R0b20mJiFzLmxlZnQsbi5wcmVwYXJlZC5fbGlua2VkRWRnZXM9c31lbHNlIG4ucHJlcGFyZWQuX2xpbmtlZEVkZ2VzPW51bGw7aS5wcmVzZXJ2ZUFzcGVjdFJhdGlvJiYobi5yZXNpemVTdGFydEFzcGVjdFJhdGlvPXIud2lkdGgvci5oZWlnaHQpLG4ucmVzaXplUmVjdHM9e3N0YXJ0OnIsY3VycmVudDpvLmV4dGVuZCh7fSxyKSxpbnZlcnRlZDpvLmV4dGVuZCh7fSxyKSxwcmV2aW91czpvLmV4dGVuZCh7fSxyKSxkZWx0YTp7bGVmdDowLHJpZ2h0OjAsd2lkdGg6MCx0b3A6MCxib3R0b206MCxoZWlnaHQ6MH19LGUucmVjdD1uLnJlc2l6ZVJlY3RzLmludmVydGVkLGUuZGVsdGFSZWN0PW4ucmVzaXplUmVjdHMuZGVsdGF9fSksYS5zaWduYWxzLm9uKFwibmV3XCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pRXZlbnQsbj10LnBoYXNlLHI9dC5pbnRlcmFjdGlvbjtpZihcIm1vdmVcIj09PW4mJnIucHJlcGFyZWQuZWRnZXMpe3ZhciBpPXIudGFyZ2V0Lm9wdGlvbnMucmVzaXplLHM9aS5pbnZlcnQsYT1cInJlcG9zaXRpb25cIj09PXN8fFwibmVnYXRlXCI9PT1zLGM9ci5wcmVwYXJlZC5lZGdlcyxsPXIucmVzaXplUmVjdHMuc3RhcnQscD1yLnJlc2l6ZVJlY3RzLmN1cnJlbnQsdT1yLnJlc2l6ZVJlY3RzLmludmVydGVkLGQ9ci5yZXNpemVSZWN0cy5kZWx0YSxmPW8uZXh0ZW5kKHIucmVzaXplUmVjdHMucHJldmlvdXMsdSksdj1jLGc9ZS5keCxoPWUuZHk7aWYoaS5wcmVzZXJ2ZUFzcGVjdFJhdGlvfHxpLnNxdWFyZSl7dmFyIG09aS5wcmVzZXJ2ZUFzcGVjdFJhdGlvP3IucmVzaXplU3RhcnRBc3BlY3RSYXRpbzoxO2M9ci5wcmVwYXJlZC5fbGlua2VkRWRnZXMsdi5sZWZ0JiZ2LmJvdHRvbXx8di5yaWdodCYmdi50b3A/aD0tZy9tOnYubGVmdHx8di5yaWdodD9oPWcvbToodi50b3B8fHYuYm90dG9tKSYmKGc9aCptKX1pZihjLnRvcCYmKHAudG9wKz1oKSxjLmJvdHRvbSYmKHAuYm90dG9tKz1oKSxjLmxlZnQmJihwLmxlZnQrPWcpLGMucmlnaHQmJihwLnJpZ2h0Kz1nKSxhKXtpZihvLmV4dGVuZCh1LHApLFwicmVwb3NpdGlvblwiPT09cyl7dmFyIHk9dm9pZCAwO3UudG9wPnUuYm90dG9tJiYoeT11LnRvcCx1LnRvcD11LmJvdHRvbSx1LmJvdHRvbT15KSx1LmxlZnQ+dS5yaWdodCYmKHk9dS5sZWZ0LHUubGVmdD11LnJpZ2h0LHUucmlnaHQ9eSl9fWVsc2UgdS50b3A9TWF0aC5taW4ocC50b3AsbC5ib3R0b20pLHUuYm90dG9tPU1hdGgubWF4KHAuYm90dG9tLGwudG9wKSx1LmxlZnQ9TWF0aC5taW4ocC5sZWZ0LGwucmlnaHQpLHUucmlnaHQ9TWF0aC5tYXgocC5yaWdodCxsLmxlZnQpO3Uud2lkdGg9dS5yaWdodC11LmxlZnQsdS5oZWlnaHQ9dS5ib3R0b20tdS50b3A7Zm9yKHZhciB4IGluIHUpZFt4XT11W3hdLWZbeF07ZS5lZGdlcz1yLnByZXBhcmVkLmVkZ2VzLGUucmVjdD11LGUuZGVsdGFSZWN0PWR9fSksYy5wcm90b3R5cGUucmVzaXphYmxlPWZ1bmN0aW9uKHQpe3JldHVybiBvLmlzLm9iamVjdCh0KT8odGhpcy5vcHRpb25zLnJlc2l6ZS5lbmFibGVkPSExIT09dC5lbmFibGVkLHRoaXMuc2V0UGVyQWN0aW9uKFwicmVzaXplXCIsdCksdGhpcy5zZXRPbkV2ZW50cyhcInJlc2l6ZVwiLHQpLC9eeCR8XnkkfF54eSQvLnRlc3QodC5heGlzKT90aGlzLm9wdGlvbnMucmVzaXplLmF4aXM9dC5heGlzOm51bGw9PT10LmF4aXMmJih0aGlzLm9wdGlvbnMucmVzaXplLmF4aXM9cC5yZXNpemUuYXhpcyksby5pcy5ib29sKHQucHJlc2VydmVBc3BlY3RSYXRpbyk/dGhpcy5vcHRpb25zLnJlc2l6ZS5wcmVzZXJ2ZUFzcGVjdFJhdGlvPXQucHJlc2VydmVBc3BlY3RSYXRpbzpvLmlzLmJvb2wodC5zcXVhcmUpJiYodGhpcy5vcHRpb25zLnJlc2l6ZS5zcXVhcmU9dC5zcXVhcmUpLHRoaXMpOm8uaXMuYm9vbCh0KT8odGhpcy5vcHRpb25zLnJlc2l6ZS5lbmFibGVkPXQsdHx8KHRoaXMub25yZXNpemVzdGFydD10aGlzLm9ucmVzaXplc3RhcnQ9dGhpcy5vbnJlc2l6ZWVuZD1udWxsKSx0aGlzKTp0aGlzLm9wdGlvbnMucmVzaXplfSxsLnNpZ25hbHMub24oXCJuZXdcIixmdW5jdGlvbih0KXt0LnJlc2l6ZUF4ZXM9XCJ4eVwifSksYS5zaWduYWxzLm9uKFwic2V0LWRlbHRhXCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQuaUV2ZW50O1wicmVzaXplXCI9PT10LmFjdGlvbiYmZS5yZXNpemVBeGVzJiYoZS50YXJnZXQub3B0aW9ucy5yZXNpemUuc3F1YXJlPyhcInlcIj09PWUucmVzaXplQXhlcz9uLmR4PW4uZHk6bi5keT1uLmR4LG4uYXhlcz1cInh5XCIpOihuLmF4ZXM9ZS5yZXNpemVBeGVzLFwieFwiPT09ZS5yZXNpemVBeGVzP24uZHk9MDpcInlcIj09PWUucmVzaXplQXhlcyYmKG4uZHg9MCkpKX0pLGkucmVzaXplPWQsaS5uYW1lcy5wdXNoKFwicmVzaXplXCIpLFxuby5tZXJnZShjLmV2ZW50VHlwZXMsW1wicmVzaXplc3RhcnRcIixcInJlc2l6ZW1vdmVcIixcInJlc2l6ZWluZXJ0aWFzdGFydFwiLFwicmVzaXplaW5lcnRpYXJlc3VtZVwiLFwicmVzaXplZW5kXCJdKSxpLm1ldGhvZERpY3QucmVzaXplPVwicmVzaXphYmxlXCIscC5yZXNpemU9ZC5kZWZhdWx0cyxlLmV4cG9ydHM9ZH0se1wiLi4vSW50ZXJhY3RFdmVudFwiOjMsXCIuLi9JbnRlcmFjdGFibGVcIjo0LFwiLi4vSW50ZXJhY3Rpb25cIjo1LFwiLi4vZGVmYXVsdE9wdGlvbnNcIjoxOCxcIi4uL3V0aWxzXCI6NDMsXCIuLi91dGlscy9icm93c2VyXCI6MzYsXCIuL2Jhc2VcIjo2fV0sMTE6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KFwiLi91dGlscy9yYWZcIiksaT10KFwiLi91dGlscy93aW5kb3dcIikuZ2V0V2luZG93LG89dChcIi4vdXRpbHMvaXNcIikscz10KFwiLi91dGlscy9kb21VdGlsc1wiKSxhPXQoXCIuL0ludGVyYWN0aW9uXCIpLGM9dChcIi4vZGVmYXVsdE9wdGlvbnNcIiksbD17ZGVmYXVsdHM6e2VuYWJsZWQ6ITEsY29udGFpbmVyOm51bGwsbWFyZ2luOjYwLHNwZWVkOjMwMH0saW50ZXJhY3Rpb246bnVsbCxpOm51bGwseDowLHk6MCxpc1Njcm9sbGluZzohMSxwcmV2VGltZTowLHN0YXJ0OmZ1bmN0aW9uKHQpe2wuaXNTY3JvbGxpbmc9ITAsci5jYW5jZWwobC5pKSxsLmludGVyYWN0aW9uPXQsbC5wcmV2VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxsLmk9ci5yZXF1ZXN0KGwuc2Nyb2xsKX0sc3RvcDpmdW5jdGlvbigpe2wuaXNTY3JvbGxpbmc9ITEsci5jYW5jZWwobC5pKX0sc2Nyb2xsOmZ1bmN0aW9uKCl7dmFyIHQ9bC5pbnRlcmFjdGlvbi50YXJnZXQub3B0aW9uc1tsLmludGVyYWN0aW9uLnByZXBhcmVkLm5hbWVdLmF1dG9TY3JvbGwsZT10LmNvbnRhaW5lcnx8aShsLmludGVyYWN0aW9uLmVsZW1lbnQpLG49KG5ldyBEYXRlKS5nZXRUaW1lKCkscz0obi1sLnByZXZUaW1lKS8xZTMsYT10LnNwZWVkKnM7YT49MSYmKG8ud2luZG93KGUpP2Uuc2Nyb2xsQnkobC54KmEsbC55KmEpOmUmJihlLnNjcm9sbExlZnQrPWwueCphLGUuc2Nyb2xsVG9wKz1sLnkqYSksbC5wcmV2VGltZT1uKSxsLmlzU2Nyb2xsaW5nJiYoci5jYW5jZWwobC5pKSxsLmk9ci5yZXF1ZXN0KGwuc2Nyb2xsKSl9LGNoZWNrOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5vcHRpb25zO3JldHVybiBuW2VdLmF1dG9TY3JvbGwmJm5bZV0uYXV0b1Njcm9sbC5lbmFibGVkfSxvbkludGVyYWN0aW9uTW92ZTpmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5wb2ludGVyO2lmKGUuaW50ZXJhY3RpbmcoKSYmbC5jaGVjayhlLnRhcmdldCxlLnByZXBhcmVkLm5hbWUpKXtpZihlLnNpbXVsYXRpb24pcmV0dXJuIHZvaWQobC54PWwueT0wKTt2YXIgcj12b2lkIDAsYT12b2lkIDAsYz12b2lkIDAscD12b2lkIDAsdT1lLnRhcmdldC5vcHRpb25zW2UucHJlcGFyZWQubmFtZV0uYXV0b1Njcm9sbCxkPXUuY29udGFpbmVyfHxpKGUuZWxlbWVudCk7aWYoby53aW5kb3coZCkpcD1uLmNsaWVudFg8bC5tYXJnaW4scj1uLmNsaWVudFk8bC5tYXJnaW4sYT1uLmNsaWVudFg+ZC5pbm5lcldpZHRoLWwubWFyZ2luLGM9bi5jbGllbnRZPmQuaW5uZXJIZWlnaHQtbC5tYXJnaW47ZWxzZXt2YXIgZj1zLmdldEVsZW1lbnRDbGllbnRSZWN0KGQpO3A9bi5jbGllbnRYPGYubGVmdCtsLm1hcmdpbixyPW4uY2xpZW50WTxmLnRvcCtsLm1hcmdpbixhPW4uY2xpZW50WD5mLnJpZ2h0LWwubWFyZ2luLGM9bi5jbGllbnRZPmYuYm90dG9tLWwubWFyZ2lufWwueD1hPzE6cD8tMTowLGwueT1jPzE6cj8tMTowLGwuaXNTY3JvbGxpbmd8fChsLm1hcmdpbj11Lm1hcmdpbixsLnNwZWVkPXUuc3BlZWQsbC5zdGFydChlKSl9fX07YS5zaWduYWxzLm9uKFwic3RvcC1hY3RpdmVcIixmdW5jdGlvbigpe2wuc3RvcCgpfSksYS5zaWduYWxzLm9uKFwiYWN0aW9uLW1vdmVcIixsLm9uSW50ZXJhY3Rpb25Nb3ZlKSxjLnBlckFjdGlvbi5hdXRvU2Nyb2xsPWwuZGVmYXVsdHMsZS5leHBvcnRzPWx9LHtcIi4vSW50ZXJhY3Rpb25cIjo1LFwiLi9kZWZhdWx0T3B0aW9uc1wiOjE4LFwiLi91dGlscy9kb21VdGlsc1wiOjM4LFwiLi91dGlscy9pc1wiOjQ1LFwiLi91dGlscy9yYWZcIjo0OSxcIi4vdXRpbHMvd2luZG93XCI6NTF9XSwxMjpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPXQoXCIuLi9JbnRlcmFjdGFibGVcIiksaT10KFwiLi4vYWN0aW9ucy9iYXNlXCIpLG89dChcIi4uL3V0aWxzL2lzXCIpLHM9dChcIi4uL3V0aWxzL2RvbVV0aWxzXCIpLGE9dChcIi4uL3V0aWxzXCIpLGM9YS53YXJuT25jZTtyLnByb3RvdHlwZS5nZXRBY3Rpb249ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9dGhpcy5kZWZhdWx0QWN0aW9uQ2hlY2tlcih0LGUsbixyKTtyZXR1cm4gdGhpcy5vcHRpb25zLmFjdGlvbkNoZWNrZXI/dGhpcy5vcHRpb25zLmFjdGlvbkNoZWNrZXIodCxlLGksdGhpcyxyLG4pOml9LHIucHJvdG90eXBlLmlnbm9yZUZyb209YyhmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmFja0NvbXBhdE9wdGlvbihcImlnbm9yZUZyb21cIix0KX0sXCJJbnRlcmFjdGFibGUuaWdub3JlRm9ybSgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBJbnRlcmFjdGJsZS5kcmFnZ2FibGUoe2lnbm9yZUZyb206IG5ld1ZhbHVlfSkuXCIpLHIucHJvdG90eXBlLmFsbG93RnJvbT1jKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9iYWNrQ29tcGF0T3B0aW9uKFwiYWxsb3dGcm9tXCIsdCl9LFwiSW50ZXJhY3RhYmxlLmFsbG93Rm9ybSgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBJbnRlcmFjdGJsZS5kcmFnZ2FibGUoe2FsbG93RnJvbTogbmV3VmFsdWV9KS5cIiksci5wcm90b3R5cGUudGVzdElnbm9yZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuISghdHx8IW8uZWxlbWVudChuKSkmJihvLnN0cmluZyh0KT9zLm1hdGNoZXNVcFRvKG4sdCxlKTohIW8uZWxlbWVudCh0KSYmcy5ub2RlQ29udGFpbnModCxuKSl9LHIucHJvdG90eXBlLnRlc3RBbGxvdz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIXR8fCEhby5lbGVtZW50KG4pJiYoby5zdHJpbmcodCk/cy5tYXRjaGVzVXBUbyhuLHQsZSk6ISFvLmVsZW1lbnQodCkmJnMubm9kZUNvbnRhaW5zKHQsbikpfSxyLnByb3RvdHlwZS50ZXN0SWdub3JlQWxsb3c9ZnVuY3Rpb24odCxlLG4pe3JldHVybiF0aGlzLnRlc3RJZ25vcmUodC5pZ25vcmVGcm9tLGUsbikmJnRoaXMudGVzdEFsbG93KHQuYWxsb3dGcm9tLGUsbil9LHIucHJvdG90eXBlLmFjdGlvbkNoZWNrZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG8uZnVuY3Rpb24odCk/KHRoaXMub3B0aW9ucy5hY3Rpb25DaGVja2VyPXQsdGhpcyk6bnVsbD09PXQ/KGRlbGV0ZSB0aGlzLm9wdGlvbnMuYWN0aW9uQ2hlY2tlcix0aGlzKTp0aGlzLm9wdGlvbnMuYWN0aW9uQ2hlY2tlcn0sci5wcm90b3R5cGUuc3R5bGVDdXJzb3I9ZnVuY3Rpb24odCl7cmV0dXJuIG8uYm9vbCh0KT8odGhpcy5vcHRpb25zLnN0eWxlQ3Vyc29yPXQsdGhpcyk6bnVsbD09PXQ/KGRlbGV0ZSB0aGlzLm9wdGlvbnMuc3R5bGVDdXJzb3IsdGhpcyk6dGhpcy5vcHRpb25zLnN0eWxlQ3Vyc29yfSxyLnByb3RvdHlwZS5kZWZhdWx0QWN0aW9uQ2hlY2tlcj1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89dGhpcy5nZXRSZWN0KHIpLHM9ZS5idXR0b25zfHx7MDoxLDE6NCwzOjgsNDoxNn1bZS5idXR0b25dLGE9bnVsbCxjPTA7YzxpLm5hbWVzLmxlbmd0aDtjKyspe3ZhciBsO2w9aS5uYW1lc1tjXTt2YXIgcD1sO2lmKCghbi5wb2ludGVySXNEb3dufHwhL21vdXNlfHBvaW50ZXIvLnRlc3Qobi5wb2ludGVyVHlwZSl8fDAhPShzJnRoaXMub3B0aW9uc1twXS5tb3VzZUJ1dHRvbnMpKSYmKGE9aVtwXS5jaGVja2VyKHQsZSx0aGlzLHIsbixvKSkpcmV0dXJuIGF9fX0se1wiLi4vSW50ZXJhY3RhYmxlXCI6NCxcIi4uL2FjdGlvbnMvYmFzZVwiOjYsXCIuLi91dGlsc1wiOjQzLFwiLi4vdXRpbHMvZG9tVXRpbHNcIjozOCxcIi4uL3V0aWxzL2lzXCI6NDV9XSwxMzpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlLG4scil7cmV0dXJuIHYuaXMub2JqZWN0KHQpJiZlLnRlc3RJZ25vcmVBbGxvdyhlLm9wdGlvbnNbdC5uYW1lXSxuLHIpJiZlLm9wdGlvbnNbdC5uYW1lXS5lbmFibGVkJiZhKGUsbix0KT90Om51bGx9ZnVuY3Rpb24gaSh0LGUsbixpLG8scyl7Zm9yKHZhciBhPTAsYz1pLmxlbmd0aDthPGM7YSsrKXt2YXIgbD1pW2FdLHA9b1thXSx1PXIobC5nZXRBY3Rpb24oZSxuLHQscCksbCxwLHMpO2lmKHUpcmV0dXJue2FjdGlvbjp1LHRhcmdldDpsLGVsZW1lbnQ6cH19cmV0dXJue319ZnVuY3Rpb24gbyh0LGUsbixyKXtmdW5jdGlvbiBvKHQpe3MucHVzaCh0KSxhLnB1c2goYyl9Zm9yKHZhciBzPVtdLGE9W10sYz1yO3YuaXMuZWxlbWVudChjKTspe3M9W10sYT1bXSxmLmludGVyYWN0YWJsZXMuZm9yRWFjaE1hdGNoKGMsbyk7dmFyIGw9aSh0LGUsbixzLGEscik7aWYobC5hY3Rpb24mJiFsLnRhcmdldC5vcHRpb25zW2wuYWN0aW9uLm5hbWVdLm1hbnVhbFN0YXJ0KXJldHVybiBsO2M9di5wYXJlbnROb2RlKGMpfXJldHVybnt9fWZ1bmN0aW9uIHModCxlKXt2YXIgbj1lLmFjdGlvbixyPWUudGFyZ2V0LGk9ZS5lbGVtZW50O2lmKG49bnx8e30sdC50YXJnZXQmJnQudGFyZ2V0Lm9wdGlvbnMuc3R5bGVDdXJzb3ImJih0LnRhcmdldC5fZG9jLmRvY3VtZW50RWxlbWVudC5zdHlsZS5jdXJzb3I9XCJcIiksdC50YXJnZXQ9cix0LmVsZW1lbnQ9aSx2LmNvcHlBY3Rpb24odC5wcmVwYXJlZCxuKSxyJiZyLm9wdGlvbnMuc3R5bGVDdXJzb3Ipe3ZhciBvPW4/dVtuLm5hbWVdLmdldEN1cnNvcihuKTpcIlwiO3QudGFyZ2V0Ll9kb2MuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmN1cnNvcj1vfWcuZmlyZShcInByZXBhcmVkXCIse2ludGVyYWN0aW9uOnR9KX1mdW5jdGlvbiBhKHQsZSxuKXt2YXIgcj10Lm9wdGlvbnMsaT1yW24ubmFtZV0ubWF4LG89cltuLm5hbWVdLm1heFBlckVsZW1lbnQscz0wLGE9MCxjPTA7aWYoaSYmbyYmaC5tYXhJbnRlcmFjdGlvbnMpe2Zvcih2YXIgbD0wO2w8Zi5pbnRlcmFjdGlvbnMubGVuZ3RoO2wrKyl7dmFyIHA7cD1mLmludGVyYWN0aW9uc1tsXTt2YXIgdT1wLGQ9dS5wcmVwYXJlZC5uYW1lO2lmKHUuaW50ZXJhY3RpbmcoKSl7aWYoKytzPj1oLm1heEludGVyYWN0aW9ucylyZXR1cm4hMTtpZih1LnRhcmdldD09PXQpe2lmKChhKz1kPT09bi5uYW1lfDApPj1pKXJldHVybiExO2lmKHUuZWxlbWVudD09PWUmJihjKyssZCE9PW4ubmFtZXx8Yz49bykpcmV0dXJuITF9fX1yZXR1cm4gaC5tYXhJbnRlcmFjdGlvbnM+MH19dmFyIGM9dChcIi4uL2ludGVyYWN0XCIpLGw9dChcIi4uL0ludGVyYWN0YWJsZVwiKSxwPXQoXCIuLi9JbnRlcmFjdGlvblwiKSx1PXQoXCIuLi9hY3Rpb25zL2Jhc2VcIiksZD10KFwiLi4vZGVmYXVsdE9wdGlvbnNcIiksZj10KFwiLi4vc2NvcGVcIiksdj10KFwiLi4vdXRpbHNcIiksZz10KFwiLi4vdXRpbHMvU2lnbmFsc1wiKS5uZXcoKTt0KFwiLi9JbnRlcmFjdGFibGVNZXRob2RzXCIpO3ZhciBoPXtzaWduYWxzOmcsd2l0aGluSW50ZXJhY3Rpb25MaW1pdDphLG1heEludGVyYWN0aW9uczoxLzAsZGVmYXVsdHM6e3BlckFjdGlvbjp7bWFudWFsU3RhcnQ6ITEsbWF4OjEvMCxtYXhQZXJFbGVtZW50OjEsYWxsb3dGcm9tOm51bGwsaWdub3JlRnJvbTpudWxsLG1vdXNlQnV0dG9uczoxfX0sc2V0QWN0aW9uRGVmYXVsdHM6ZnVuY3Rpb24odCl7di5leHRlbmQodC5kZWZhdWx0cyxoLmRlZmF1bHRzLnBlckFjdGlvbil9LHZhbGlkYXRlQWN0aW9uOnJ9O3Auc2lnbmFscy5vbihcImRvd25cIixmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5wb2ludGVyLHI9dC5ldmVudCxpPXQuZXZlbnRUYXJnZXQ7aWYoIWUuaW50ZXJhY3RpbmcoKSl7cyhlLG8oZSxuLHIsaSkpfX0pLHAuc2lnbmFscy5vbihcIm1vdmVcIixmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5wb2ludGVyLHI9dC5ldmVudCxpPXQuZXZlbnRUYXJnZXQ7aWYoXCJtb3VzZVwiPT09ZS5wb2ludGVyVHlwZSYmIWUucG9pbnRlcklzRG93biYmIWUuaW50ZXJhY3RpbmcoKSl7cyhlLG8oZSxuLHIsaSkpfX0pLHAuc2lnbmFscy5vbihcIm1vdmVcIixmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5ldmVudDtpZihlLnBvaW50ZXJJc0Rvd24mJiFlLmludGVyYWN0aW5nKCkmJmUucG9pbnRlcldhc01vdmVkJiZlLnByZXBhcmVkLm5hbWUpe2cuZmlyZShcImJlZm9yZS1zdGFydFwiLHQpO3ZhciByPWUudGFyZ2V0O2UucHJlcGFyZWQubmFtZSYmciYmKHIub3B0aW9uc1tlLnByZXBhcmVkLm5hbWVdLm1hbnVhbFN0YXJ0fHwhYShyLGUuZWxlbWVudCxlLnByZXBhcmVkKT9lLnN0b3Aobik6ZS5zdGFydChlLnByZXBhcmVkLHIsZS5lbGVtZW50KSl9fSkscC5zaWduYWxzLm9uKFwic3RvcFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb24sbj1lLnRhcmdldDtuJiZuLm9wdGlvbnMuc3R5bGVDdXJzb3ImJihuLl9kb2MuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmN1cnNvcj1cIlwiKX0pLGMubWF4SW50ZXJhY3Rpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB2LmlzLm51bWJlcih0KT8oaC5tYXhJbnRlcmFjdGlvbnM9dCxjKTpoLm1heEludGVyYWN0aW9uc30sbC5zZXR0aW5nc01ldGhvZHMucHVzaChcInN0eWxlQ3Vyc29yXCIpLGwuc2V0dGluZ3NNZXRob2RzLnB1c2goXCJhY3Rpb25DaGVja2VyXCIpLGwuc2V0dGluZ3NNZXRob2RzLnB1c2goXCJpZ25vcmVGcm9tXCIpLGwuc2V0dGluZ3NNZXRob2RzLnB1c2goXCJhbGxvd0Zyb21cIiksZC5iYXNlLmFjdGlvbkNoZWNrZXI9bnVsbCxkLmJhc2Uuc3R5bGVDdXJzb3I9ITAsdi5leHRlbmQoZC5wZXJBY3Rpb24saC5kZWZhdWx0cy5wZXJBY3Rpb24pLGUuZXhwb3J0cz1ofSx7XCIuLi9JbnRlcmFjdGFibGVcIjo0LFwiLi4vSW50ZXJhY3Rpb25cIjo1LFwiLi4vYWN0aW9ucy9iYXNlXCI6NixcIi4uL2RlZmF1bHRPcHRpb25zXCI6MTgsXCIuLi9pbnRlcmFjdFwiOjIxLFwiLi4vc2NvcGVcIjozMyxcIi4uL3V0aWxzXCI6NDMsXCIuLi91dGlscy9TaWduYWxzXCI6MzQsXCIuL0ludGVyYWN0YWJsZU1ldGhvZHNcIjoxMn1dLDE0OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe2lmKCFlKXJldHVybiExO3ZhciBuPWUub3B0aW9ucy5kcmFnLnN0YXJ0QXhpcztyZXR1cm5cInh5XCI9PT10fHxcInh5XCI9PT1ufHxuPT09dH12YXIgaT10KFwiLi9iYXNlXCIpLG89dChcIi4uL3Njb3BlXCIpLHM9dChcIi4uL3V0aWxzL2lzXCIpLGE9dChcIi4uL3V0aWxzL2RvbVV0aWxzXCIpLGM9YS5wYXJlbnROb2RlO2kuc2V0QWN0aW9uRGVmYXVsdHModChcIi4uL2FjdGlvbnMvZHJhZ1wiKSksaS5zaWduYWxzLm9uKFwiYmVmb3JlLXN0YXJ0XCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQuZXZlbnRUYXJnZXQsYT10LmR4LGw9dC5keTtpZihcImRyYWdcIj09PWUucHJlcGFyZWQubmFtZSl7dmFyIHA9TWF0aC5hYnMoYSksdT1NYXRoLmFicyhsKSxkPWUudGFyZ2V0Lm9wdGlvbnMuZHJhZyxmPWQuc3RhcnRBeGlzLHY9cD51P1wieFwiOnA8dT9cInlcIjpcInh5XCI7aWYoZS5wcmVwYXJlZC5heGlzPVwic3RhcnRcIj09PWQubG9ja0F4aXM/dlswXTpkLmxvY2tBeGlzLFwieHlcIiE9PXYmJlwieHlcIiE9PWYmJmYhPT12KXtlLnByZXBhcmVkLm5hbWU9bnVsbDtmb3IodmFyIGc9bixoPWZ1bmN0aW9uKHQpe2lmKHQhPT1lLnRhcmdldCl7dmFyIG89ZS50YXJnZXQub3B0aW9ucy5kcmFnO2lmKCFvLm1hbnVhbFN0YXJ0JiZ0LnRlc3RJZ25vcmVBbGxvdyhvLGcsbikpe3ZhciBzPXQuZ2V0QWN0aW9uKGUuZG93blBvaW50ZXIsZS5kb3duRXZlbnQsZSxnKTtpZihzJiZcImRyYWdcIj09PXMubmFtZSYmcih2LHQpJiZpLnZhbGlkYXRlQWN0aW9uKHMsdCxnLG4pKXJldHVybiB0fX19O3MuZWxlbWVudChnKTspe3ZhciBtPW8uaW50ZXJhY3RhYmxlcy5mb3JFYWNoTWF0Y2goZyxoKTtpZihtKXtlLnByZXBhcmVkLm5hbWU9XCJkcmFnXCIsZS50YXJnZXQ9bSxlLmVsZW1lbnQ9ZzticmVha31nPWMoZyl9fX19KX0se1wiLi4vYWN0aW9ucy9kcmFnXCI6NyxcIi4uL3Njb3BlXCI6MzMsXCIuLi91dGlscy9kb21VdGlsc1wiOjM4LFwiLi4vdXRpbHMvaXNcIjo0NSxcIi4vYmFzZVwiOjEzfV0sMTU6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt0KFwiLi9iYXNlXCIpLnNldEFjdGlvbkRlZmF1bHRzKHQoXCIuLi9hY3Rpb25zL2dlc3R1cmVcIikpfSx7XCIuLi9hY3Rpb25zL2dlc3R1cmVcIjo5LFwiLi9iYXNlXCI6MTN9XSwxNjpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7dmFyIGU9dC5wcmVwYXJlZCYmdC5wcmVwYXJlZC5uYW1lO2lmKCFlKXJldHVybiBudWxsO3ZhciBuPXQudGFyZ2V0Lm9wdGlvbnM7cmV0dXJuIG5bZV0uaG9sZHx8bltlXS5kZWxheX12YXIgaT10KFwiLi9iYXNlXCIpLG89dChcIi4uL0ludGVyYWN0aW9uXCIpO2kuZGVmYXVsdHMucGVyQWN0aW9uLmhvbGQ9MCxpLmRlZmF1bHRzLnBlckFjdGlvbi5kZWxheT0wLG8uc2lnbmFscy5vbihcIm5ld1wiLGZ1bmN0aW9uKHQpe3QuYXV0b1N0YXJ0SG9sZFRpbWVyPW51bGx9KSxpLnNpZ25hbHMub24oXCJwcmVwYXJlZFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb24sbj1yKGUpO24+MCYmKGUuYXV0b1N0YXJ0SG9sZFRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnN0YXJ0KGUucHJlcGFyZWQsZS50YXJnZXQsZS5lbGVtZW50KX0sbikpfSksby5zaWduYWxzLm9uKFwibW92ZVwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb24sbj10LmR1cGxpY2F0ZTtlLnBvaW50ZXJXYXNNb3ZlZCYmIW4mJmNsZWFyVGltZW91dChlLmF1dG9TdGFydEhvbGRUaW1lcil9KSxpLnNpZ25hbHMub24oXCJiZWZvcmUtc3RhcnRcIixmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uO3IoZSk+MCYmKGUucHJlcGFyZWQubmFtZT1udWxsKX0pLGUuZXhwb3J0cz17Z2V0SG9sZER1cmF0aW9uOnJ9fSx7XCIuLi9JbnRlcmFjdGlvblwiOjUsXCIuL2Jhc2VcIjoxM31dLDE3OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dChcIi4vYmFzZVwiKS5zZXRBY3Rpb25EZWZhdWx0cyh0KFwiLi4vYWN0aW9ucy9yZXNpemVcIikpfSx7XCIuLi9hY3Rpb25zL3Jlc2l6ZVwiOjEwLFwiLi9iYXNlXCI6MTN9XSwxODpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz17YmFzZTp7YWNjZXB0Om51bGwscHJldmVudERlZmF1bHQ6XCJhdXRvXCIsZGVsdGFTb3VyY2U6XCJwYWdlXCJ9LHBlckFjdGlvbjp7b3JpZ2luOnt4OjAseTowfSxpbmVydGlhOntlbmFibGVkOiExLHJlc2lzdGFuY2U6MTAsbWluU3BlZWQ6MTAwLGVuZFNwZWVkOjEwLGFsbG93UmVzdW1lOiEwLHNtb290aEVuZER1cmF0aW9uOjMwMH19fX0se31dLDE5OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dChcIi4vaW5lcnRpYVwiKSx0KFwiLi9tb2RpZmllcnMvc25hcFwiKSx0KFwiLi9tb2RpZmllcnMvcmVzdHJpY3RcIiksdChcIi4vcG9pbnRlckV2ZW50cy9iYXNlXCIpLHQoXCIuL3BvaW50ZXJFdmVudHMvaG9sZFJlcGVhdFwiKSx0KFwiLi9wb2ludGVyRXZlbnRzL2ludGVyYWN0YWJsZVRhcmdldHNcIiksdChcIi4vYXV0b1N0YXJ0L2hvbGRcIiksdChcIi4vYWN0aW9ucy9nZXN0dXJlXCIpLHQoXCIuL2FjdGlvbnMvcmVzaXplXCIpLHQoXCIuL2FjdGlvbnMvZHJhZ1wiKSx0KFwiLi9hY3Rpb25zL2Ryb3BcIiksdChcIi4vbW9kaWZpZXJzL3NuYXBTaXplXCIpLHQoXCIuL21vZGlmaWVycy9yZXN0cmljdEVkZ2VzXCIpLHQoXCIuL21vZGlmaWVycy9yZXN0cmljdFNpemVcIiksdChcIi4vYXV0b1N0YXJ0L2dlc3R1cmVcIiksdChcIi4vYXV0b1N0YXJ0L3Jlc2l6ZVwiKSx0KFwiLi9hdXRvU3RhcnQvZHJhZ1wiKSx0KFwiLi9pbnRlcmFjdGFibGVQcmV2ZW50RGVmYXVsdC5qc1wiKSx0KFwiLi9hdXRvU2Nyb2xsXCIpLGUuZXhwb3J0cz10KFwiLi9pbnRlcmFjdFwiKX0se1wiLi9hY3Rpb25zL2RyYWdcIjo3LFwiLi9hY3Rpb25zL2Ryb3BcIjo4LFwiLi9hY3Rpb25zL2dlc3R1cmVcIjo5LFwiLi9hY3Rpb25zL3Jlc2l6ZVwiOjEwLFwiLi9hdXRvU2Nyb2xsXCI6MTEsXCIuL2F1dG9TdGFydC9kcmFnXCI6MTQsXCIuL2F1dG9TdGFydC9nZXN0dXJlXCI6MTUsXCIuL2F1dG9TdGFydC9ob2xkXCI6MTYsXCIuL2F1dG9TdGFydC9yZXNpemVcIjoxNyxcIi4vaW5lcnRpYVwiOjIwLFwiLi9pbnRlcmFjdFwiOjIxLFwiLi9pbnRlcmFjdGFibGVQcmV2ZW50RGVmYXVsdC5qc1wiOjIyLFwiLi9tb2RpZmllcnMvcmVzdHJpY3RcIjoyNCxcIi4vbW9kaWZpZXJzL3Jlc3RyaWN0RWRnZXNcIjoyNSxcIi4vbW9kaWZpZXJzL3Jlc3RyaWN0U2l6ZVwiOjI2LFwiLi9tb2RpZmllcnMvc25hcFwiOjI3LFwiLi9tb2RpZmllcnMvc25hcFNpemVcIjoyOCxcIi4vcG9pbnRlckV2ZW50cy9iYXNlXCI6MzAsXCIuL3BvaW50ZXJFdmVudHMvaG9sZFJlcGVhdFwiOjMxLFwiLi9wb2ludGVyRXZlbnRzL2ludGVyYWN0YWJsZVRhcmdldHNcIjozMn1dLDIwOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe3ZhciBuPXQudGFyZ2V0Lm9wdGlvbnNbdC5wcmVwYXJlZC5uYW1lXS5pbmVydGlhLHI9bi5yZXNpc3RhbmNlLGk9LU1hdGgubG9nKG4uZW5kU3BlZWQvZS52MCkvcjtlLngwPXQucHJldkV2ZW50LnBhZ2VYLGUueTA9dC5wcmV2RXZlbnQucGFnZVksZS50MD1lLnN0YXJ0RXZlbnQudGltZVN0YW1wLzFlMyxlLnN4PWUuc3k9MCxlLm1vZGlmaWVkWGU9ZS54ZT0oZS52eDAtaSkvcixlLm1vZGlmaWVkWWU9ZS55ZT0oZS52eTAtaSkvcixlLnRlPWksZS5sYW1iZGFfdjA9ci9lLnYwLGUub25lX3ZlX3YwPTEtbi5lbmRTcGVlZC9lLnYwfWZ1bmN0aW9uIGkoKXtzKHRoaXMpLHAuc2V0Q29vcmREZWx0YXModGhpcy5wb2ludGVyRGVsdGEsdGhpcy5wcmV2Q29vcmRzLHRoaXMuY3VyQ29vcmRzKTt2YXIgdD10aGlzLmluZXJ0aWFTdGF0dXMsZT10aGlzLnRhcmdldC5vcHRpb25zW3RoaXMucHJlcGFyZWQubmFtZV0uaW5lcnRpYSxuPWUucmVzaXN0YW5jZSxyPShuZXcgRGF0ZSkuZ2V0VGltZSgpLzFlMy10LnQwO2lmKHI8dC50ZSl7dmFyIGk9MS0oTWF0aC5leHAoLW4qciktdC5sYW1iZGFfdjApL3Qub25lX3ZlX3YwO2lmKHQubW9kaWZpZWRYZT09PXQueGUmJnQubW9kaWZpZWRZZT09PXQueWUpdC5zeD10LnhlKmksdC5zeT10LnllKmk7ZWxzZXt2YXIgbz1wLmdldFF1YWRyYXRpY0N1cnZlUG9pbnQoMCwwLHQueGUsdC55ZSx0Lm1vZGlmaWVkWGUsdC5tb2RpZmllZFllLGkpO3Quc3g9by54LHQuc3k9by55fXRoaXMuZG9Nb3ZlKCksdC5pPXUucmVxdWVzdCh0aGlzLmJvdW5kSW5lcnRpYUZyYW1lKX1lbHNlIHQuc3g9dC5tb2RpZmllZFhlLHQuc3k9dC5tb2RpZmllZFllLHRoaXMuZG9Nb3ZlKCksdGhpcy5lbmQodC5zdGFydEV2ZW50KSx0LmFjdGl2ZT0hMSx0aGlzLnNpbXVsYXRpb249bnVsbDtwLmNvcHlDb29yZHModGhpcy5wcmV2Q29vcmRzLHRoaXMuY3VyQ29vcmRzKX1mdW5jdGlvbiBvKCl7cyh0aGlzKTt2YXIgdD10aGlzLmluZXJ0aWFTdGF0dXMsZT0obmV3IERhdGUpLmdldFRpbWUoKS10LnQwLG49dGhpcy50YXJnZXQub3B0aW9uc1t0aGlzLnByZXBhcmVkLm5hbWVdLmluZXJ0aWEuc21vb3RoRW5kRHVyYXRpb247ZTxuPyh0LnN4PXAuZWFzZU91dFF1YWQoZSwwLHQueGUsbiksdC5zeT1wLmVhc2VPdXRRdWFkKGUsMCx0LnllLG4pLHRoaXMucG9pbnRlck1vdmUodC5zdGFydEV2ZW50LHQuc3RhcnRFdmVudCksdC5pPXUucmVxdWVzdCh0aGlzLmJvdW5kU21vb3RoRW5kRnJhbWUpKToodC5zeD10LnhlLHQuc3k9dC55ZSx0aGlzLnBvaW50ZXJNb3ZlKHQuc3RhcnRFdmVudCx0LnN0YXJ0RXZlbnQpLHRoaXMuZW5kKHQuc3RhcnRFdmVudCksdC5zbW9vdGhFbmQ9dC5hY3RpdmU9ITEsdGhpcy5zaW11bGF0aW9uPW51bGwpfWZ1bmN0aW9uIHModCl7dmFyIGU9dC5pbmVydGlhU3RhdHVzO2lmKGUuYWN0aXZlKXt2YXIgbj1lLnVwQ29vcmRzLnBhZ2Uscj1lLnVwQ29vcmRzLmNsaWVudDtwLnNldENvb3Jkcyh0LmN1ckNvb3Jkcyxbe3BhZ2VYOm4ueCtlLnN4LHBhZ2VZOm4ueStlLnN5LGNsaWVudFg6ci54K2Uuc3gsY2xpZW50WTpyLnkrZS5zeX1dKX19dmFyIGE9dChcIi4vSW50ZXJhY3RFdmVudFwiKSxjPXQoXCIuL0ludGVyYWN0aW9uXCIpLGw9dChcIi4vbW9kaWZpZXJzL2Jhc2VcIikscD10KFwiLi91dGlsc1wiKSx1PXQoXCIuL3V0aWxzL3JhZlwiKTtjLnNpZ25hbHMub24oXCJuZXdcIixmdW5jdGlvbih0KXt0LmluZXJ0aWFTdGF0dXM9e2FjdGl2ZTohMSxzbW9vdGhFbmQ6ITEsYWxsb3dSZXN1bWU6ITEsc3RhcnRFdmVudDpudWxsLHVwQ29vcmRzOnt9LHhlOjAseWU6MCxzeDowLHN5OjAsdDA6MCx2eDA6MCx2eXM6MCxkdXJhdGlvbjowLGxhbWJkYV92MDowLG9uZV92ZV92MDowLGk6bnVsbH0sdC5ib3VuZEluZXJ0aWFGcmFtZT1mdW5jdGlvbigpe3JldHVybiBpLmFwcGx5KHQpfSx0LmJvdW5kU21vb3RoRW5kRnJhbWU9ZnVuY3Rpb24oKXtyZXR1cm4gby5hcHBseSh0KX19KSxjLnNpZ25hbHMub24oXCJkb3duXCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQuZXZlbnQscj10LnBvaW50ZXIsaT10LmV2ZW50VGFyZ2V0LG89ZS5pbmVydGlhU3RhdHVzO2lmKG8uYWN0aXZlKWZvcih2YXIgcz1pO3AuaXMuZWxlbWVudChzKTspe2lmKHM9PT1lLmVsZW1lbnQpe3UuY2FuY2VsKG8uaSksby5hY3RpdmU9ITEsZS5zaW11bGF0aW9uPW51bGwsZS51cGRhdGVQb2ludGVyKHIpLHAuc2V0Q29vcmRzKGUuY3VyQ29vcmRzLGUucG9pbnRlcnMpO3ZhciBkPXtpbnRlcmFjdGlvbjplfTtjLnNpZ25hbHMuZmlyZShcImJlZm9yZS1hY3Rpb24tbW92ZVwiLGQpLGMuc2lnbmFscy5maXJlKFwiYWN0aW9uLXJlc3VtZVwiLGQpO3ZhciBmPW5ldyBhKGUsbixlLnByZXBhcmVkLm5hbWUsXCJpbmVydGlhcmVzdW1lXCIsZS5lbGVtZW50KTtlLnRhcmdldC5maXJlKGYpLGUucHJldkV2ZW50PWYsbC5yZXNldFN0YXR1c2VzKGUubW9kaWZpZXJTdGF0dXNlcykscC5jb3B5Q29vcmRzKGUucHJldkNvb3JkcyxlLmN1ckNvb3Jkcyk7YnJlYWt9cz1wLnBhcmVudE5vZGUocyl9fSksYy5zaWduYWxzLm9uKFwidXBcIixmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5ldmVudCxpPWUuaW5lcnRpYVN0YXR1cztpZihlLmludGVyYWN0aW5nKCkmJiFpLmFjdGl2ZSl7dmFyIG89ZS50YXJnZXQscz1vJiZvLm9wdGlvbnMsYz1zJiZlLnByZXBhcmVkLm5hbWUmJnNbZS5wcmVwYXJlZC5uYW1lXS5pbmVydGlhLGQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksZj17fSx2PXAuZXh0ZW5kKHt9LGUuY3VyQ29vcmRzLnBhZ2UpLGc9ZS5wb2ludGVyRGVsdGEuY2xpZW50LnNwZWVkLGg9ITEsbT12b2lkIDAseT1jJiZjLmVuYWJsZWQmJlwiZ2VzdHVyZVwiIT09ZS5wcmVwYXJlZC5uYW1lJiZuIT09aS5zdGFydEV2ZW50LHg9eSYmZC1lLmN1ckNvb3Jkcy50aW1lU3RhbXA8NTAmJmc+Yy5taW5TcGVlZCYmZz5jLmVuZFNwZWVkLGI9e2ludGVyYWN0aW9uOmUscGFnZUNvb3Jkczp2LHN0YXR1c2VzOmYscHJlRW5kOiEwLHJlcXVpcmVFbmRPbmx5OiEwfTt5JiYheCYmKGwucmVzZXRTdGF0dXNlcyhmKSxtPWwuc2V0QWxsKGIpLG0uc2hvdWxkTW92ZSYmbS5sb2NrZWQmJihoPSEwKSksKHh8fGgpJiYocC5jb3B5Q29vcmRzKGkudXBDb29yZHMsZS5jdXJDb29yZHMpLGUucG9pbnRlcnNbMF09aS5zdGFydEV2ZW50PW5ldyBhKGUsbixlLnByZXBhcmVkLm5hbWUsXCJpbmVydGlhc3RhcnRcIixlLmVsZW1lbnQpLGkudDA9ZCxpLmFjdGl2ZT0hMCxpLmFsbG93UmVzdW1lPWMuYWxsb3dSZXN1bWUsZS5zaW11bGF0aW9uPWksby5maXJlKGkuc3RhcnRFdmVudCkseD8oaS52eDA9ZS5wb2ludGVyRGVsdGEuY2xpZW50LnZ4LGkudnkwPWUucG9pbnRlckRlbHRhLmNsaWVudC52eSxpLnYwPWcscihlLGkpLHAuZXh0ZW5kKHYsZS5jdXJDb29yZHMucGFnZSksdi54Kz1pLnhlLHYueSs9aS55ZSxsLnJlc2V0U3RhdHVzZXMoZiksbT1sLnNldEFsbChiKSxpLm1vZGlmaWVkWGUrPW0uZHgsaS5tb2RpZmllZFllKz1tLmR5LGkuaT11LnJlcXVlc3QoZS5ib3VuZEluZXJ0aWFGcmFtZSkpOihpLnNtb290aEVuZD0hMCxpLnhlPW0uZHgsaS55ZT1tLmR5LGkuc3g9aS5zeT0wLGkuaT11LnJlcXVlc3QoZS5ib3VuZFNtb290aEVuZEZyYW1lKSkpfX0pLGMuc2lnbmFscy5vbihcInN0b3AtYWN0aXZlXCIsZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPWUuaW5lcnRpYVN0YXR1cztuLmFjdGl2ZSYmKHUuY2FuY2VsKG4uaSksbi5hY3RpdmU9ITEsZS5zaW11bGF0aW9uPW51bGwpfSl9LHtcIi4vSW50ZXJhY3RFdmVudFwiOjMsXCIuL0ludGVyYWN0aW9uXCI6NSxcIi4vbW9kaWZpZXJzL2Jhc2VcIjoyMyxcIi4vdXRpbHNcIjo0MyxcIi4vdXRpbHMvcmFmXCI6NDl9XSwyMTpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlKXt2YXIgbj1hLmludGVyYWN0YWJsZXMuZ2V0KHQsZSk7cmV0dXJuIG58fChuPW5ldyBjKHQsZSksbi5ldmVudHMuZ2xvYmFsPXApLG59dmFyIGk9dChcIi4vdXRpbHMvYnJvd3NlclwiKSxvPXQoXCIuL3V0aWxzL2V2ZW50c1wiKSxzPXQoXCIuL3V0aWxzXCIpLGE9dChcIi4vc2NvcGVcIiksYz10KFwiLi9JbnRlcmFjdGFibGVcIiksbD10KFwiLi9JbnRlcmFjdGlvblwiKSxwPXt9O3IuaXNTZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4tMSE9PWEuaW50ZXJhY3RhYmxlcy5pbmRleE9mRWxlbWVudCh0LGUmJmUuY29udGV4dCl9LHIub249ZnVuY3Rpb24odCxlLG4pe2lmKHMuaXMuc3RyaW5nKHQpJiYtMSE9PXQuc2VhcmNoKFwiIFwiKSYmKHQ9dC50cmltKCkuc3BsaXQoLyArLykpLHMuaXMuYXJyYXkodCkpe2Zvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgbDtsPXRbaV07dmFyIHU9bDtyLm9uKHUsZSxuKX1yZXR1cm4gcn1pZihzLmlzLm9iamVjdCh0KSl7Zm9yKHZhciBkIGluIHQpci5vbihkLHRbZF0sZSk7cmV0dXJuIHJ9cmV0dXJuIHMuY29udGFpbnMoYy5ldmVudFR5cGVzLHQpP3BbdF0/cFt0XS5wdXNoKGUpOnBbdF09W2VdOm8uYWRkKGEuZG9jdW1lbnQsdCxlLHtvcHRpb25zOm59KSxyfSxyLm9mZj1mdW5jdGlvbih0LGUsbil7aWYocy5pcy5zdHJpbmcodCkmJi0xIT09dC5zZWFyY2goXCIgXCIpJiYodD10LnRyaW0oKS5zcGxpdCgvICsvKSkscy5pcy5hcnJheSh0KSl7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspe3ZhciBsO2w9dFtpXTt2YXIgdT1sO3Iub2ZmKHUsZSxuKX1yZXR1cm4gcn1pZihzLmlzLm9iamVjdCh0KSl7Zm9yKHZhciBkIGluIHQpci5vZmYoZCx0W2RdLGUpO3JldHVybiByfWlmKHMuY29udGFpbnMoYy5ldmVudFR5cGVzLHQpKXt2YXIgZj12b2lkIDA7dCBpbiBwJiYtMSE9PShmPXBbdF0uaW5kZXhPZihlKSkmJnBbdF0uc3BsaWNlKGYsMSl9ZWxzZSBvLnJlbW92ZShhLmRvY3VtZW50LHQsZSxuKTtyZXR1cm4gcn0sci5kZWJ1Zz1mdW5jdGlvbigpe3JldHVybiBhfSxyLmdldFBvaW50ZXJBdmVyYWdlPXMucG9pbnRlckF2ZXJhZ2Usci5nZXRUb3VjaEJCb3g9cy50b3VjaEJCb3gsci5nZXRUb3VjaERpc3RhbmNlPXMudG91Y2hEaXN0YW5jZSxyLmdldFRvdWNoQW5nbGU9cy50b3VjaEFuZ2xlLHIuZ2V0RWxlbWVudFJlY3Q9cy5nZXRFbGVtZW50UmVjdCxyLmdldEVsZW1lbnRDbGllbnRSZWN0PXMuZ2V0RWxlbWVudENsaWVudFJlY3Qsci5tYXRjaGVzU2VsZWN0b3I9cy5tYXRjaGVzU2VsZWN0b3Isci5jbG9zZXN0PXMuY2xvc2VzdCxyLnN1cHBvcnRzVG91Y2g9ZnVuY3Rpb24oKXtyZXR1cm4gaS5zdXBwb3J0c1RvdWNofSxyLnN1cHBvcnRzUG9pbnRlckV2ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGkuc3VwcG9ydHNQb2ludGVyRXZlbnR9LHIuc3RvcD1mdW5jdGlvbih0KXtmb3IodmFyIGU9YS5pbnRlcmFjdGlvbnMubGVuZ3RoLTE7ZT49MDtlLS0pYS5pbnRlcmFjdGlvbnNbZV0uc3RvcCh0KTtyZXR1cm4gcn0sci5wb2ludGVyTW92ZVRvbGVyYW5jZT1mdW5jdGlvbih0KXtyZXR1cm4gcy5pcy5udW1iZXIodCk/KGwucG9pbnRlck1vdmVUb2xlcmFuY2U9dCxyKTpsLnBvaW50ZXJNb3ZlVG9sZXJhbmNlfSxyLmFkZERvY3VtZW50PWEuYWRkRG9jdW1lbnQsci5yZW1vdmVEb2N1bWVudD1hLnJlbW92ZURvY3VtZW50LGEuaW50ZXJhY3Q9cixlLmV4cG9ydHM9cn0se1wiLi9JbnRlcmFjdGFibGVcIjo0LFwiLi9JbnRlcmFjdGlvblwiOjUsXCIuL3Njb3BlXCI6MzMsXCIuL3V0aWxzXCI6NDMsXCIuL3V0aWxzL2Jyb3dzZXJcIjozNixcIi4vdXRpbHMvZXZlbnRzXCI6Mzl9XSwyMjpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQuZXZlbnQ7ZS50YXJnZXQmJmUudGFyZ2V0LmNoZWNrQW5kUHJldmVudERlZmF1bHQobil9dmFyIGk9dChcIi4vSW50ZXJhY3RhYmxlXCIpLG89dChcIi4vSW50ZXJhY3Rpb25cIikscz10KFwiLi9zY29wZVwiKSxhPXQoXCIuL3V0aWxzL2lzXCIpLGM9dChcIi4vdXRpbHMvZXZlbnRzXCIpLGw9dChcIi4vdXRpbHMvZG9tVXRpbHNcIikscD1sLm5vZGVDb250YWlucyx1PWwubWF0Y2hlc1NlbGVjdG9yO2kucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKHQpe3JldHVybi9eKGFsd2F5c3xuZXZlcnxhdXRvKSQvLnRlc3QodCk/KHRoaXMub3B0aW9ucy5wcmV2ZW50RGVmYXVsdD10LHRoaXMpOmEuYm9vbCh0KT8odGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0PXQ/XCJhbHdheXNcIjpcIm5ldmVyXCIsdGhpcyk6dGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0fSxpLnByb3RvdHlwZS5jaGVja0FuZFByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9ucy5wcmV2ZW50RGVmYXVsdDtpZihcIm5ldmVyXCIhPT1lKXJldHVyblwiYWx3YXlzXCI9PT1lP3ZvaWQgdC5wcmV2ZW50RGVmYXVsdCgpOnZvaWQoYy5zdXBwb3J0c09wdGlvbnMmJi9edG91Y2goc3RhcnR8bW92ZSkkLy50ZXN0KHQudHlwZSl8fC9eKG1vdXNlfHBvaW50ZXJ8dG91Y2gpKihkb3dufHN0YXJ0KS9pLnRlc3QodC50eXBlKXx8YS5lbGVtZW50KHQudGFyZ2V0KSYmdSh0LnRhcmdldCxcImlucHV0LHNlbGVjdCx0ZXh0YXJlYSxbY29udGVudGVkaXRhYmxlPXRydWVdLFtjb250ZW50ZWRpdGFibGU9dHJ1ZV0gKlwiKXx8dC5wcmV2ZW50RGVmYXVsdCgpKX07Zm9yKHZhciBkPVtcImRvd25cIixcIm1vdmVcIixcInVwXCIsXCJjYW5jZWxcIl0sZj0wO2Y8ZC5sZW5ndGg7ZisrKXt2YXIgdj1kW2ZdO28uc2lnbmFscy5vbih2LHIpfW8uZG9jRXZlbnRzLmRyYWdzdGFydD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHMuaW50ZXJhY3Rpb25zLmxlbmd0aDtlKyspe3ZhciBuO249cy5pbnRlcmFjdGlvbnNbZV07dmFyIHI9bjtpZihyLmVsZW1lbnQmJihyLmVsZW1lbnQ9PT10LnRhcmdldHx8cChyLmVsZW1lbnQsdC50YXJnZXQpKSlyZXR1cm4gdm9pZCByLnRhcmdldC5jaGVja0FuZFByZXZlbnREZWZhdWx0KHQpfX19LHtcIi4vSW50ZXJhY3RhYmxlXCI6NCxcIi4vSW50ZXJhY3Rpb25cIjo1LFwiLi9zY29wZVwiOjMzLFwiLi91dGlscy9kb21VdGlsc1wiOjM4LFwiLi91dGlscy9ldmVudHNcIjozOSxcIi4vdXRpbHMvaXNcIjo0NX1dLDIzOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUsbil7cmV0dXJuIHQmJnQuZW5hYmxlZCYmKGV8fCF0LmVuZE9ubHkpJiYoIW58fHQuZW5kT25seSl9dmFyIGk9dChcIi4uL0ludGVyYWN0RXZlbnRcIiksbz10KFwiLi4vSW50ZXJhY3Rpb25cIikscz10KFwiLi4vdXRpbHMvZXh0ZW5kXCIpLGE9e25hbWVzOltdLHNldE9mZnNldHM6ZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQucGFnZUNvb3JkcyxyPWUudGFyZ2V0LGk9ZS5lbGVtZW50LG89ZS5zdGFydE9mZnNldCxzPXIuZ2V0UmVjdChpKTtzPyhvLmxlZnQ9bi54LXMubGVmdCxvLnRvcD1uLnktcy50b3Asby5yaWdodD1zLnJpZ2h0LW4ueCxvLmJvdHRvbT1zLmJvdHRvbS1uLnksXCJ3aWR0aFwiaW4gc3x8KHMud2lkdGg9cy5yaWdodC1zLmxlZnQpLFwiaGVpZ2h0XCJpbiBzfHwocy5oZWlnaHQ9cy5ib3R0b20tcy50b3ApKTpvLmxlZnQ9by50b3A9by5yaWdodD1vLmJvdHRvbT0wLHQucmVjdD1zLHQuaW50ZXJhY3RhYmxlPXIsdC5lbGVtZW50PWk7Zm9yKHZhciBjPTA7YzxhLm5hbWVzLmxlbmd0aDtjKyspe3ZhciBsO2w9YS5uYW1lc1tjXTt2YXIgcD1sO3Qub3B0aW9ucz1yLm9wdGlvbnNbZS5wcmVwYXJlZC5uYW1lXVtwXSx0Lm9wdGlvbnMmJihlLm1vZGlmaWVyT2Zmc2V0c1twXT1hW3BdLnNldE9mZnNldCh0KSl9fSxzZXRBbGw6ZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQuc3RhdHVzZXMsaT10LnByZUVuZCxvPXQucmVxdWlyZUVuZE9ubHksYz17ZHg6MCxkeTowLGNoYW5nZWQ6ITEsbG9ja2VkOiExLHNob3VsZE1vdmU6ITB9O3QubW9kaWZpZWRDb29yZHM9cyh7fSx0LnBhZ2VDb29yZHMpO2Zvcih2YXIgbD0wO2w8YS5uYW1lcy5sZW5ndGg7bCsrKXt2YXIgcDtwPWEubmFtZXNbbF07dmFyIHU9cCxkPWFbdV0sZj1lLnRhcmdldC5vcHRpb25zW2UucHJlcGFyZWQubmFtZV1bdV07cihmLGksbykmJih0LnN0YXR1cz10LnN0YXR1cz1uW3VdLHQub3B0aW9ucz1mLHQub2Zmc2V0PXQuaW50ZXJhY3Rpb24ubW9kaWZpZXJPZmZzZXRzW3VdLGQuc2V0KHQpLHQuc3RhdHVzLmxvY2tlZCYmKHQubW9kaWZpZWRDb29yZHMueCs9dC5zdGF0dXMuZHgsdC5tb2RpZmllZENvb3Jkcy55Kz10LnN0YXR1cy5keSxjLmR4Kz10LnN0YXR1cy5keCxjLmR5Kz10LnN0YXR1cy5keSxjLmxvY2tlZD0hMCkpfXJldHVybiBjLnNob3VsZE1vdmU9IXQuc3RhdHVzfHwhYy5sb2NrZWR8fHQuc3RhdHVzLmNoYW5nZWQsY30scmVzZXRTdGF0dXNlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPGEubmFtZXMubGVuZ3RoO2UrKyl7dmFyIG47bj1hLm5hbWVzW2VdO3ZhciByPW4saT10W3JdfHx7fTtpLmR4PWkuZHk9MCxpLm1vZGlmaWVkWD1pLm1vZGlmaWVkWT1OYU4saS5sb2NrZWQ9ITEsaS5jaGFuZ2VkPSEwLHRbcl09aX1yZXR1cm4gdH0sc3RhcnQ6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmludGVyYWN0aW9uLHI9e2ludGVyYWN0aW9uOm4scGFnZUNvb3JkczooXCJhY3Rpb24tcmVzdW1lXCI9PT1lP24uY3VyQ29vcmRzOm4uc3RhcnRDb29yZHMpLnBhZ2Usc3RhcnRPZmZzZXQ6bi5zdGFydE9mZnNldCxzdGF0dXNlczpuLm1vZGlmaWVyU3RhdHVzZXMscHJlRW5kOiExLHJlcXVpcmVFbmRPbmx5OiExfTthLnNldE9mZnNldHMociksYS5yZXNldFN0YXR1c2VzKHIuc3RhdHVzZXMpLHIucGFnZUNvb3Jkcz1zKHt9LG4uc3RhcnRDb29yZHMucGFnZSksbi5tb2RpZmllclJlc3VsdD1hLnNldEFsbChyKX0sYmVmb3JlTW92ZTpmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5wcmVFbmQscj10LmludGVyYWN0aW5nQmVmb3JlTW92ZSxpPWEuc2V0QWxsKHtpbnRlcmFjdGlvbjplLHByZUVuZDpuLHBhZ2VDb29yZHM6ZS5jdXJDb29yZHMucGFnZSxzdGF0dXNlczplLm1vZGlmaWVyU3RhdHVzZXMscmVxdWlyZUVuZE9ubHk6ITF9KTshaS5zaG91bGRNb3ZlJiZyJiYoZS5fZG9udEZpcmVNb3ZlPSEwKSxlLm1vZGlmaWVyUmVzdWx0PWl9LGVuZDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pbnRlcmFjdGlvbixuPXQuZXZlbnQsaT0wO2k8YS5uYW1lcy5sZW5ndGg7aSsrKXt2YXIgbztvPWEubmFtZXNbaV07dmFyIHM9bztpZihyKGUudGFyZ2V0Lm9wdGlvbnNbZS5wcmVwYXJlZC5uYW1lXVtzXSwhMCwhMCkpe2UuZG9Nb3ZlKHtldmVudDpuLHByZUVuZDohMH0pO2JyZWFrfX19LHNldFhZOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LmlFdmVudCxuPXQuaW50ZXJhY3Rpb24scj1zKHt9LHQpLGk9MDtpPGEubmFtZXMubGVuZ3RoO2krKyl7dmFyIG89YS5uYW1lc1tpXTtpZihyLm9wdGlvbnM9bi50YXJnZXQub3B0aW9uc1tuLnByZXBhcmVkLm5hbWVdW29dLHIub3B0aW9ucyl7dmFyIGM9YVtvXTtyLnN0YXR1cz1uLm1vZGlmaWVyU3RhdHVzZXNbb10sZVtvXT1jLm1vZGlmeUNvb3JkcyhyKX19fX07by5zaWduYWxzLm9uKFwibmV3XCIsZnVuY3Rpb24odCl7dC5zdGFydE9mZnNldD17bGVmdDowLHJpZ2h0OjAsdG9wOjAsYm90dG9tOjB9LHQubW9kaWZpZXJPZmZzZXRzPXt9LHQubW9kaWZpZXJTdGF0dXNlcz1hLnJlc2V0U3RhdHVzZXMoe30pLHQubW9kaWZpZXJSZXN1bHQ9bnVsbH0pLG8uc2lnbmFscy5vbihcImFjdGlvbi1zdGFydFwiLGEuc3RhcnQpLG8uc2lnbmFscy5vbihcImFjdGlvbi1yZXN1bWVcIixhLnN0YXJ0KSxvLnNpZ25hbHMub24oXCJiZWZvcmUtYWN0aW9uLW1vdmVcIixhLmJlZm9yZU1vdmUpLG8uc2lnbmFscy5vbihcImFjdGlvbi1lbmRcIixhLmVuZCksaS5zaWduYWxzLm9uKFwic2V0LXh5XCIsYS5zZXRYWSksZS5leHBvcnRzPWF9LHtcIi4uL0ludGVyYWN0RXZlbnRcIjozLFwiLi4vSW50ZXJhY3Rpb25cIjo1LFwiLi4vdXRpbHMvZXh0ZW5kXCI6NDB9XSwyNDpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlLG4pe3JldHVybiBvLmlzLmZ1bmN0aW9uKHQpP28ucmVzb2x2ZVJlY3RMaWtlKHQsZS50YXJnZXQsZS5lbGVtZW50LFtuLngsbi55LGVdKTpvLnJlc29sdmVSZWN0TGlrZSh0LGUudGFyZ2V0LGUuZWxlbWVudCl9dmFyIGk9dChcIi4vYmFzZVwiKSxvPXQoXCIuLi91dGlsc1wiKSxzPXQoXCIuLi9kZWZhdWx0T3B0aW9uc1wiKSxhPXtkZWZhdWx0czp7ZW5hYmxlZDohMSxlbmRPbmx5OiExLHJlc3RyaWN0aW9uOm51bGwsZWxlbWVudFJlY3Q6bnVsbH0sc2V0T2Zmc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXQucmVjdCxuPXQuc3RhcnRPZmZzZXQscj10Lm9wdGlvbnMsaT1yJiZyLmVsZW1lbnRSZWN0LG89e307cmV0dXJuIGUmJmk/KG8ubGVmdD1uLmxlZnQtZS53aWR0aCppLmxlZnQsby50b3A9bi50b3AtZS5oZWlnaHQqaS50b3Asby5yaWdodD1uLnJpZ2h0LWUud2lkdGgqKDEtaS5yaWdodCksby5ib3R0b209bi5ib3R0b20tZS5oZWlnaHQqKDEtaS5ib3R0b20pKTpvLmxlZnQ9by50b3A9by5yaWdodD1vLmJvdHRvbT0wLG99LHNldDpmdW5jdGlvbih0KXt2YXIgZT10Lm1vZGlmaWVkQ29vcmRzLG49dC5pbnRlcmFjdGlvbixpPXQuc3RhdHVzLHM9dC5vcHRpb25zO2lmKCFzKXJldHVybiBpO3ZhciBhPWkudXNlU3RhdHVzWFk/e3g6aS54LHk6aS55fTpvLmV4dGVuZCh7fSxlKSxjPXIocy5yZXN0cmljdGlvbixuLGEpO2lmKCFjKXJldHVybiBpO2kuZHg9MCxpLmR5PTAsaS5sb2NrZWQ9ITE7dmFyIGw9YyxwPWEueCx1PWEueSxkPW4ubW9kaWZpZXJPZmZzZXRzLnJlc3RyaWN0O1wieFwiaW4gYyYmXCJ5XCJpbiBjPyhwPU1hdGgubWF4KE1hdGgubWluKGwueCtsLndpZHRoLWQucmlnaHQsYS54KSxsLngrZC5sZWZ0KSx1PU1hdGgubWF4KE1hdGgubWluKGwueStsLmhlaWdodC1kLmJvdHRvbSxhLnkpLGwueStkLnRvcCkpOihwPU1hdGgubWF4KE1hdGgubWluKGwucmlnaHQtZC5yaWdodCxhLngpLGwubGVmdCtkLmxlZnQpLHU9TWF0aC5tYXgoTWF0aC5taW4obC5ib3R0b20tZC5ib3R0b20sYS55KSxsLnRvcCtkLnRvcCkpLGkuZHg9cC1hLngsaS5keT11LWEueSxpLmNoYW5nZWQ9aS5tb2RpZmllZFghPT1wfHxpLm1vZGlmaWVkWSE9PXUsaS5sb2NrZWQ9ISghaS5keCYmIWkuZHkpLGkubW9kaWZpZWRYPXAsaS5tb2RpZmllZFk9dX0sbW9kaWZ5Q29vcmRzOmZ1bmN0aW9uKHQpe3ZhciBlPXQucGFnZSxuPXQuY2xpZW50LHI9dC5zdGF0dXMsaT10LnBoYXNlLG89dC5vcHRpb25zLHM9byYmby5lbGVtZW50UmVjdDtpZihvJiZvLmVuYWJsZWQmJihcInN0YXJ0XCIhPT1pfHwhc3x8IXIubG9ja2VkKSYmci5sb2NrZWQpcmV0dXJuIGUueCs9ci5keCxlLnkrPXIuZHksbi54Kz1yLmR4LG4ueSs9ci5keSx7ZHg6ci5keCxkeTpyLmR5fX0sZ2V0UmVzdHJpY3Rpb25SZWN0OnJ9O2kucmVzdHJpY3Q9YSxpLm5hbWVzLnB1c2goXCJyZXN0cmljdFwiKSxzLnBlckFjdGlvbi5yZXN0cmljdD1hLmRlZmF1bHRzLGUuZXhwb3J0cz1hfSx7XCIuLi9kZWZhdWx0T3B0aW9uc1wiOjE4LFwiLi4vdXRpbHNcIjo0MyxcIi4vYmFzZVwiOjIzfV0sMjU6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KFwiLi9iYXNlXCIpLGk9dChcIi4uL3V0aWxzXCIpLG89dChcIi4uL3V0aWxzL3JlY3RcIikscz10KFwiLi4vZGVmYXVsdE9wdGlvbnNcIiksYT10KFwiLi4vYWN0aW9ucy9yZXNpemVcIiksYz10KFwiLi9yZXN0cmljdFwiKSxsPWMuZ2V0UmVzdHJpY3Rpb25SZWN0LHA9e3RvcDoxLzAsbGVmdDoxLzAsYm90dG9tOi0xLzAscmlnaHQ6LTEvMH0sdT17dG9wOi0xLzAsbGVmdDotMS8wLGJvdHRvbToxLzAscmlnaHQ6MS8wfSxkPXtkZWZhdWx0czp7ZW5hYmxlZDohMSxlbmRPbmx5OiExLG1pbjpudWxsLG1heDpudWxsLG9mZnNldDpudWxsfSxzZXRPZmZzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQuc3RhcnRPZmZzZXQscj10Lm9wdGlvbnM7aWYoIXIpcmV0dXJuIGkuZXh0ZW5kKHt9LG4pO3ZhciBvPWwoci5vZmZzZXQsZSxlLnN0YXJ0Q29vcmRzLnBhZ2UpO3JldHVybiBvP3t0b3A6bi50b3Arby55LGxlZnQ6bi5sZWZ0K28ueCxib3R0b206bi5ib3R0b20rby55LHJpZ2h0Om4ucmlnaHQrby54fTpufSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5tb2RpZmllZENvb3JkcyxuPXQuaW50ZXJhY3Rpb24scj10LnN0YXR1cyxzPXQub2Zmc2V0LGE9dC5vcHRpb25zLGM9bi5wcmVwYXJlZC5saW5rZWRFZGdlc3x8bi5wcmVwYXJlZC5lZGdlcztpZihuLmludGVyYWN0aW5nKCkmJmMpe3ZhciBkPXIudXNlU3RhdHVzWFk/e3g6ci54LHk6ci55fTppLmV4dGVuZCh7fSxlKSxmPW8ueHl3aFRvVGxicihsKGEuaW5uZXIsbixkKSl8fHAsdj1vLnh5d2hUb1RsYnIobChhLm91dGVyLG4sZCkpfHx1LGc9ZC54LGg9ZC55O3IuZHg9MCxyLmR5PTAsci5sb2NrZWQ9ITEsYy50b3A/aD1NYXRoLm1pbihNYXRoLm1heCh2LnRvcCtzLnRvcCxkLnkpLGYudG9wK3MudG9wKTpjLmJvdHRvbSYmKGg9TWF0aC5tYXgoTWF0aC5taW4odi5ib3R0b20tcy5ib3R0b20sZC55KSxmLmJvdHRvbS1zLmJvdHRvbSkpLGMubGVmdD9nPU1hdGgubWluKE1hdGgubWF4KHYubGVmdCtzLmxlZnQsZC54KSxmLmxlZnQrcy5sZWZ0KTpjLnJpZ2h0JiYoZz1NYXRoLm1heChNYXRoLm1pbih2LnJpZ2h0LXMucmlnaHQsZC54KSxmLnJpZ2h0LXMucmlnaHQpKSxyLmR4PWctZC54LHIuZHk9aC1kLnksci5jaGFuZ2VkPXIubW9kaWZpZWRYIT09Z3x8ci5tb2RpZmllZFkhPT1oLHIubG9ja2VkPSEoIXIuZHgmJiFyLmR5KSxyLm1vZGlmaWVkWD1nLHIubW9kaWZpZWRZPWh9fSxtb2RpZnlDb29yZHM6ZnVuY3Rpb24odCl7dmFyIGU9dC5wYWdlLG49dC5jbGllbnQscj10LnN0YXR1cyxpPXQucGhhc2Usbz10Lm9wdGlvbnM7aWYobyYmby5lbmFibGVkJiYoXCJzdGFydFwiIT09aXx8IXIubG9ja2VkKSYmci5sb2NrZWQpcmV0dXJuIGUueCs9ci5keCxlLnkrPXIuZHksbi54Kz1yLmR4LG4ueSs9ci5keSx7ZHg6ci5keCxkeTpyLmR5fX0sbm9Jbm5lcjpwLG5vT3V0ZXI6dSxnZXRSZXN0cmljdGlvblJlY3Q6bH07ci5yZXN0cmljdEVkZ2VzPWQsci5uYW1lcy5wdXNoKFwicmVzdHJpY3RFZGdlc1wiKSxzLnBlckFjdGlvbi5yZXN0cmljdEVkZ2VzPWQuZGVmYXVsdHMsYS5kZWZhdWx0cy5yZXN0cmljdEVkZ2VzPWQuZGVmYXVsdHMsZS5leHBvcnRzPWR9LHtcIi4uL2FjdGlvbnMvcmVzaXplXCI6MTAsXCIuLi9kZWZhdWx0T3B0aW9uc1wiOjE4LFwiLi4vdXRpbHNcIjo0MyxcIi4uL3V0aWxzL3JlY3RcIjo1MCxcIi4vYmFzZVwiOjIzLFwiLi9yZXN0cmljdFwiOjI0fV0sMjY6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KFwiLi9iYXNlXCIpLGk9dChcIi4vcmVzdHJpY3RFZGdlc1wiKSxvPXQoXCIuLi91dGlsc1wiKSxzPXQoXCIuLi91dGlscy9yZWN0XCIpLGE9dChcIi4uL2RlZmF1bHRPcHRpb25zXCIpLGM9dChcIi4uL2FjdGlvbnMvcmVzaXplXCIpLGw9e3dpZHRoOi0xLzAsaGVpZ2h0Oi0xLzB9LHA9e3dpZHRoOjEvMCxoZWlnaHQ6MS8wfSx1PXtkZWZhdWx0czp7ZW5hYmxlZDohMSxlbmRPbmx5OiExLG1pbjpudWxsLG1heDpudWxsfSxzZXRPZmZzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaW50ZXJhY3Rpb24uc3RhcnRPZmZzZXR9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5vcHRpb25zLHI9ZS5wcmVwYXJlZC5saW5rZWRFZGdlc3x8ZS5wcmVwYXJlZC5lZGdlcztpZihlLmludGVyYWN0aW5nKCkmJnIpe3ZhciBhPXMueHl3aFRvVGxicihlLnJlc2l6ZVJlY3RzLmludmVydGVkKSxjPXMudGxiclRvWHl3aChpLmdldFJlc3RyaWN0aW9uUmVjdChuLm1pbixlKSl8fGwsdT1zLnRsYnJUb1h5d2goaS5nZXRSZXN0cmljdGlvblJlY3Qobi5tYXgsZSkpfHxwO3Qub3B0aW9ucz17ZW5hYmxlZDpuLmVuYWJsZWQsZW5kT25seTpuLmVuZE9ubHksaW5uZXI6by5leHRlbmQoe30saS5ub0lubmVyKSxvdXRlcjpvLmV4dGVuZCh7fSxpLm5vT3V0ZXIpfSxyLnRvcD8odC5vcHRpb25zLmlubmVyLnRvcD1hLmJvdHRvbS1jLmhlaWdodCx0Lm9wdGlvbnMub3V0ZXIudG9wPWEuYm90dG9tLXUuaGVpZ2h0KTpyLmJvdHRvbSYmKHQub3B0aW9ucy5pbm5lci5ib3R0b209YS50b3ArYy5oZWlnaHQsdC5vcHRpb25zLm91dGVyLmJvdHRvbT1hLnRvcCt1LmhlaWdodCksci5sZWZ0Pyh0Lm9wdGlvbnMuaW5uZXIubGVmdD1hLnJpZ2h0LWMud2lkdGgsdC5vcHRpb25zLm91dGVyLmxlZnQ9YS5yaWdodC11LndpZHRoKTpyLnJpZ2h0JiYodC5vcHRpb25zLmlubmVyLnJpZ2h0PWEubGVmdCtjLndpZHRoLHQub3B0aW9ucy5vdXRlci5yaWdodD1hLmxlZnQrdS53aWR0aCksaS5zZXQodCl9fSxtb2RpZnlDb29yZHM6aS5tb2RpZnlDb29yZHN9O3IucmVzdHJpY3RTaXplPXUsci5uYW1lcy5wdXNoKFwicmVzdHJpY3RTaXplXCIpLGEucGVyQWN0aW9uLnJlc3RyaWN0U2l6ZT11LmRlZmF1bHRzLGMuZGVmYXVsdHMucmVzdHJpY3RTaXplPXUuZGVmYXVsdHMsZS5leHBvcnRzPXV9LHtcIi4uL2FjdGlvbnMvcmVzaXplXCI6MTAsXCIuLi9kZWZhdWx0T3B0aW9uc1wiOjE4LFwiLi4vdXRpbHNcIjo0MyxcIi4uL3V0aWxzL3JlY3RcIjo1MCxcIi4vYmFzZVwiOjIzLFwiLi9yZXN0cmljdEVkZ2VzXCI6MjV9XSwyNzpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPXQoXCIuL2Jhc2VcIiksaT10KFwiLi4vaW50ZXJhY3RcIiksbz10KFwiLi4vdXRpbHNcIikscz10KFwiLi4vZGVmYXVsdE9wdGlvbnNcIiksYT17ZGVmYXVsdHM6e2VuYWJsZWQ6ITEsZW5kT25seTohMSxyYW5nZToxLzAsdGFyZ2V0czpudWxsLG9mZnNldHM6bnVsbCxyZWxhdGl2ZVBvaW50czpudWxsfSxzZXRPZmZzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQuaW50ZXJhY3RhYmxlLHI9dC5lbGVtZW50LGk9dC5yZWN0LHM9dC5zdGFydE9mZnNldCxhPXQub3B0aW9ucyxjPVtdLGw9by5yZWN0VG9YWShvLnJlc29sdmVSZWN0TGlrZShhLm9yaWdpbikpLHA9bHx8by5nZXRPcmlnaW5YWShuLHIsZS5wcmVwYXJlZC5uYW1lKTthPWF8fG4ub3B0aW9uc1tlLnByZXBhcmVkLm5hbWVdLnNuYXB8fHt9O3ZhciB1PXZvaWQgMDtpZihcInN0YXJ0Q29vcmRzXCI9PT1hLm9mZnNldCl1PXt4OmUuc3RhcnRDb29yZHMucGFnZS54LXAueCx5OmUuc3RhcnRDb29yZHMucGFnZS55LXAueX07ZWxzZXt2YXIgZD1vLnJlc29sdmVSZWN0TGlrZShhLm9mZnNldCxuLHIsW2VdKTt1PW8ucmVjdFRvWFkoZCl8fHt4OjAseTowfX1pZihpJiZhLnJlbGF0aXZlUG9pbnRzJiZhLnJlbGF0aXZlUG9pbnRzLmxlbmd0aClmb3IodmFyIGY9MDtmPGEucmVsYXRpdmVQb2ludHMubGVuZ3RoO2YrKyl7dmFyIHY7dj1hLnJlbGF0aXZlUG9pbnRzW2ZdO3ZhciBnPXYsaD1nLngsbT1nLnk7Yy5wdXNoKHt4OnMubGVmdC1pLndpZHRoKmgrdS54LHk6cy50b3AtaS5oZWlnaHQqbSt1Lnl9KX1lbHNlIGMucHVzaCh1KTtyZXR1cm4gY30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb24sbj10Lm1vZGlmaWVkQ29vcmRzLHI9dC5zdGF0dXMsaT10Lm9wdGlvbnMscz10Lm9mZnNldCxhPVtdLGM9dm9pZCAwLGw9dm9pZCAwLHA9dm9pZCAwO2lmKHIudXNlU3RhdHVzWFkpbD17eDpyLngseTpyLnl9O2Vsc2V7dmFyIHU9by5nZXRPcmlnaW5YWShlLnRhcmdldCxlLmVsZW1lbnQsZS5wcmVwYXJlZC5uYW1lKTtsPW8uZXh0ZW5kKHt9LG4pLGwueC09dS54LGwueS09dS55fXIucmVhbFg9bC54LHIucmVhbFk9bC55O2Zvcih2YXIgZD1pLnRhcmdldHM/aS50YXJnZXRzLmxlbmd0aDowLGY9MDtmPHMubGVuZ3RoO2YrKyl7dmFyIHY7dj1zW2ZdO2Zvcih2YXIgZz12LGg9Zy54LG09Zy55LHk9bC54LWgseD1sLnktbSxiPTA7YjxpLnRhcmdldHMubGVuZ3RoO2IrKyl7dmFyIHc7dz1pLnRhcmdldHNbYl07dmFyIEU9dztjPW8uaXMuZnVuY3Rpb24oRSk/RSh5LHgsZSk6RSxjJiZhLnB1c2goe3g6by5pcy5udW1iZXIoYy54KT9jLngraDp5LHk6by5pcy5udW1iZXIoYy55KT9jLnkrbTp4LHJhbmdlOm8uaXMubnVtYmVyKGMucmFuZ2UpP2MucmFuZ2U6aS5yYW5nZX0pfX12YXIgVD17dGFyZ2V0Om51bGwsaW5SYW5nZTohMSxkaXN0YW5jZTowLHJhbmdlOjAsZHg6MCxkeTowfTtmb3IocD0wLGQ9YS5sZW5ndGg7cDxkO3ArKyl7Yz1hW3BdO3ZhciBTPWMucmFuZ2UsQz1jLngtbC54LEQ9Yy55LWwueSxJPW8uaHlwb3QoQyxEKSxPPUk8PVM7Uz09PTEvMCYmVC5pblJhbmdlJiZULnJhbmdlIT09MS8wJiYoTz0hMSksVC50YXJnZXQmJiEoTz9ULmluUmFuZ2UmJlMhPT0xLzA/SS9TPFQuZGlzdGFuY2UvVC5yYW5nZTpTPT09MS8wJiZULnJhbmdlIT09MS8wfHxJPFQuZGlzdGFuY2U6IVQuaW5SYW5nZSYmSTxULmRpc3RhbmNlKXx8KFQudGFyZ2V0PWMsVC5kaXN0YW5jZT1JLFQucmFuZ2U9UyxULmluUmFuZ2U9TyxULmR4PUMsVC5keT1ELHIucmFuZ2U9Uyl9dmFyIE09dm9pZCAwO1QudGFyZ2V0PyhNPXIubW9kaWZpZWRYIT09VC50YXJnZXQueHx8ci5tb2RpZmllZFkhPT1ULnRhcmdldC55LHIubW9kaWZpZWRYPVQudGFyZ2V0Lngsci5tb2RpZmllZFk9VC50YXJnZXQueSk6KE09ITAsci5tb2RpZmllZFg9TmFOLHIubW9kaWZpZWRZPU5hTiksci5keD1ULmR4LHIuZHk9VC5keSxyLmNoYW5nZWQ9TXx8VC5pblJhbmdlJiYhci5sb2NrZWQsci5sb2NrZWQ9VC5pblJhbmdlfSxtb2RpZnlDb29yZHM6ZnVuY3Rpb24odCl7dmFyIGU9dC5wYWdlLG49dC5jbGllbnQscj10LnN0YXR1cyxpPXQucGhhc2Usbz10Lm9wdGlvbnMscz1vJiZvLnJlbGF0aXZlUG9pbnRzO2lmKG8mJm8uZW5hYmxlZCYmKFwic3RhcnRcIiE9PWl8fCFzfHwhcy5sZW5ndGgpKXJldHVybiByLmxvY2tlZCYmKGUueCs9ci5keCxlLnkrPXIuZHksbi54Kz1yLmR4LG4ueSs9ci5keSkse3JhbmdlOnIucmFuZ2UsbG9ja2VkOnIubG9ja2VkLHg6ci5tb2RpZmllZFgseTpyLm1vZGlmaWVkWSxyZWFsWDpyLnJlYWxYLHJlYWxZOnIucmVhbFksZHg6ci5keCxkeTpyLmR5fX19O2kuY3JlYXRlU25hcEdyaWQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIHI9dC5saW1pdHN8fHtsZWZ0Oi0xLzAscmlnaHQ6MS8wLHRvcDotMS8wLGJvdHRvbToxLzB9LGk9MCxzPTA7by5pcy5vYmplY3QodC5vZmZzZXQpJiYoaT10Lm9mZnNldC54LHM9dC5vZmZzZXQueSk7dmFyIGE9TWF0aC5yb3VuZCgoZS1pKS90LngpLGM9TWF0aC5yb3VuZCgobi1zKS90LnkpO3JldHVybnt4Ok1hdGgubWF4KHIubGVmdCxNYXRoLm1pbihyLnJpZ2h0LGEqdC54K2kpKSx5Ok1hdGgubWF4KHIudG9wLE1hdGgubWluKHIuYm90dG9tLGMqdC55K3MpKSxyYW5nZTp0LnJhbmdlfX19LHIuc25hcD1hLHIubmFtZXMucHVzaChcInNuYXBcIikscy5wZXJBY3Rpb24uc25hcD1hLmRlZmF1bHRzLGUuZXhwb3J0cz1hfSx7XCIuLi9kZWZhdWx0T3B0aW9uc1wiOjE4LFwiLi4vaW50ZXJhY3RcIjoyMSxcIi4uL3V0aWxzXCI6NDMsXCIuL2Jhc2VcIjoyM31dLDI4OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dChcIi4vYmFzZVwiKSxpPXQoXCIuL3NuYXBcIiksbz10KFwiLi4vZGVmYXVsdE9wdGlvbnNcIikscz10KFwiLi4vYWN0aW9ucy9yZXNpemVcIiksYT10KFwiLi4vdXRpbHMvXCIpLGM9e2RlZmF1bHRzOntlbmFibGVkOiExLGVuZE9ubHk6ITEscmFuZ2U6MS8wLHRhcmdldHM6bnVsbCxvZmZzZXRzOm51bGx9LHNldE9mZnNldDpmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5vcHRpb25zLHI9ZS5wcmVwYXJlZC5lZGdlcztpZihyKXt0Lm9wdGlvbnM9e3JlbGF0aXZlUG9pbnRzOlt7eDpyLmxlZnQ/MDoxLHk6ci50b3A/MDoxfV0sb3JpZ2luOnt4OjAseTowfSxvZmZzZXQ6XCJzZWxmXCIscmFuZ2U6bi5yYW5nZX07dmFyIG89aS5zZXRPZmZzZXQodCk7cmV0dXJuIHQub3B0aW9ucz1uLG99fSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcmFjdGlvbixuPXQub3B0aW9ucyxyPXQub2Zmc2V0LG89dC5tb2RpZmllZENvb3JkcyxzPWEuZXh0ZW5kKHt9LG8pLGM9cy54LXJbMF0ueCxsPXMueS1yWzBdLnk7dC5vcHRpb25zPWEuZXh0ZW5kKHt9LG4pLHQub3B0aW9ucy50YXJnZXRzPVtdO2Zvcih2YXIgcD0wO3A8bi50YXJnZXRzLmxlbmd0aDtwKyspe3ZhciB1O3U9bi50YXJnZXRzW3BdO3ZhciBkPXUsZj12b2lkIDA7Zj1hLmlzLmZ1bmN0aW9uKGQpP2QoYyxsLGUpOmQsZiYmKFwid2lkdGhcImluIGYmJlwiaGVpZ2h0XCJpbiBmJiYoZi54PWYud2lkdGgsZi55PWYuaGVpZ2h0KSx0Lm9wdGlvbnMudGFyZ2V0cy5wdXNoKGYpKX1pLnNldCh0KX0sbW9kaWZ5Q29vcmRzOmZ1bmN0aW9uKHQpe3ZhciBlPXQub3B0aW9uczt0Lm9wdGlvbnM9YS5leHRlbmQoe30sZSksdC5vcHRpb25zLmVuYWJsZWQ9ZS5lbmFibGVkLHQub3B0aW9ucy5yZWxhdGl2ZVBvaW50cz1bbnVsbF0saS5tb2RpZnlDb29yZHModCl9fTtyLnNuYXBTaXplPWMsci5uYW1lcy5wdXNoKFwic25hcFNpemVcIiksby5wZXJBY3Rpb24uc25hcFNpemU9Yy5kZWZhdWx0cyxzLmRlZmF1bHRzLnNuYXBTaXplPWMuZGVmYXVsdHMsZS5leHBvcnRzPWN9LHtcIi4uL2FjdGlvbnMvcmVzaXplXCI6MTAsXCIuLi9kZWZhdWx0T3B0aW9uc1wiOjE4LFwiLi4vdXRpbHMvXCI6NDMsXCIuL2Jhc2VcIjoyMyxcIi4vc25hcFwiOjI3fV0sMjk6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX12YXIgaT10KFwiLi4vdXRpbHMvcG9pbnRlclV0aWxzXCIpO2UuZXhwb3J0cz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuLG8scyxhKXtpZihyKHRoaXMsdCksaS5wb2ludGVyRXh0ZW5kKHRoaXMsbyksbyE9PW4mJmkucG9pbnRlckV4dGVuZCh0aGlzLG4pLHRoaXMuaW50ZXJhY3Rpb249YSx0aGlzLnRpbWVTdGFtcD0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLm9yaWdpbmFsRXZlbnQ9byx0aGlzLnR5cGU9ZSx0aGlzLnBvaW50ZXJJZD1pLmdldFBvaW50ZXJJZChuKSx0aGlzLnBvaW50ZXJUeXBlPWkuZ2V0UG9pbnRlclR5cGUobiksdGhpcy50YXJnZXQ9cyx0aGlzLmN1cnJlbnRUYXJnZXQ9bnVsbCxcInRhcFwiPT09ZSl7dmFyIGM9YS5nZXRQb2ludGVySW5kZXgobik7dGhpcy5kdD10aGlzLnRpbWVTdGFtcC1hLmRvd25UaW1lc1tjXTt2YXIgbD10aGlzLnRpbWVTdGFtcC1hLnRhcFRpbWU7dGhpcy5kb3VibGU9ISEoYS5wcmV2VGFwJiZcImRvdWJsZXRhcFwiIT09YS5wcmV2VGFwLnR5cGUmJmEucHJldlRhcC50YXJnZXQ9PT10aGlzLnRhcmdldCYmbDw1MDApfWVsc2VcImRvdWJsZXRhcFwiPT09ZSYmKHRoaXMuZHQ9bi50aW1lU3RhbXAtYS50YXBUaW1lKX1yZXR1cm4gdC5wcm90b3R5cGUuc3VidHJhY3RPcmlnaW49ZnVuY3Rpb24odCl7dmFyIGU9dC54LG49dC55O3JldHVybiB0aGlzLnBhZ2VYLT1lLHRoaXMucGFnZVktPW4sdGhpcy5jbGllbnRYLT1lLHRoaXMuY2xpZW50WS09bix0aGlzfSx0LnByb3RvdHlwZS5hZGRPcmlnaW49ZnVuY3Rpb24odCl7dmFyIGU9dC54LG49dC55O3JldHVybiB0aGlzLnBhZ2VYKz1lLHRoaXMucGFnZVkrPW4sdGhpcy5jbGllbnRYKz1lLHRoaXMuY2xpZW50WSs9bix0aGlzfSx0LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe3RoaXMub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpfSx0LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZD0hMH0sdC5wcm90b3R5cGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9dGhpcy5wcm9wYWdhdGlvblN0b3BwZWQ9ITB9LHR9KCl9LHtcIi4uL3V0aWxzL3BvaW50ZXJVdGlsc1wiOjQ4fV0sMzA6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQpe2Zvcih2YXIgZT10LmludGVyYWN0aW9uLG49dC5wb2ludGVyLHM9dC5ldmVudCxjPXQuZXZlbnRUYXJnZXQscD10LnR5cGUsdT12b2lkIDA9PT1wP3QucG9pbnRlckV2ZW50LnR5cGU6cCxkPXQudGFyZ2V0cyxmPXZvaWQgMD09PWQ/aSh0KTpkLHY9dC5wb2ludGVyRXZlbnQsZz12b2lkIDA9PT12P25ldyBvKHUsbixzLGMsZSk6dixoPXtpbnRlcmFjdGlvbjplLHBvaW50ZXI6bixldmVudDpzLGV2ZW50VGFyZ2V0OmMsdGFyZ2V0czpmLHR5cGU6dSxwb2ludGVyRXZlbnQ6Z30sbT0wO208Zi5sZW5ndGg7bSsrKXt2YXIgeT1mW21dO2Zvcih2YXIgeCBpbiB5LnByb3BzfHx7fSlnW3hdPXkucHJvcHNbeF07dmFyIGI9YS5nZXRPcmlnaW5YWSh5LmV2ZW50YWJsZSx5LmVsZW1lbnQpO2lmKGcuc3VidHJhY3RPcmlnaW4oYiksZy5ldmVudGFibGU9eS5ldmVudGFibGUsZy5jdXJyZW50VGFyZ2V0PXkuZWxlbWVudCx5LmV2ZW50YWJsZS5maXJlKGcpLGcuYWRkT3JpZ2luKGIpLGcuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkfHxnLnByb3BhZ2F0aW9uU3RvcHBlZCYmbSsxPGYubGVuZ3RoJiZmW20rMV0uZWxlbWVudCE9PWcuY3VycmVudFRhcmdldClicmVha31pZihsLmZpcmUoXCJmaXJlZFwiLGgpLFwidGFwXCI9PT11KXt2YXIgdz1nLmRvdWJsZT9yKHtpbnRlcmFjdGlvbjplLHBvaW50ZXI6bixldmVudDpzLGV2ZW50VGFyZ2V0OmMsdHlwZTpcImRvdWJsZXRhcFwifSk6ZztlLnByZXZUYXA9dyxlLnRhcFRpbWU9dy50aW1lU3RhbXB9cmV0dXJuIGd9ZnVuY3Rpb24gaSh0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5wb2ludGVyLHI9dC5ldmVudCxpPXQuZXZlbnRUYXJnZXQsbz10LnR5cGUscz1lLmdldFBvaW50ZXJJbmRleChuKTtpZihcInRhcFwiPT09byYmKGUucG9pbnRlcldhc01vdmVkfHwhZS5kb3duVGFyZ2V0c1tzXXx8ZS5kb3duVGFyZ2V0c1tzXSE9PWkpKXJldHVybltdO2Zvcih2YXIgYz1hLmdldFBhdGgoaSkscD17aW50ZXJhY3Rpb246ZSxwb2ludGVyOm4sZXZlbnQ6cixldmVudFRhcmdldDppLHR5cGU6byxwYXRoOmMsdGFyZ2V0czpbXSxlbGVtZW50Om51bGx9LHU9MDt1PGMubGVuZ3RoO3UrKyl7dmFyIGQ7ZD1jW3VdO3ZhciBmPWQ7cC5lbGVtZW50PWYsbC5maXJlKFwiY29sbGVjdC10YXJnZXRzXCIscCl9cmV0dXJuXCJob2xkXCI9PT1vJiYocC50YXJnZXRzPXAudGFyZ2V0cy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQuZXZlbnRhYmxlLm9wdGlvbnMuaG9sZER1cmF0aW9uPT09ZS5ob2xkVGltZXJzW3NdLmR1cmF0aW9ufSkpLHAudGFyZ2V0c312YXIgbz10KFwiLi9Qb2ludGVyRXZlbnRcIikscz10KFwiLi4vSW50ZXJhY3Rpb25cIiksYT10KFwiLi4vdXRpbHNcIiksYz10KFwiLi4vZGVmYXVsdE9wdGlvbnNcIiksbD10KFwiLi4vdXRpbHMvU2lnbmFsc1wiKS5uZXcoKSxwPVtcImRvd25cIixcInVwXCIsXCJjYW5jZWxcIl0sdT1bXCJkb3duXCIsXCJ1cFwiLFwiY2FuY2VsXCJdLGQ9e1BvaW50ZXJFdmVudDpvLGZpcmU6cixjb2xsZWN0RXZlbnRUYXJnZXRzOmksc2lnbmFsczpsLGRlZmF1bHRzOntob2xkRHVyYXRpb246NjAwLGlnbm9yZUZyb206bnVsbCxhbGxvd0Zyb206bnVsbCxvcmlnaW46e3g6MCx5OjB9fSx0eXBlczpbXCJkb3duXCIsXCJtb3ZlXCIsXCJ1cFwiLFwiY2FuY2VsXCIsXCJ0YXBcIixcImRvdWJsZXRhcFwiLFwiaG9sZFwiXX07cy5zaWduYWxzLm9uKFwidXBkYXRlLXBvaW50ZXItZG93blwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb24sbj10LnBvaW50ZXJJbmRleDtlLmhvbGRUaW1lcnNbbl09e2R1cmF0aW9uOjEvMCx0aW1lb3V0Om51bGx9fSkscy5zaWduYWxzLm9uKFwicmVtb3ZlLXBvaW50ZXJcIixmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0aW9uLG49dC5wb2ludGVySW5kZXg7ZS5ob2xkVGltZXJzLnNwbGljZShuLDEpfSkscy5zaWduYWxzLm9uKFwibW92ZVwiLGZ1bmN0aW9uKHQpe1xudmFyIGU9dC5pbnRlcmFjdGlvbixuPXQucG9pbnRlcixpPXQuZXZlbnQsbz10LmV2ZW50VGFyZ2V0LHM9dC5kdXBsaWNhdGVNb3ZlLGE9ZS5nZXRQb2ludGVySW5kZXgobik7c3x8ZS5wb2ludGVySXNEb3duJiYhZS5wb2ludGVyV2FzTW92ZWR8fChlLnBvaW50ZXJJc0Rvd24mJmNsZWFyVGltZW91dChlLmhvbGRUaW1lcnNbYV0udGltZW91dCkscih7aW50ZXJhY3Rpb246ZSxwb2ludGVyOm4sZXZlbnQ6aSxldmVudFRhcmdldDpvLHR5cGU6XCJtb3ZlXCJ9KSl9KSxzLnNpZ25hbHMub24oXCJkb3duXCIsZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuaW50ZXJhY3Rpb24sbj10LnBvaW50ZXIsaT10LmV2ZW50LG89dC5ldmVudFRhcmdldCxzPXQucG9pbnRlckluZGV4LGM9ZS5ob2xkVGltZXJzW3NdLHA9YS5nZXRQYXRoKG8pLHU9e2ludGVyYWN0aW9uOmUscG9pbnRlcjpuLGV2ZW50OmksZXZlbnRUYXJnZXQ6byx0eXBlOlwiaG9sZFwiLHRhcmdldHM6W10scGF0aDpwLGVsZW1lbnQ6bnVsbH0sZD0wO2Q8cC5sZW5ndGg7ZCsrKXt2YXIgZjtmPXBbZF07dmFyIHY9Zjt1LmVsZW1lbnQ9dixsLmZpcmUoXCJjb2xsZWN0LXRhcmdldHNcIix1KX1pZih1LnRhcmdldHMubGVuZ3RoKXtmb3IodmFyIGc9MS8wLGg9MDtoPHUudGFyZ2V0cy5sZW5ndGg7aCsrKXt2YXIgbTttPXUudGFyZ2V0c1toXTt2YXIgeT1tLHg9eS5ldmVudGFibGUub3B0aW9ucy5ob2xkRHVyYXRpb247eDxnJiYoZz14KX1jLmR1cmF0aW9uPWcsYy50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyKHtpbnRlcmFjdGlvbjplLGV2ZW50VGFyZ2V0Om8scG9pbnRlcjpuLGV2ZW50OmksdHlwZTpcImhvbGRcIn0pfSxnKX19KSxzLnNpZ25hbHMub24oXCJ1cFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb24sbj10LnBvaW50ZXIsaT10LmV2ZW50LG89dC5ldmVudFRhcmdldDtlLnBvaW50ZXJXYXNNb3ZlZHx8cih7aW50ZXJhY3Rpb246ZSxldmVudFRhcmdldDpvLHBvaW50ZXI6bixldmVudDppLHR5cGU6XCJ0YXBcIn0pfSk7Zm9yKHZhciBmPVtcInVwXCIsXCJjYW5jZWxcIl0sdj0wO3Y8Zi5sZW5ndGg7disrKXt2YXIgZz1mW3ZdO3Muc2lnbmFscy5vbihnLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb24sbj10LnBvaW50ZXJJbmRleDtlLmhvbGRUaW1lcnNbbl0mJmNsZWFyVGltZW91dChlLmhvbGRUaW1lcnNbbl0udGltZW91dCl9KX1mb3IodmFyIGg9MDtoPHAubGVuZ3RoO2grKylzLnNpZ25hbHMub24ocFtoXSxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49ZS5pbnRlcmFjdGlvbixpPWUucG9pbnRlcixvPWUuZXZlbnQ7cih7aW50ZXJhY3Rpb246bixldmVudFRhcmdldDplLmV2ZW50VGFyZ2V0LHBvaW50ZXI6aSxldmVudDpvLHR5cGU6dH0pfX0odVtoXSkpO3Muc2lnbmFscy5vbihcIm5ld1wiLGZ1bmN0aW9uKHQpe3QucHJldlRhcD1udWxsLHQudGFwVGltZT0wLHQuaG9sZFRpbWVycz1bXX0pLGMucG9pbnRlckV2ZW50cz1kLmRlZmF1bHRzLGUuZXhwb3J0cz1kfSx7XCIuLi9JbnRlcmFjdGlvblwiOjUsXCIuLi9kZWZhdWx0T3B0aW9uc1wiOjE4LFwiLi4vdXRpbHNcIjo0MyxcIi4uL3V0aWxzL1NpZ25hbHNcIjozNCxcIi4vUG9pbnRlckV2ZW50XCI6Mjl9XSwzMTpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7dmFyIGU9dC5wb2ludGVyRXZlbnQ7XCJob2xkXCI9PT1lLnR5cGUmJihlLmNvdW50PShlLmNvdW50fHwwKSsxKX1mdW5jdGlvbiBpKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb24sbj10LnBvaW50ZXJFdmVudCxyPXQuZXZlbnRUYXJnZXQsaT10LnRhcmdldHM7aWYoXCJob2xkXCI9PT1uLnR5cGUmJmkubGVuZ3RoKXt2YXIgbz1pWzBdLmV2ZW50YWJsZS5vcHRpb25zLmhvbGRSZXBlYXRJbnRlcnZhbDtvPD0wfHwoZS5ob2xkSW50ZXJ2YWxIYW5kbGU9c2V0VGltZW91dChmdW5jdGlvbigpe3MuZmlyZSh7aW50ZXJhY3Rpb246ZSxldmVudFRhcmdldDpyLHR5cGU6XCJob2xkXCIscG9pbnRlcjpuLGV2ZW50Om59KX0sbykpfX1mdW5jdGlvbiBvKHQpe3ZhciBlPXQuaW50ZXJhY3Rpb247ZS5ob2xkSW50ZXJ2YWxIYW5kbGUmJihjbGVhckludGVydmFsKGUuaG9sZEludGVydmFsSGFuZGxlKSxlLmhvbGRJbnRlcnZhbEhhbmRsZT1udWxsKX12YXIgcz10KFwiLi9iYXNlXCIpLGE9dChcIi4uL0ludGVyYWN0aW9uXCIpO3Muc2lnbmFscy5vbihcIm5ld1wiLHIpLHMuc2lnbmFscy5vbihcImZpcmVkXCIsaSk7Zm9yKHZhciBjPVtcIm1vdmVcIixcInVwXCIsXCJjYW5jZWxcIixcImVuZGFsbFwiXSxsPTA7bDxjLmxlbmd0aDtsKyspe3ZhciBwPWNbbF07YS5zaWduYWxzLm9uKHAsbyl9cy5kZWZhdWx0cy5ob2xkUmVwZWF0SW50ZXJ2YWw9MCxzLnR5cGVzLnB1c2goXCJob2xkcmVwZWF0XCIpLGUuZXhwb3J0cz17b25OZXc6cixvbkZpcmVkOmksZW5kSG9sZFJlcGVhdDpvfX0se1wiLi4vSW50ZXJhY3Rpb25cIjo1LFwiLi9iYXNlXCI6MzB9XSwzMjpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPXQoXCIuL2Jhc2VcIiksaT10KFwiLi4vSW50ZXJhY3RhYmxlXCIpLG89dChcIi4uL3V0aWxzL2lzXCIpLHM9dChcIi4uL3Njb3BlXCIpLGE9dChcIi4uL3V0aWxzL2V4dGVuZFwiKSxjPXQoXCIuLi91dGlscy9hcnJcIiksbD1jLm1lcmdlO3Iuc2lnbmFscy5vbihcImNvbGxlY3QtdGFyZ2V0c1wiLGZ1bmN0aW9uKHQpe3ZhciBlPXQudGFyZ2V0cyxuPXQuZWxlbWVudCxyPXQudHlwZSxpPXQuZXZlbnRUYXJnZXQ7cy5pbnRlcmFjdGFibGVzLmZvckVhY2hNYXRjaChuLGZ1bmN0aW9uKHQpe3ZhciBzPXQuZXZlbnRzLGE9cy5vcHRpb25zO3Nbcl0mJm8uZWxlbWVudChuKSYmdC50ZXN0SWdub3JlQWxsb3coYSxuLGkpJiZlLnB1c2goe2VsZW1lbnQ6bixldmVudGFibGU6cyxwcm9wczp7aW50ZXJhY3RhYmxlOnR9fSl9KX0pLGkuc2lnbmFscy5vbihcIm5ld1wiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW50ZXJhY3RhYmxlO2UuZXZlbnRzLmdldFJlY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGUuZ2V0UmVjdCh0KX19KSxpLnNpZ25hbHMub24oXCJzZXRcIixmdW5jdGlvbih0KXt2YXIgZT10LmludGVyYWN0YWJsZSxuPXQub3B0aW9uczthKGUuZXZlbnRzLm9wdGlvbnMsci5kZWZhdWx0cyksYShlLmV2ZW50cy5vcHRpb25zLG4pfSksbChpLmV2ZW50VHlwZXMsci50eXBlcyksaS5wcm90b3R5cGUucG9pbnRlckV2ZW50cz1mdW5jdGlvbih0KXtyZXR1cm4gYSh0aGlzLmV2ZW50cy5vcHRpb25zLHQpLHRoaXN9O3ZhciBwPWkucHJvdG90eXBlLl9iYWNrQ29tcGF0T3B0aW9uO2kucHJvdG90eXBlLl9iYWNrQ29tcGF0T3B0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIG49cC5jYWxsKHRoaXMsdCxlKTtyZXR1cm4gbj09PXRoaXMmJih0aGlzLmV2ZW50cy5vcHRpb25zW3RdPWUpLG59LGkuc2V0dGluZ3NNZXRob2RzLnB1c2goXCJwb2ludGVyRXZlbnRzXCIpfSx7XCIuLi9JbnRlcmFjdGFibGVcIjo0LFwiLi4vc2NvcGVcIjozMyxcIi4uL3V0aWxzL2FyclwiOjM1LFwiLi4vdXRpbHMvZXh0ZW5kXCI6NDAsXCIuLi91dGlscy9pc1wiOjQ1LFwiLi9iYXNlXCI6MzB9XSwzMzpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPXQoXCIuL3V0aWxzXCIpLGk9dChcIi4vdXRpbHMvZXZlbnRzXCIpLG89dChcIi4vdXRpbHMvU2lnbmFsc1wiKS5uZXcoKSxzPXQoXCIuL3V0aWxzL3dpbmRvd1wiKSxhPXMuZ2V0V2luZG93LGM9e3NpZ25hbHM6byxldmVudHM6aSx1dGlsczpyLGRvY3VtZW50OnQoXCIuL3V0aWxzL2RvbU9iamVjdHNcIikuZG9jdW1lbnQsZG9jdW1lbnRzOltdLGFkZERvY3VtZW50OmZ1bmN0aW9uKHQsZSl7aWYoci5jb250YWlucyhjLmRvY3VtZW50cyx0KSlyZXR1cm4hMTtlPWV8fGEodCksYy5kb2N1bWVudHMucHVzaCh0KSxpLmRvY3VtZW50cy5wdXNoKHQpLHQhPT1jLmRvY3VtZW50JiZpLmFkZChlLFwidW5sb2FkXCIsYy5vbldpbmRvd1VubG9hZCksby5maXJlKFwiYWRkLWRvY3VtZW50XCIse2RvYzp0LHdpbjplfSl9LHJlbW92ZURvY3VtZW50OmZ1bmN0aW9uKHQsZSl7dmFyIG49Yy5kb2N1bWVudHMuaW5kZXhPZih0KTtlPWV8fGEodCksaS5yZW1vdmUoZSxcInVubG9hZFwiLGMub25XaW5kb3dVbmxvYWQpLGMuZG9jdW1lbnRzLnNwbGljZShuLDEpLGkuZG9jdW1lbnRzLnNwbGljZShuLDEpLG8uZmlyZShcInJlbW92ZS1kb2N1bWVudFwiLHt3aW46ZSxkb2M6dH0pfSxvbldpbmRvd1VubG9hZDpmdW5jdGlvbigpe2MucmVtb3ZlRG9jdW1lbnQodGhpcy5kb2N1bWVudCx0aGlzKX19O2UuZXhwb3J0cz1jfSx7XCIuL3V0aWxzXCI6NDMsXCIuL3V0aWxzL1NpZ25hbHNcIjozNCxcIi4vdXRpbHMvZG9tT2JqZWN0c1wiOjM3LFwiLi91dGlscy9ldmVudHNcIjozOSxcIi4vdXRpbHMvd2luZG93XCI6NTF9XSwzNDpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3IodGhpcyx0KSx0aGlzLmxpc3RlbmVycz17fX1yZXR1cm4gdC5wcm90b3R5cGUub249ZnVuY3Rpb24odCxlKXtpZighdGhpcy5saXN0ZW5lcnNbdF0pcmV0dXJuIHZvaWQodGhpcy5saXN0ZW5lcnNbdF09W2VdKTt0aGlzLmxpc3RlbmVyc1t0XS5wdXNoKGUpfSx0LnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmxpc3RlbmVyc1t0XSl7dmFyIG49dGhpcy5saXN0ZW5lcnNbdF0uaW5kZXhPZihlKTstMSE9PW4mJnRoaXMubGlzdGVuZXJzW3RdLnNwbGljZShuLDEpfX0sdC5wcm90b3R5cGUuZmlyZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubGlzdGVuZXJzW3RdO2lmKG4pZm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBpO2k9bltyXTt2YXIgbz1pO2lmKCExPT09byhlLHQpKXJldHVybn19LHR9KCk7aS5uZXc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGl9LGUuZXhwb3J0cz1pfSx7fV0sMzU6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7cmV0dXJuLTEhPT10LmluZGV4T2YoZSl9ZnVuY3Rpb24gaSh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcjtyPWVbbl07dmFyIGk9cjt0LnB1c2goaSl9cmV0dXJuIHR9ZS5leHBvcnRzPXtjb250YWluczpyLG1lcmdlOml9fSx7fV0sMzY6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KFwiLi93aW5kb3dcIiksaT1yLndpbmRvdyxvPXQoXCIuL2lzXCIpLHM9dChcIi4vZG9tT2JqZWN0c1wiKSxhPXMuRWxlbWVudCxjPWkubmF2aWdhdG9yLGw9e3N1cHBvcnRzVG91Y2g6ISEoXCJvbnRvdWNoc3RhcnRcImluIGl8fG8uZnVuY3Rpb24oaS5Eb2N1bWVudFRvdWNoKSYmcy5kb2N1bWVudCBpbnN0YW5jZW9mIGkuRG9jdW1lbnRUb3VjaCksc3VwcG9ydHNQb2ludGVyRXZlbnQ6ISFzLlBvaW50ZXJFdmVudCxpc0lPUzc6L2lQKGhvbmV8b2R8YWQpLy50ZXN0KGMucGxhdGZvcm0pJiYvT1MgN1teXFxkXS8udGVzdChjLmFwcFZlcnNpb24pLGlzSWU5Oi9NU0lFIDkvLnRlc3QoYy51c2VyQWdlbnQpLHByZWZpeGVkTWF0Y2hlc1NlbGVjdG9yOlwibWF0Y2hlc1wiaW4gYS5wcm90b3R5cGU/XCJtYXRjaGVzXCI6XCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3JcImluIGEucHJvdG90eXBlP1wid2Via2l0TWF0Y2hlc1NlbGVjdG9yXCI6XCJtb3pNYXRjaGVzU2VsZWN0b3JcImluIGEucHJvdG90eXBlP1wibW96TWF0Y2hlc1NlbGVjdG9yXCI6XCJvTWF0Y2hlc1NlbGVjdG9yXCJpbiBhLnByb3RvdHlwZT9cIm9NYXRjaGVzU2VsZWN0b3JcIjpcIm1zTWF0Y2hlc1NlbGVjdG9yXCIscEV2ZW50VHlwZXM6cy5Qb2ludGVyRXZlbnQ/cy5Qb2ludGVyRXZlbnQ9PT1pLk1TUG9pbnRlckV2ZW50P3t1cDpcIk1TUG9pbnRlclVwXCIsZG93bjpcIk1TUG9pbnRlckRvd25cIixvdmVyOlwibW91c2VvdmVyXCIsb3V0OlwibW91c2VvdXRcIixtb3ZlOlwiTVNQb2ludGVyTW92ZVwiLGNhbmNlbDpcIk1TUG9pbnRlckNhbmNlbFwifTp7dXA6XCJwb2ludGVydXBcIixkb3duOlwicG9pbnRlcmRvd25cIixvdmVyOlwicG9pbnRlcm92ZXJcIixvdXQ6XCJwb2ludGVyb3V0XCIsbW92ZTpcInBvaW50ZXJtb3ZlXCIsY2FuY2VsOlwicG9pbnRlcmNhbmNlbFwifTpudWxsLHdoZWVsRXZlbnQ6XCJvbm1vdXNld2hlZWxcImluIHMuZG9jdW1lbnQ/XCJtb3VzZXdoZWVsXCI6XCJ3aGVlbFwifTtsLmlzT3BlcmFNb2JpbGU9XCJPcGVyYVwiPT09Yy5hcHBOYW1lJiZsLnN1cHBvcnRzVG91Y2gmJmMudXNlckFnZW50Lm1hdGNoKFwiUHJlc3RvXCIpLGUuZXhwb3J0cz1sfSx7XCIuL2RvbU9iamVjdHNcIjozNyxcIi4vaXNcIjo0NSxcIi4vd2luZG93XCI6NTF9XSwzNzpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoKXt9dmFyIGk9e30sbz10KFwiLi93aW5kb3dcIikud2luZG93O2kuZG9jdW1lbnQ9by5kb2N1bWVudCxpLkRvY3VtZW50RnJhZ21lbnQ9by5Eb2N1bWVudEZyYWdtZW50fHxyLGkuU1ZHRWxlbWVudD1vLlNWR0VsZW1lbnR8fHIsaS5TVkdTVkdFbGVtZW50PW8uU1ZHU1ZHRWxlbWVudHx8cixpLlNWR0VsZW1lbnRJbnN0YW5jZT1vLlNWR0VsZW1lbnRJbnN0YW5jZXx8cixpLkVsZW1lbnQ9by5FbGVtZW50fHxyLGkuSFRNTEVsZW1lbnQ9by5IVE1MRWxlbWVudHx8aS5FbGVtZW50LGkuRXZlbnQ9by5FdmVudCxpLlRvdWNoPW8uVG91Y2h8fHIsaS5Qb2ludGVyRXZlbnQ9by5Qb2ludGVyRXZlbnR8fG8uTVNQb2ludGVyRXZlbnQsZS5leHBvcnRzPWl9LHtcIi4vd2luZG93XCI6NTF9XSwzODpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPXQoXCIuL3dpbmRvd1wiKSxpPXQoXCIuL2Jyb3dzZXJcIiksbz10KFwiLi9pc1wiKSxzPXQoXCIuL2RvbU9iamVjdHNcIiksYT17bm9kZUNvbnRhaW5zOmZ1bmN0aW9uKHQsZSl7Zm9yKDtlOyl7aWYoZT09PXQpcmV0dXJuITA7ZT1lLnBhcmVudE5vZGV9cmV0dXJuITF9LGNsb3Nlc3Q6ZnVuY3Rpb24odCxlKXtmb3IoO28uZWxlbWVudCh0KTspe2lmKGEubWF0Y2hlc1NlbGVjdG9yKHQsZSkpcmV0dXJuIHQ7dD1hLnBhcmVudE5vZGUodCl9cmV0dXJuIG51bGx9LHBhcmVudE5vZGU6ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnROb2RlO2lmKG8uZG9jRnJhZyhlKSl7Zm9yKDsoZT1lLmhvc3QpJiZvLmRvY0ZyYWcoZSk7KTtyZXR1cm4gZX1yZXR1cm4gZX0sbWF0Y2hlc1NlbGVjdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIud2luZG93IT09ci5yZWFsV2luZG93JiYoZT1lLnJlcGxhY2UoL1xcL2RlZXBcXC8vZyxcIiBcIikpLHRbaS5wcmVmaXhlZE1hdGNoZXNTZWxlY3Rvcl0oZSl9LGluZGV4T2ZEZWVwZXN0RWxlbWVudDpmdW5jdGlvbih0KXt2YXIgZT1bXSxuPVtdLHI9dm9pZCAwLGk9dFswXSxvPWk/MDotMSxhPXZvaWQgMCxjPXZvaWQgMCxsPXZvaWQgMCxwPXZvaWQgMDtmb3IobD0xO2w8dC5sZW5ndGg7bCsrKWlmKChyPXRbbF0pJiZyIT09aSlpZihpKXtpZihyLnBhcmVudE5vZGUhPT1yLm93bmVyRG9jdW1lbnQpaWYoaS5wYXJlbnROb2RlIT09ci5vd25lckRvY3VtZW50KXtpZighZS5sZW5ndGgpZm9yKGE9aTthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZSE9PWEub3duZXJEb2N1bWVudDspZS51bnNoaWZ0KGEpLGE9YS5wYXJlbnROb2RlO2lmKGkgaW5zdGFuY2VvZiBzLkhUTUxFbGVtZW50JiZyIGluc3RhbmNlb2Ygcy5TVkdFbGVtZW50JiYhKHIgaW5zdGFuY2VvZiBzLlNWR1NWR0VsZW1lbnQpKXtpZihyPT09aS5wYXJlbnROb2RlKWNvbnRpbnVlO2E9ci5vd25lclNWR0VsZW1lbnR9ZWxzZSBhPXI7Zm9yKG49W107YS5wYXJlbnROb2RlIT09YS5vd25lckRvY3VtZW50OyluLnVuc2hpZnQoYSksYT1hLnBhcmVudE5vZGU7Zm9yKHA9MDtuW3BdJiZuW3BdPT09ZVtwXTspcCsrO3ZhciB1PVtuW3AtMV0sbltwXSxlW3BdXTtmb3IoYz11WzBdLmxhc3RDaGlsZDtjOyl7aWYoYz09PXVbMV0pe2k9cixvPWwsZT1bXTticmVha31pZihjPT09dVsyXSlicmVhaztjPWMucHJldmlvdXNTaWJsaW5nfX1lbHNlIGk9cixvPWx9ZWxzZSBpPXIsbz1sO3JldHVybiBvfSxtYXRjaGVzVXBUbzpmdW5jdGlvbih0LGUsbil7Zm9yKDtvLmVsZW1lbnQodCk7KXtpZihhLm1hdGNoZXNTZWxlY3Rvcih0LGUpKXJldHVybiEwO2lmKCh0PWEucGFyZW50Tm9kZSh0KSk9PT1uKXJldHVybiBhLm1hdGNoZXNTZWxlY3Rvcih0LGUpfXJldHVybiExfSxnZXRBY3R1YWxFbGVtZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2Ygcy5TVkdFbGVtZW50SW5zdGFuY2U/dC5jb3JyZXNwb25kaW5nVXNlRWxlbWVudDp0fSxnZXRTY3JvbGxYWTpmdW5jdGlvbih0KXtyZXR1cm4gdD10fHxyLndpbmRvdyx7eDp0LnNjcm9sbFh8fHQuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQseTp0LnNjcm9sbFl8fHQuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcH19LGdldEVsZW1lbnRDbGllbnRSZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPXQgaW5zdGFuY2VvZiBzLlNWR0VsZW1lbnQ/dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTp0LmdldENsaWVudFJlY3RzKClbMF07cmV0dXJuIGUmJntsZWZ0OmUubGVmdCxyaWdodDplLnJpZ2h0LHRvcDplLnRvcCxib3R0b206ZS5ib3R0b20sd2lkdGg6ZS53aWR0aHx8ZS5yaWdodC1lLmxlZnQsaGVpZ2h0OmUuaGVpZ2h0fHxlLmJvdHRvbS1lLnRvcH19LGdldEVsZW1lbnRSZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPWEuZ2V0RWxlbWVudENsaWVudFJlY3QodCk7aWYoIWkuaXNJT1M3JiZlKXt2YXIgbj1hLmdldFNjcm9sbFhZKHIuZ2V0V2luZG93KHQpKTtlLmxlZnQrPW4ueCxlLnJpZ2h0Kz1uLngsZS50b3ArPW4ueSxlLmJvdHRvbSs9bi55fXJldHVybiBlfSxnZXRQYXRoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXTt0OyllLnB1c2godCksdD1hLnBhcmVudE5vZGUodCk7cmV0dXJuIGV9LHRyeVNlbGVjdG9yOmZ1bmN0aW9uKHQpe3JldHVybiEhby5zdHJpbmcodCkmJihzLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodCksITApfX07ZS5leHBvcnRzPWF9LHtcIi4vYnJvd3NlclwiOjM2LFwiLi9kb21PYmplY3RzXCI6MzcsXCIuL2lzXCI6NDUsXCIuL3dpbmRvd1wiOjUxfV0sMzk6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSxuLHIpe3ZhciBpPXAociksbz14LmluZGV4T2YodCkscz1iW29dO3N8fChzPXtldmVudHM6e30sdHlwZUNvdW50OjB9LG89eC5wdXNoKHQpLTEsYi5wdXNoKHMpKSxzLmV2ZW50c1tlXXx8KHMuZXZlbnRzW2VdPVtdLHMudHlwZUNvdW50KyspLHkocy5ldmVudHNbZV0sbil8fCh0LmFkZEV2ZW50TGlzdGVuZXIoZSxuLFQ/aTohIWkuY2FwdHVyZSkscy5ldmVudHNbZV0ucHVzaChuKSl9ZnVuY3Rpb24gaSh0LGUsbixyKXt2YXIgbz1wKHIpLHM9eC5pbmRleE9mKHQpLGE9YltzXTtpZihhJiZhLmV2ZW50cylpZihcImFsbFwiIT09ZSl7aWYoYS5ldmVudHNbZV0pe3ZhciBjPWEuZXZlbnRzW2VdLmxlbmd0aDtpZihcImFsbFwiPT09bil7Zm9yKHZhciBsPTA7bDxjO2wrKylpKHQsZSxhLmV2ZW50c1tlXVtsXSxvKTtyZXR1cm59Zm9yKHZhciB1PTA7dTxjO3UrKylpZihhLmV2ZW50c1tlXVt1XT09PW4pe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9uXCIrZSxuLFQ/bzohIW8uY2FwdHVyZSksYS5ldmVudHNbZV0uc3BsaWNlKHUsMSk7YnJlYWt9YS5ldmVudHNbZV0mJjA9PT1hLmV2ZW50c1tlXS5sZW5ndGgmJihhLmV2ZW50c1tlXT1udWxsLGEudHlwZUNvdW50LS0pfWEudHlwZUNvdW50fHwoYi5zcGxpY2UocywxKSx4LnNwbGljZShzLDEpKX1lbHNlIGZvcihlIGluIGEuZXZlbnRzKWEuZXZlbnRzLmhhc093blByb3BlcnR5KGUpJiZpKHQsZSxcImFsbFwiKX1mdW5jdGlvbiBvKHQsZSxuLGksbyl7dmFyIHM9cChvKTtpZighd1tuXSl7d1tuXT17c2VsZWN0b3JzOltdLGNvbnRleHRzOltdLGxpc3RlbmVyczpbXX07Zm9yKHZhciBsPTA7bDxFLmxlbmd0aDtsKyspe3ZhciB1PUVbbF07cih1LG4sYSkscih1LG4sYywhMCl9fXZhciBkPXdbbl0sZj12b2lkIDA7Zm9yKGY9ZC5zZWxlY3RvcnMubGVuZ3RoLTE7Zj49MCYmKGQuc2VsZWN0b3JzW2ZdIT09dHx8ZC5jb250ZXh0c1tmXSE9PWUpO2YtLSk7LTE9PT1mJiYoZj1kLnNlbGVjdG9ycy5sZW5ndGgsZC5zZWxlY3RvcnMucHVzaCh0KSxkLmNvbnRleHRzLnB1c2goZSksZC5saXN0ZW5lcnMucHVzaChbXSkpLGQubGlzdGVuZXJzW2ZdLnB1c2goW2ksISFzLmNhcHR1cmUscy5wYXNzaXZlXSl9ZnVuY3Rpb24gcyh0LGUsbixyLG8pe3ZhciBzPXAobyksbD13W25dLHU9ITEsZD12b2lkIDA7aWYobClmb3IoZD1sLnNlbGVjdG9ycy5sZW5ndGgtMTtkPj0wO2QtLSlpZihsLnNlbGVjdG9yc1tkXT09PXQmJmwuY29udGV4dHNbZF09PT1lKXtmb3IodmFyIGY9bC5saXN0ZW5lcnNbZF0sdj1mLmxlbmd0aC0xO3Y+PTA7di0tKXt2YXIgZz1mW3ZdLGg9Z1swXSxtPWdbMV0seT1nWzJdO2lmKGg9PT1yJiZtPT09ISFzLmNhcHR1cmUmJnk9PT1zLnBhc3NpdmUpe2Yuc3BsaWNlKHYsMSksZi5sZW5ndGh8fChsLnNlbGVjdG9ycy5zcGxpY2UoZCwxKSxsLmNvbnRleHRzLnNwbGljZShkLDEpLGwubGlzdGVuZXJzLnNwbGljZShkLDEpLGkoZSxuLGEpLGkoZSxuLGMsITApLGwuc2VsZWN0b3JzLmxlbmd0aHx8KHdbbl09bnVsbCkpLHU9ITA7YnJlYWt9fWlmKHUpYnJlYWt9fWZ1bmN0aW9uIGEodCxlKXt2YXIgbj1wKGUpLHI9e30saT13W3QudHlwZV0sbz1mLmdldEV2ZW50VGFyZ2V0cyh0KSxzPW9bMF0sYT1zO2Zvcih2KHIsdCksci5vcmlnaW5hbEV2ZW50PXQsci5wcmV2ZW50RGVmYXVsdD1sO3UuZWxlbWVudChhKTspe2Zvcih2YXIgYz0wO2M8aS5zZWxlY3RvcnMubGVuZ3RoO2MrKyl7dmFyIGc9aS5zZWxlY3RvcnNbY10saD1pLmNvbnRleHRzW2NdO2lmKGQubWF0Y2hlc1NlbGVjdG9yKGEsZykmJmQubm9kZUNvbnRhaW5zKGgscykmJmQubm9kZUNvbnRhaW5zKGgsYSkpe3ZhciBtPWkubGlzdGVuZXJzW2NdO3IuY3VycmVudFRhcmdldD1hO2Zvcih2YXIgeT0wO3k8bS5sZW5ndGg7eSsrKXt2YXIgeD1tW3ldLGI9eFswXSxFPXhbMV0sVD14WzJdO0U9PT0hIW4uY2FwdHVyZSYmVD09PW4ucGFzc2l2ZSYmYihyKX19fWE9ZC5wYXJlbnROb2RlKGEpfX1mdW5jdGlvbiBjKHQpe3JldHVybiBhLmNhbGwodGhpcyx0LCEwKX1mdW5jdGlvbiBsKCl7dGhpcy5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gdS5vYmplY3QodCk/dDp7Y2FwdHVyZTp0fX12YXIgdT10KFwiLi9pc1wiKSxkPXQoXCIuL2RvbVV0aWxzXCIpLGY9dChcIi4vcG9pbnRlclV0aWxzXCIpLHY9dChcIi4vcG9pbnRlckV4dGVuZFwiKSxnPXQoXCIuL3dpbmRvd1wiKSxoPWcud2luZG93LG09dChcIi4vYXJyXCIpLHk9bS5jb250YWlucyx4PVtdLGI9W10sdz17fSxFPVtdLFQ9ZnVuY3Rpb24oKXt2YXIgdD0hMTtyZXR1cm4gaC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsbnVsbCx7Z2V0IGNhcHR1cmUoKXt0PSEwfX0pLHR9KCk7ZS5leHBvcnRzPXthZGQ6cixyZW1vdmU6aSxhZGREZWxlZ2F0ZTpvLHJlbW92ZURlbGVnYXRlOnMsZGVsZWdhdGVMaXN0ZW5lcjphLGRlbGVnYXRlVXNlQ2FwdHVyZTpjLGRlbGVnYXRlZEV2ZW50czp3LGRvY3VtZW50czpFLHN1cHBvcnRzT3B0aW9uczpULF9lbGVtZW50czp4LF90YXJnZXRzOmJ9fSx7XCIuL2FyclwiOjM1LFwiLi9kb21VdGlsc1wiOjM4LFwiLi9pc1wiOjQ1LFwiLi9wb2ludGVyRXh0ZW5kXCI6NDcsXCIuL3BvaW50ZXJVdGlsc1wiOjQ4LFwiLi93aW5kb3dcIjo1MX1dLDQwOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpdFtuXT1lW25dO3JldHVybiB0fX0se31dLDQxOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dChcIi4vcmVjdFwiKSxpPXIucmVzb2x2ZVJlY3RMaWtlLG89ci5yZWN0VG9YWTtlLmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQub3B0aW9uc1tuXSxzPXImJnIub3JpZ2luLGE9c3x8dC5vcHRpb25zLm9yaWdpbixjPWkoYSx0LGUsW3QmJmVdKTtyZXR1cm4gbyhjKXx8e3g6MCx5OjB9fX0se1wiLi9yZWN0XCI6NTB9XSw0MjpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLnNxcnQodCp0K2UqZSl9fSx7fV0sNDM6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KFwiLi9leHRlbmRcIiksaT10KFwiLi93aW5kb3dcIiksbz17d2Fybk9uY2U6ZnVuY3Rpb24odCxlKXt2YXIgbj0hMTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbnx8KGkud2luZG93LmNvbnNvbGUud2FybihlKSxuPSEwKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LF9nZXRRQmV6aWVyVmFsdWU6ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9MS10O3JldHVybiBpKmkqZSsyKmkqdCpuK3QqdCpyfSxnZXRRdWFkcmF0aWNDdXJ2ZVBvaW50OmZ1bmN0aW9uKHQsZSxuLHIsaSxzLGEpe3JldHVybnt4Om8uX2dldFFCZXppZXJWYWx1ZShhLHQsbixpKSx5Om8uX2dldFFCZXppZXJWYWx1ZShhLGUscixzKX19LGVhc2VPdXRRdWFkOmZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0Lz1yLC1uKnQqKHQtMikrZX0sY29weUFjdGlvbjpmdW5jdGlvbih0LGUpe3JldHVybiB0Lm5hbWU9ZS5uYW1lLHQuYXhpcz1lLmF4aXMsdC5lZGdlcz1lLmVkZ2VzLHR9LGlzOnQoXCIuL2lzXCIpLGV4dGVuZDpyLGh5cG90OnQoXCIuL2h5cG90XCIpLGdldE9yaWdpblhZOnQoXCIuL2dldE9yaWdpblhZXCIpfTtyKG8sdChcIi4vYXJyXCIpKSxyKG8sdChcIi4vZG9tVXRpbHNcIikpLHIobyx0KFwiLi9wb2ludGVyVXRpbHNcIikpLHIobyx0KFwiLi9yZWN0XCIpKSxlLmV4cG9ydHM9b30se1wiLi9hcnJcIjozNSxcIi4vZG9tVXRpbHNcIjozOCxcIi4vZXh0ZW5kXCI6NDAsXCIuL2dldE9yaWdpblhZXCI6NDEsXCIuL2h5cG90XCI6NDIsXCIuL2lzXCI6NDUsXCIuL3BvaW50ZXJVdGlsc1wiOjQ4LFwiLi9yZWN0XCI6NTAsXCIuL3dpbmRvd1wiOjUxfV0sNDQ6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KFwiLi4vc2NvcGVcIiksaT10KFwiLi9pbmRleFwiKSxvPXttZXRob2RPcmRlcjpbXCJzaW11bGF0aW9uUmVzdW1lXCIsXCJtb3VzZU9yUGVuXCIsXCJoYXNQb2ludGVyXCIsXCJpZGxlXCJdLHNlYXJjaDpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPWkuZ2V0UG9pbnRlclR5cGUodCkscz1pLmdldFBvaW50ZXJJZCh0KSxhPXtwb2ludGVyOnQscG9pbnRlcklkOnMscG9pbnRlclR5cGU6cixldmVudFR5cGU6ZSxldmVudFRhcmdldDpufSxjPTA7YzxvLm1ldGhvZE9yZGVyLmxlbmd0aDtjKyspe3ZhciBsO2w9by5tZXRob2RPcmRlcltjXTt2YXIgcD1sLHU9b1twXShhKTtpZih1KXJldHVybiB1fX0sc2ltdWxhdGlvblJlc3VtZTpmdW5jdGlvbih0KXt2YXIgZT10LnBvaW50ZXJUeXBlLG49dC5ldmVudFR5cGUsbz10LmV2ZW50VGFyZ2V0O2lmKCEvZG93bnxzdGFydC9pLnRlc3QobikpcmV0dXJuIG51bGw7Zm9yKHZhciBzPTA7czxyLmludGVyYWN0aW9ucy5sZW5ndGg7cysrKXt2YXIgYTthPXIuaW50ZXJhY3Rpb25zW3NdO3ZhciBjPWEsbD1vO2lmKGMuc2ltdWxhdGlvbiYmYy5zaW11bGF0aW9uLmFsbG93UmVzdW1lJiZjLnBvaW50ZXJUeXBlPT09ZSlmb3IoO2w7KXtpZihsPT09Yy5lbGVtZW50KXJldHVybiBjO2w9aS5wYXJlbnROb2RlKGwpfX1yZXR1cm4gbnVsbH0sbW91c2VPclBlbjpmdW5jdGlvbih0KXt2YXIgZT10LnBvaW50ZXJJZCxuPXQucG9pbnRlclR5cGUsbz10LmV2ZW50VHlwZTtpZihcIm1vdXNlXCIhPT1uJiZcInBlblwiIT09bilyZXR1cm4gbnVsbDtmb3IodmFyIHM9dm9pZCAwLGE9MDthPHIuaW50ZXJhY3Rpb25zLmxlbmd0aDthKyspe3ZhciBjO2M9ci5pbnRlcmFjdGlvbnNbYV07dmFyIGw9YztpZihsLnBvaW50ZXJUeXBlPT09bil7aWYobC5zaW11bGF0aW9uJiYhaS5jb250YWlucyhsLnBvaW50ZXJJZHMsZSkpY29udGludWU7aWYobC5pbnRlcmFjdGluZygpKXJldHVybiBsO3N8fChzPWwpfX1pZihzKXJldHVybiBzO2Zvcih2YXIgcD0wO3A8ci5pbnRlcmFjdGlvbnMubGVuZ3RoO3ArKyl7dmFyIHU7dT1yLmludGVyYWN0aW9uc1twXTt2YXIgZD11O2lmKCEoZC5wb2ludGVyVHlwZSE9PW58fC9kb3duL2kudGVzdChvKSYmZC5zaW11bGF0aW9uKSlyZXR1cm4gZH1yZXR1cm4gbnVsbH0saGFzUG9pbnRlcjpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5wb2ludGVySWQsbj0wO248ci5pbnRlcmFjdGlvbnMubGVuZ3RoO24rKyl7dmFyIG87bz1yLmludGVyYWN0aW9uc1tuXTt2YXIgcz1vO2lmKGkuY29udGFpbnMocy5wb2ludGVySWRzLGUpKXJldHVybiBzfX0saWRsZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5wb2ludGVyVHlwZSxuPTA7bjxyLmludGVyYWN0aW9ucy5sZW5ndGg7bisrKXt2YXIgaTtpPXIuaW50ZXJhY3Rpb25zW25dO3ZhciBvPWk7aWYoMT09PW8ucG9pbnRlcklkcy5sZW5ndGgpe3ZhciBzPW8udGFyZ2V0O2lmKHMmJiFzLm9wdGlvbnMuZ2VzdHVyZS5lbmFibGVkKWNvbnRpbnVlfWVsc2UgaWYoby5wb2ludGVySWRzLmxlbmd0aD49Miljb250aW51ZTtpZighby5pbnRlcmFjdGluZygpJiZlPT09by5wb2ludGVyVHlwZSlyZXR1cm4gb31yZXR1cm4gbnVsbH19O2UuZXhwb3J0cz1vfSx7XCIuLi9zY29wZVwiOjMzLFwiLi9pbmRleFwiOjQzfV0sNDU6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxpPXQoXCIuL3dpbmRvd1wiKSxvPXQoXCIuL2lzV2luZG93XCIpLHM9e2FycmF5OmZ1bmN0aW9uKCl7fSx3aW5kb3c6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1pLndpbmRvd3x8byh0KX0sZG9jRnJhZzpmdW5jdGlvbih0KXtyZXR1cm4gcy5vYmplY3QodCkmJjExPT09dC5ub2RlVHlwZX0sb2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmXCJvYmplY3RcIj09PSh2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6cih0KSl9LGZ1bmN0aW9uOmZ1bmN0aW9uKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR9LG51bWJlcjpmdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdH0sYm9vbDpmdW5jdGlvbih0KXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIHR9LHN0cmluZzpmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdH0sZWxlbWVudDpmdW5jdGlvbih0KXtpZighdHx8XCJvYmplY3RcIiE9PSh2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6cih0KSkpcmV0dXJuITE7dmFyIGU9aS5nZXRXaW5kb3codCl8fGkud2luZG93O3JldHVybi9vYmplY3R8ZnVuY3Rpb24vLnRlc3QocihlLkVsZW1lbnQpKT90IGluc3RhbmNlb2YgZS5FbGVtZW50OjE9PT10Lm5vZGVUeXBlJiZcInN0cmluZ1wiPT10eXBlb2YgdC5ub2RlTmFtZX19O3MuYXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuIHMub2JqZWN0KHQpJiZ2b2lkIDAhPT10Lmxlbmd0aCYmcy5mdW5jdGlvbih0LnNwbGljZSl9LGUuZXhwb3J0cz1zfSx7XCIuL2lzV2luZG93XCI6NDYsXCIuL3dpbmRvd1wiOjUxfV0sNDY6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuISghdHx8IXQuV2luZG93KSYmdCBpbnN0YW5jZW9mIHQuV2luZG93fX0se31dLDQ3OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LG4pe2Zvcih2YXIgciBpbiBuKXt2YXIgaT1lLmV4cG9ydHMucHJlZml4ZWRQcm9wUkVzLG89ITE7Zm9yKHZhciBzIGluIGkpaWYoMD09PXIuaW5kZXhPZihzKSYmaVtzXS50ZXN0KHIpKXtvPSEwO2JyZWFrfW98fFwiZnVuY3Rpb25cIj09dHlwZW9mIG5bcl18fCh0W3JdPW5bcl0pfXJldHVybiB0fXIucHJlZml4ZWRQcm9wUkVzPXt3ZWJraXQ6LyhNb3ZlbWVudFtYWV18UmFkaXVzW1hZXXxSb3RhdGlvbkFuZ2xlfEZvcmNlKSQvfSxlLmV4cG9ydHM9cn0se31dLDQ4OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dChcIi4vaHlwb3RcIiksaT10KFwiLi9icm93c2VyXCIpLG89dChcIi4vZG9tT2JqZWN0c1wiKSxzPXQoXCIuL2RvbVV0aWxzXCIpLGE9dChcIi4vZG9tT2JqZWN0c1wiKSxjPXQoXCIuL2lzXCIpLGw9dChcIi4vcG9pbnRlckV4dGVuZFwiKSxwPXtjb3B5Q29vcmRzOmZ1bmN0aW9uKHQsZSl7dC5wYWdlPXQucGFnZXx8e30sdC5wYWdlLng9ZS5wYWdlLngsdC5wYWdlLnk9ZS5wYWdlLnksdC5jbGllbnQ9dC5jbGllbnR8fHt9LHQuY2xpZW50Lng9ZS5jbGllbnQueCx0LmNsaWVudC55PWUuY2xpZW50LnksdC50aW1lU3RhbXA9ZS50aW1lU3RhbXB9LHNldENvb3JkRGVsdGFzOmZ1bmN0aW9uKHQsZSxuKXt0LnBhZ2UueD1uLnBhZ2UueC1lLnBhZ2UueCx0LnBhZ2UueT1uLnBhZ2UueS1lLnBhZ2UueSx0LmNsaWVudC54PW4uY2xpZW50LngtZS5jbGllbnQueCx0LmNsaWVudC55PW4uY2xpZW50LnktZS5jbGllbnQueSx0LnRpbWVTdGFtcD1uLnRpbWVTdGFtcC1lLnRpbWVTdGFtcDt2YXIgaT1NYXRoLm1heCh0LnRpbWVTdGFtcC8xZTMsLjAwMSk7dC5wYWdlLnNwZWVkPXIodC5wYWdlLngsdC5wYWdlLnkpL2ksdC5wYWdlLnZ4PXQucGFnZS54L2ksdC5wYWdlLnZ5PXQucGFnZS55L2ksdC5jbGllbnQuc3BlZWQ9cih0LmNsaWVudC54LHQucGFnZS55KS9pLHQuY2xpZW50LnZ4PXQuY2xpZW50LngvaSx0LmNsaWVudC52eT10LmNsaWVudC55L2l9LGlzTmF0aXZlUG9pbnRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIG8uRXZlbnR8fHQgaW5zdGFuY2VvZiBvLlRvdWNofSxnZXRYWTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIG49bnx8e30sdD10fHxcInBhZ2VcIixuLng9ZVt0K1wiWFwiXSxuLnk9ZVt0K1wiWVwiXSxufSxnZXRQYWdlWFk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1lfHx7fSxpLmlzT3BlcmFNb2JpbGUmJnAuaXNOYXRpdmVQb2ludGVyKHQpPyhwLmdldFhZKFwic2NyZWVuXCIsdCxlKSxlLngrPXdpbmRvdy5zY3JvbGxYLGUueSs9d2luZG93LnNjcm9sbFkpOnAuZ2V0WFkoXCJwYWdlXCIsdCxlKSxlfSxnZXRDbGllbnRYWTpmdW5jdGlvbih0LGUpe3JldHVybiBlPWV8fHt9LGkuaXNPcGVyYU1vYmlsZSYmcC5pc05hdGl2ZVBvaW50ZXIodCk/cC5nZXRYWShcInNjcmVlblwiLHQsZSk6cC5nZXRYWShcImNsaWVudFwiLHQsZSksZX0sZ2V0UG9pbnRlcklkOmZ1bmN0aW9uKHQpe3JldHVybiBjLm51bWJlcih0LnBvaW50ZXJJZCk/dC5wb2ludGVySWQ6dC5pZGVudGlmaWVyfSxzZXRDb29yZHM6ZnVuY3Rpb24odCxlLG4pe3ZhciByPWUubGVuZ3RoPjE/cC5wb2ludGVyQXZlcmFnZShlKTplWzBdLGk9e307cC5nZXRQYWdlWFkocixpKSx0LnBhZ2UueD1pLngsdC5wYWdlLnk9aS55LHAuZ2V0Q2xpZW50WFkocixpKSx0LmNsaWVudC54PWkueCx0LmNsaWVudC55PWkueSx0LnRpbWVTdGFtcD1jLm51bWJlcihuKT9uOihuZXcgRGF0ZSkuZ2V0VGltZSgpfSxwb2ludGVyRXh0ZW5kOmwsZ2V0VG91Y2hQYWlyOmZ1bmN0aW9uKHQpe3ZhciBlPVtdO3JldHVybiBjLmFycmF5KHQpPyhlWzBdPXRbMF0sZVsxXT10WzFdKTpcInRvdWNoZW5kXCI9PT10LnR5cGU/MT09PXQudG91Y2hlcy5sZW5ndGg/KGVbMF09dC50b3VjaGVzWzBdLGVbMV09dC5jaGFuZ2VkVG91Y2hlc1swXSk6MD09PXQudG91Y2hlcy5sZW5ndGgmJihlWzBdPXQuY2hhbmdlZFRvdWNoZXNbMF0sZVsxXT10LmNoYW5nZWRUb3VjaGVzWzFdKTooZVswXT10LnRvdWNoZXNbMF0sZVsxXT10LnRvdWNoZXNbMV0pLGV9LHBvaW50ZXJBdmVyYWdlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT17cGFnZVg6MCxwYWdlWTowLGNsaWVudFg6MCxjbGllbnRZOjAsc2NyZWVuWDowLHNjcmVlblk6MH0sbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcjtyPXRbbl07dmFyIGk9cjtmb3IodmFyIG8gaW4gZSllW29dKz1pW29dfWZvcih2YXIgcyBpbiBlKWVbc10vPXQubGVuZ3RoO3JldHVybiBlfSx0b3VjaEJCb3g6ZnVuY3Rpb24odCl7aWYodC5sZW5ndGh8fHQudG91Y2hlcyYmdC50b3VjaGVzLmxlbmd0aD4xKXt2YXIgZT1wLmdldFRvdWNoUGFpcih0KSxuPU1hdGgubWluKGVbMF0ucGFnZVgsZVsxXS5wYWdlWCkscj1NYXRoLm1pbihlWzBdLnBhZ2VZLGVbMV0ucGFnZVkpO3JldHVybnt4Om4seTpyLGxlZnQ6bix0b3A6cix3aWR0aDpNYXRoLm1heChlWzBdLnBhZ2VYLGVbMV0ucGFnZVgpLW4saGVpZ2h0Ok1hdGgubWF4KGVbMF0ucGFnZVksZVsxXS5wYWdlWSktcn19fSx0b3VjaERpc3RhbmNlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZStcIlhcIixpPWUrXCJZXCIsbz1wLmdldFRvdWNoUGFpcih0KSxzPW9bMF1bbl0tb1sxXVtuXSxhPW9bMF1baV0tb1sxXVtpXTtyZXR1cm4gcihzLGEpfSx0b3VjaEFuZ2xlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uK1wiWFwiLGk9bitcIllcIixvPXAuZ2V0VG91Y2hQYWlyKHQpLHM9b1sxXVtyXS1vWzBdW3JdLGE9b1sxXVtpXS1vWzBdW2ldO3JldHVybiAxODAqTWF0aC5hdGFuMihhLHMpL01hdGguUEl9LGdldFBvaW50ZXJUeXBlOmZ1bmN0aW9uKHQpe3JldHVybiBjLnN0cmluZyh0LnBvaW50ZXJUeXBlKT90LnBvaW50ZXJUeXBlOmMubnVtYmVyKHQucG9pbnRlclR5cGUpP1t2b2lkIDAsdm9pZCAwLFwidG91Y2hcIixcInBlblwiLFwibW91c2VcIl1bdC5wb2ludGVyVHlwZV06L3RvdWNoLy50ZXN0KHQudHlwZSl8fHQgaW5zdGFuY2VvZiBhLlRvdWNoP1widG91Y2hcIjpcIm1vdXNlXCJ9LGdldEV2ZW50VGFyZ2V0czpmdW5jdGlvbih0KXt2YXIgZT1jLmZ1bmN0aW9uKHQuY29tcG9zZWRQYXRoKT90LmNvbXBvc2VkUGF0aCgpOnQucGF0aDtyZXR1cm5bcy5nZXRBY3R1YWxFbGVtZW50KGU/ZVswXTp0LnRhcmdldCkscy5nZXRBY3R1YWxFbGVtZW50KHQuY3VycmVudFRhcmdldCldfX07ZS5leHBvcnRzPXB9LHtcIi4vYnJvd3NlclwiOjM2LFwiLi9kb21PYmplY3RzXCI6MzcsXCIuL2RvbVV0aWxzXCI6MzgsXCIuL2h5cG90XCI6NDIsXCIuL2lzXCI6NDUsXCIuL3BvaW50ZXJFeHRlbmRcIjo0N31dLDQ5OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7Zm9yKHZhciByPXQoXCIuL3dpbmRvd1wiKSxpPXIud2luZG93LG89W1wibXNcIixcIm1velwiLFwid2Via2l0XCIsXCJvXCJdLHM9MCxhPXZvaWQgMCxjPXZvaWQgMCxsPTA7bDxvLmxlbmd0aCYmIWkucmVxdWVzdEFuaW1hdGlvbkZyYW1lO2wrKylhPWlbb1tsXStcIlJlcXVlc3RBbmltYXRpb25GcmFtZVwiXSxjPWlbb1tsXStcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdfHxpW29bbF0rXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07YXx8KGE9ZnVuY3Rpb24odCl7dmFyIGU9KG5ldyBEYXRlKS5nZXRUaW1lKCksbj1NYXRoLm1heCgwLDE2LShlLXMpKSxyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0KGUrbil9LG4pO3JldHVybiBzPWUrbixyfSksY3x8KGM9ZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KHQpfSksZS5leHBvcnRzPXtyZXF1ZXN0OmEsY2FuY2VsOmN9fSx7XCIuL3dpbmRvd1wiOjUxfV0sNTA6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KFwiLi9leHRlbmRcIiksaT10KFwiLi9pc1wiKSxvPXQoXCIuL2RvbVV0aWxzXCIpLHM9by5jbG9zZXN0LGE9by5wYXJlbnROb2RlLGM9by5nZXRFbGVtZW50UmVjdCxsPXtnZXRTdHJpbmdPcHRpb25SZXN1bHQ6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBpLnN0cmluZyh0KT90PVwicGFyZW50XCI9PT10P2Eobik6XCJzZWxmXCI9PT10P2UuZ2V0UmVjdChuKTpzKG4sdCk6bnVsbH0scmVzb2x2ZVJlY3RMaWtlOmZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0PWwuZ2V0U3RyaW5nT3B0aW9uUmVzdWx0KHQsZSxuKXx8dCxpLmZ1bmN0aW9uKHQpJiYodD10LmFwcGx5KG51bGwscikpLGkuZWxlbWVudCh0KSYmKHQ9Yyh0KSksdH0scmVjdFRvWFk6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnt4OlwieFwiaW4gdD90Lng6dC5sZWZ0LHk6XCJ5XCJpbiB0P3QueTp0LnRvcH19LHh5d2hUb1RsYnI6ZnVuY3Rpb24odCl7cmV0dXJuIXR8fFwibGVmdFwiaW4gdCYmXCJ0b3BcImluIHR8fCh0PXIoe30sdCksdC5sZWZ0PXQueHx8MCx0LnRvcD10Lnl8fDAsdC5yaWdodD10LnJpZ2h0fHx0LmxlZnQrdC53aWR0aCx0LmJvdHRvbT10LmJvdHRvbXx8dC50b3ArdC5oZWlnaHQpLHR9LHRsYnJUb1h5d2g6ZnVuY3Rpb24odCl7cmV0dXJuIXR8fFwieFwiaW4gdCYmXCJ5XCJpbiB0fHwodD1yKHt9LHQpLHQueD10LmxlZnR8fDAsdC50b3A9dC50b3B8fDAsdC53aWR0aD10LndpZHRofHx0LnJpZ2h0LXQueCx0LmhlaWdodD10LmhlaWdodHx8dC5ib3R0b20tdC55KSx0fX07ZS5leHBvcnRzPWx9LHtcIi4vZG9tVXRpbHNcIjozOCxcIi4vZXh0ZW5kXCI6NDAsXCIuL2lzXCI6NDV9XSw1MTpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7aS5yZWFsV2luZG93PXQ7dmFyIGU9dC5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtlLm93bmVyRG9jdW1lbnQhPT10LmRvY3VtZW50JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LndyYXAmJnQud3JhcChlKT09PWUmJih0PXQud3JhcCh0KSksaS53aW5kb3c9dH12YXIgaT1lLmV4cG9ydHMsbz10KFwiLi9pc1dpbmRvd1wiKTtcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93PyhpLndpbmRvdz12b2lkIDAsaS5yZWFsV2luZG93PXZvaWQgMCk6cih3aW5kb3cpLGkuZ2V0V2luZG93PWZ1bmN0aW9uKHQpe2lmKG8odCkpcmV0dXJuIHQ7dmFyIGU9dC5vd25lckRvY3VtZW50fHx0O3JldHVybiBlLmRlZmF1bHRWaWV3fHxlLnBhcmVudFdpbmRvd3x8aS53aW5kb3d9LGkuaW5pdD1yfSx7XCIuL2lzV2luZG93XCI6NDZ9XX0se30sWzFdKSgxKX0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmFjdC5taW4uanMubWFwXG4iLCIvLyAtLS0gZ2xvYmFsIHZhcmlhYmxlc1xuXG52YXIgcGFnZXMgPSAkKCcucGFnZScpO1xudmFyIGNyaXRpY1BvcHVwID0gJCgnI2NyaXRpYycpO1xuXG4vLyAtLS0gR0VORVJBTCBGVU5DVElPTlNcblxuZnVuY3Rpb24gbWFrZUlkKCkge1xuXHR2YXIgcmFuZExldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoNjUgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNikpO1xuXHR2YXIgaWQgPSByYW5kTGV0dGVyICsgRGF0ZS5ub3coKTtcblx0cmV0dXJuIGlkOyBcbn1cblxuZnVuY3Rpb24gZXJyb3JTb3VuZCgpIHtcblx0dmFyIGF1ZGlvID0gbmV3IEF1ZGlvKCdhc3NldHMvYXVkaW8vaW5jb3JyZWN0LnN3Zi5tcDMnKTtcblx0YXVkaW8ucGxheSgpO1xufVxuXG4vLyAtLS0gTS1WLUNcblxudmFyIG1vZGVsID0ge1xuXHQvLyBhbGwgb3VyIHN0YXRlc1xuXHR0aW1lTGVmdDogMTAwMDAwLFxuXHRleHBpcmVkOiBmYWxzZSxcblx0aW1hZ2VzOiBbXVxufTtcblxuZnVuY3Rpb24gY29udHJvbGxlcihtb2RlbCwgcGFnZSwgaW5wdXQpIHtcblxuXHQvLyBleHBpcmVkP1xuXHRpZiAobW9kZWwudGltZUxlZnQgPiAwKSB7XG5cdFx0c2hvd1RpbWUobW9kZWwpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdG1vZGVsLmV4cGlyZWQgPSB0cnVlO1xuXHRcdHNob3dFeHBpcmVkKG1vZGVsKTtcblx0XHRub0RyYWcoKTtcblx0fVxuICBcblx0aWYgKCBpbnB1dCAmJiBpbnB1dFsxXS5pbmNsdWRlcyhcImRhdGE6aW1hZ2VcIikgJiYgaW5wdXRbM10gPT0gdHJ1ZSAmJiBtb2RlbC5leHBpcmVkID09IGZhbHNlKSB7IC8vIG5ldyBlbGVtZW50XG5cdFx0Ly8gdXBkYXRlIHRoZSBtb2RlbFxuXHRcdG1vZGVsLmltYWdlcy5wdXNoKGlucHV0KTtcblx0XHQvLyBkcm9wIGZpbGVcblx0XHRkcm9wRmlsZShwYWdlLCBpbnB1dFsxXSwgaW5wdXRbMF0pO1xuXHRcdC8vIGFkZCBib251cyB0aW1lXG5cdFx0YWRkdGltZSgxMDAwMCk7XG5cdFx0Ly8gY3JpdGljIHNwZWFrXG5cdFx0Y3JpdGljKCk7XG5cdH0gZWxzZSBpZiAoIGlucHV0ICYmICFpbnB1dFsxXS5pbmNsdWRlcyhcImRhdGE6aW1hZ2VcIikgJiYgbW9kZWwuZXhwaXJlZCA9PSBmYWxzZSkgeyAvLyBub3QgYW4gaW1hZ2Vcblx0XHRub3RBbkltYWdlKCk7XG5cdH0gZWxzZSBpZiAoaW5wdXQgJiYgaW5wdXRbM10gPT0gZmFsc2UgJiYgbW9kZWwuZXhwaXJlZCA9PSBmYWxzZSkgeyAvLyBkZWxldGluZyBhbiBlbGVtZW50XG5cdFx0cmVtb3ZlRWxlbWVudChpbnB1dFswXSk7XG5cdH0gZWxzZSBpZiAoaW5wdXQgJiYgbW9kZWwuZXhwaXJlZCA9PSB0cnVlKSB7IC8vIHRvbyBsYXRlXG5cdFx0TGF0ZURyb3BGaWxlKCk7XG5cdH1cbn1cblxuXG4vLyAtLS0gQ09OVFJPTExFUlxuXG52YXIgeCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuXHRtb2RlbC50aW1lTGVmdCA9IG1vZGVsLnRpbWVMZWZ0IC0gMTA7XG5cdGNvbnRyb2xsZXIobW9kZWwpO1xufSwgMTApO1xuXG5mdW5jdGlvbiBhZGR0aW1lKGJvbnVzVGltZSkge1xuXHRtb2RlbC50aW1lTGVmdCA9IG1vZGVsLnRpbWVMZWZ0ICsgYm9udXNUaW1lO1xufVxuXG4vLyBkcm9wRmlsZVxuXG5wYWdlcy5vbihcImRyYWdvdmVyXCIsIGZ1bmN0aW9uKGUpIHtcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAkKHRoaXMpLmFkZENsYXNzKCdkcmFnb3ZlcicpO1xufSk7XG5wYWdlcy5vbihcImRyYWdsZWF2ZVwiLCBmdW5jdGlvbihlKSB7XG5cdGUucHJldmVudERlZmF1bHQoKTtcbiAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZHJhZ292ZXInKTtcbn0pO1xucGFnZXMub24oXCJkcm9wXCIsIGZ1bmN0aW9uKGUpIHtcbiAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZHJhZ292ZXInKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zb2xlLmxvZyhlKTtcbiAgdmFyIGZpbGUgPSBlLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzWzBdLCBcbiAgICAgIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICB2YXIgcGFnZUlkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KTtcbiAgICAvLyBpZCwgdXJsLCBzaXplLCBwb3MsIHJvdGF0aW9uPywgdmlzaWJsZVxuICAgIGNvbnRyb2xsZXIobW9kZWwsIHBhZ2VJZCwgW21ha2VJZCgpLCBldmVudC50YXJnZXQucmVzdWx0LCBbMCwwLDAsMCwwXSwgdHJ1ZV0gKTtcbiAgfTtcbiAgY29uc29sZS5sb2coZmlsZSk7XG4gIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuXG5cdHJldHVybiBmYWxzZTtcbn0pO1xuLy8gcHJldmVudCBkcm9wIG9uIGJvZHlcbiQoJ2JvZHknKS5vbihcImRyYWdvdmVyXCIsIGZ1bmN0aW9uKGUpIHtcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG4kKCdib2R5Jykub24oXCJkcmFnbGVhdmVcIiwgZnVuY3Rpb24oZSkge1xuXHRlLnByZXZlbnREZWZhdWx0KCk7XG59KTtcbiQoJ2JvZHknKS5vbihcImRyb3BcIiwgZnVuY3Rpb24oZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGVycm9yU291bmQoKTtcbn0pO1xuXG4vLyByZW1vdmUgZWxlbWVudFxuJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jbG9zZScsIGZ1bmN0aW9uICgpIHtcblx0dmFyIHBhZ2VJZCA9ICQodGhpcykuY2xvc2VzdCgnLnBhZ2UnKS5hdHRyKCdpZCcpO1xuXHR2YXIgZWxlbWVudElkID0gJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdpZCcpO1xuXHR2YXIgZWxlbWVudFNyYyA9ICQodGhpcykuc2libGluZ3MoKS5hdHRyKCdzcmMnKTtcblx0Y29udHJvbGxlcihtb2RlbCwgcGFnZUlkLCBbZWxlbWVudElkLCBlbGVtZW50U3JjLCBbMCwwLDAsMCwwXSwgZmFsc2VdKTtcbn0pO1xuXG4vLyAtLS0gVklFV1xuXG5mdW5jdGlvbiBzaG93VGltZShtb2RlbCkge1xuXHRzZWNvbmRzID0gbW9kZWwudGltZUxlZnQgLyAxMDAwO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdW50ZXJcIikuaW5uZXJIVE1MID0gc2Vjb25kcy50b0ZpeGVkKDIpICsgXCIgc2Vjb25kcyBsZWZ0IVwiO1xufVxuXG5mdW5jdGlvbiBzaG93RXhwaXJlZCgpIHtcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb3VudGVyXCIpLmlubmVySFRNTCA9IFwiZXhwaXJlZCFcIjtcblx0JCgnYm9keScpLmFkZENsYXNzKCdleHBpcmVkJyk7XG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgXG5cdFx0d2luZG93LnByaW50KCk7IFxuXHR9LCAxMDAwKTtcblx0Y2xlYXJJbnRlcnZhbCh4KTtcbn1cblxuZnVuY3Rpb24gbm90QW5JbWFnZSgpIHtcblx0ZXJyb3JTb3VuZCgpO1xuXHRhbGVydCgnVGhlIGZpbGUgeW91IGRyb3BwZWQgaXMgbm90IGFuIGltYWdlIScpO1xufVxuXG5mdW5jdGlvbiBkcm9wRmlsZShwYWdlSWQsIHNyYywgaWQpIHtcblx0dmFyIHBhZ2VFbGVtZW50ID0gJChcIjxkaXY+XCIsIHtcImNsYXNzXCI6IFwicGFnZS1lbGVtZW50IGRyYWdnYWJsZVwifSk7XG5cdHZhciBwYWdlRWxlbWVudENvbnRlbnQgPSAkKFwiPGltZz5cIiwge1wic3JjXCI6IHNyY30pO1xuXHR2YXIgcGFnZUVsZW1lbnRDbG9zZSA9ICQoXCI8c3Bhbj5cIiwge1wiY2xhc3NcIjogXCJjbG9zZVwifSkudGV4dCgneCcpO1xuXHRwYWdlRWxlbWVudC5hcHBlbmQocGFnZUVsZW1lbnRDb250ZW50LCBwYWdlRWxlbWVudENsb3NlKTtcblx0cGFnZUVsZW1lbnQuYXR0cignaWQnLCBpZCk7XG5cdCQoJyMnICsgcGFnZUlkKS5hcHBlbmQocGFnZUVsZW1lbnQpO1xuXHQvLyByZWFkIHNpemUsIHBvcywgcm90IGFuZCBhZGQgdGhlbSB0byBtb2RlbFxuXHRlbGVtZW50UG9zID0gW1xuXHRcdHBhZ2VFbGVtZW50LnBvc2l0aW9uKCkubGVmdCxcblx0XHRwYWdlRWxlbWVudC5wb3NpdGlvbigpLnRvcCxcblx0XHRwYWdlRWxlbWVudC53aWR0aCgpLFxuXHRcdHBhZ2VFbGVtZW50LmhlaWdodCgpLFxuXHRcdDAgLy8gcm90YXRpb24gKFRPRE8pXG5cdF07XG5cdGZvcih2YXIgaSA9IDAgOyBpIDwgbW9kZWwuaW1hZ2VzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0aWYgKG1vZGVsLmltYWdlc1tpXVswXSA9PSBpZCkge1xuXHRcdFx0bW9kZWwuaW1hZ2VzW2ldWzJdID0gZWxlbWVudFBvcztcblx0XHR9XG5cdH0gXG59XG5cbmZ1bmN0aW9uIExhdGVEcm9wRmlsZShzcmMpIHtcblx0YWxlcnQoJ3RvbyBsYXRlIGJybycpO1xufVxuXG5mdW5jdGlvbiBub0RyYWcoKSB7XG5cdHZhciBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJhZ2dhYmxlXCIpO1xuICBcdFtdLmZvckVhY2guY2FsbChlbGVtcywgZnVuY3Rpb24oZWwpIHtcbiAgICBcdGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnZ2FibGVcIik7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcml0aWMoKSB7XG5cdGNyaXRpY1BvcHVwLmlubmVySFRNTCA9ICdNYWtlIHRoaXMgaW1hZ2UgYmlnZ2VyIHBscyEnO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFbGVtZW50KGlkKSB7XG5cdCQoJyMnICsgaWQpLmhpZGUoKTtcblx0Y29uc29sZS5sb2coaWQpO1xufVxuXG5pbnRlcmFjdCgnLmRyYWdnYWJsZScpXG5cdC5kcmFnZ2FibGUoe1xuXHRcdG9ubW92ZTogd2luZG93LmRyYWdNb3ZlTGlzdGVuZXIsXG5cdFx0cmVzdHJpY3Q6IHtcblx0XHRcdHJlc3RyaWN0aW9uOiAncGFyZW50Jyxcblx0XHRcdGVsZW1lbnRSZWN0OiB7XG5cdFx0XHRcdHRvcDogMCxcblx0XHRcdFx0bGVmdDogMCxcblx0XHRcdFx0Ym90dG9tOiAxLFxuXHRcdFx0XHRyaWdodDogMVxuXHRcdFx0fVxuXHRcdH0sXG5cdH0pXG5cdC5yZXNpemFibGUoe1xuXHRcdC8vIHJlc2l6ZSBmcm9tIGFsbCBlZGdlcyBhbmQgY29ybmVyc1xuXHRcdGVkZ2VzOiB7XG5cdFx0XHRsZWZ0OiB0cnVlLFxuXHRcdFx0cmlnaHQ6IHRydWUsXG5cdFx0XHRib3R0b206IHRydWUsXG5cdFx0XHR0b3A6IHRydWVcblx0XHR9LFxuXG5cdFx0Ly8ga2VlcCB0aGUgZWRnZXMgaW5zaWRlIHRoZSBwYXJlbnRcblx0XHRyZXN0cmljdEVkZ2VzOiB7XG5cdFx0XHRvdXRlcjogJ3BhcmVudCcsXG5cdFx0XHRlbmRPbmx5OiB0cnVlLFxuXHRcdH0sXG5cblx0XHRpbmVydGlhOiB0cnVlLFxuXHR9KVxuXHQub24oJ3Jlc2l6ZW1vdmUnLCBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQsXG5cdFx0XHR4ID0gKHBhcnNlRmxvYXQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS14JykpIHx8IDApLFxuXHRcdFx0eSA9IChwYXJzZUZsb2F0KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpKSB8fCAwKTtcblxuXHRcdC8vIHVwZGF0ZSB0aGUgZWxlbWVudCdzIHN0eWxlXG5cdFx0dGFyZ2V0LnN0eWxlLndpZHRoID0gZXZlbnQucmVjdC53aWR0aCArICdweCc7XG5cdFx0dGFyZ2V0LnN0eWxlLmhlaWdodCA9IGV2ZW50LnJlY3QuaGVpZ2h0ICsgJ3B4JztcblxuXHRcdC8vIHRyYW5zbGF0ZSB3aGVuIHJlc2l6aW5nIGZyb20gdG9wIG9yIGxlZnQgZWRnZXNcblx0XHR4ICs9IGV2ZW50LmRlbHRhUmVjdC5sZWZ0O1xuXHRcdHkgKz0gZXZlbnQuZGVsdGFSZWN0LnRvcDtcblxuXHRcdHRhcmdldC5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSB0YXJnZXQuc3R5bGUudHJhbnNmb3JtID1cblx0XHRcdCd0cmFuc2xhdGUoJyArIHggKyAncHgsJyArIHkgKyAncHgpJztcblxuXHRcdHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEteCcsIHgpO1xuXHRcdHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEteScsIHkpO1xuXHR9KTtcblxuZnVuY3Rpb24gZHJhZ01vdmVMaXN0ZW5lcihldmVudCkge1xuXHR2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxuXHRcdC8vIGtlZXAgdGhlIGRyYWdnZWQgcG9zaXRpb24gaW4gdGhlIGRhdGEteC9kYXRhLXkgYXR0cmlidXRlc1xuXHRcdHggPSAocGFyc2VGbG9hdCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKSkgfHwgMCkgKyBldmVudC5keCxcblx0XHR5ID0gKHBhcnNlRmxvYXQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15JykpIHx8IDApICsgZXZlbnQuZHk7XG5cblx0Ly8gdHJhbnNsYXRlIHRoZSBlbGVtZW50XG5cdHRhcmdldC5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPVxuXHRcdHRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPVxuXHRcdCd0cmFuc2xhdGUoJyArIHggKyAncHgsICcgKyB5ICsgJ3B4KSc7XG5cblx0Ly8gdXBkYXRlIHRoZSBwb3NpaW9uIGF0dHJpYnV0ZXNcblx0dGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS14JywgeCk7XG5cdHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEteScsIHkpO1xufVxuXG4vLyB0aGlzIGlzIHVzZWQgbGF0ZXIgaW4gdGhlIHJlc2l6aW5nIGFuZCBnZXN0dXJlIGRlbW9zXG53aW5kb3cuZHJhZ01vdmVMaXN0ZW5lciA9IGRyYWdNb3ZlTGlzdGVuZXI7XG5cbiJdfQ==
